!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=42)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r="[DEFAULT]",a=[],s=function(){function t(t,e,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled||!1,this.options_=i.deepCopy(t),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(t){a.push(t),setTimeout(function(){return t(null)},0)},removeAuthTokenListener:function(t){a=a.filter(function(e){return e!==t})}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this._automaticDataCollectionEnabled},set:function(t){this.checkDestroyed_(),this._automaticDataCollectionEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){t.firebase_.INTERNAL.removeApp(t.name_);var e=[];return Object.keys(t.services_).forEach(function(n){Object.keys(t.services_[n]).forEach(function(i){e.push(t.services_[n][i])})}),Promise.all(e.map(function(t){return t.INTERNAL.delete()}))}).then(function(){t.isDeleted_=!0,t.services_={}})},t.prototype._getService=function(t,e){if(void 0===e&&(e=r),this.checkDestroyed_(),this.services_[t]||(this.services_[t]={}),!this.services_[t][e]){var n=e!==r?e:void 0,i=this.firebase_.INTERNAL.factories[t](this,this.extendApp.bind(this),n);this.services_[t][e]=i}return this.services_[t][e]},t.prototype.extendApp=function(t){var e=this;i.deepExtend(this,t),t.INTERNAL&&t.INTERNAL.addAuthTokenListener&&(a.forEach(function(t){e.INTERNAL.addAuthTokenListener(t)}),a=[])},t.prototype.checkDestroyed_=function(){this.isDeleted_&&l("app-deleted",{name:this.name_})},t}();function l(t,e){throw u.create(t,e)}s.prototype.name&&s.prototype.options||s.prototype.delete||console.log("dc");var u=new i.ErrorFactory("app","Firebase",{"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."}),c=function t(){var e={},n={},a={},u={__esModule:!0,initializeApp:function(t,n){if(void 0===n&&(n={}),"object"!=typeof n||null===n){var i=n;n={name:i}}var a=n;void 0===a.name&&(a.name=r);var c=a.name;"string"==typeof c&&c||l("bad-app-name",{name:c+""}),o(e,c)&&l("duplicate-app",{name:c});var h=new s(t,a,u);return e[c]=h,d(h,"create"),h},app:c,apps:null,Promise:Promise,SDK_VERSION:"5.0.4",INTERNAL:{registerService:function(t,e,o,r,d){n[t]&&l("duplicate-service",{name:t}),n[t]=e,r&&(a[t]=r,h().forEach(function(t){r("create",t)}));var f=function(e){return void 0===e&&(e=c()),"function"!=typeof e[t]&&l("invalid-app-argument",{name:t}),e[t]()};return void 0!==o&&i.deepExtend(f,o),u[t]=f,s.prototype[t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._getService.bind(this,t).apply(this,d?e:[])},f},createFirebaseNamespace:t,extendNamespace:function(t){i.deepExtend(u,t)},createSubscribe:i.createSubscribe,ErrorFactory:i.ErrorFactory,removeApp:function(t){d(e[t],"delete"),delete e[t]},factories:n,useAsService:f,Promise:Promise,deepExtend:i.deepExtend}};function c(t){return o(e,t=t||r)||l("no-app",{name:t}),e[t]}function h(){return Object.keys(e).map(function(t){return e[t]})}function d(t,e){Object.keys(n).forEach(function(n){var i=f(t,n);null!==i&&a[i]&&a[i](e,t)})}function f(t,e){if("serverAuth"===e)return null;var n=e;return t.options,n}return i.patchProperty(u,"default",u),Object.defineProperty(u,"apps",{get:h}),i.patchProperty(c,"App",s),u}();e.firebase=c,e.default=c},function(t,e,n){
/* @preserve
 * Leaflet 1.3.3, a JS library for interactive maps. http://leafletjs.com
 * (c) 2010-2018 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */
!function(t){"use strict";var e=Object.freeze;function n(t){var e,n,i,o;for(n=1,i=arguments.length;n<i;n++)for(e in o=arguments[n])t[e]=o[e];return t}Object.freeze=function(t){return t};var i=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function o(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var i=n.call(arguments,2);return function(){return t.apply(e,i.length?i.concat(n.call(arguments)):arguments)}}var r=0;function a(t){return t._leaflet_id=t._leaflet_id||++r,t._leaflet_id}function s(t,e,n){var i,o,r,a;return a=function(){i=!1,o&&(r.apply(n,o),o=!1)},r=function(){i?o=arguments:(t.apply(n,arguments),setTimeout(a,e),i=!0)}}function l(t,e,n){var i=e[1],o=e[0],r=i-o;return t===i&&n?t:((t-o)%r+r)%r+o}function u(){return!1}function c(t,e){var n=Math.pow(10,void 0===e?6:e);return Math.round(t*n)/n}function h(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function d(t){return h(t).split(/\s+/)}function f(t,e){for(var n in t.hasOwnProperty("options")||(t.options=t.options?i(t.options):{}),e)t.options[n]=e[n];return t.options}function p(t,e,n){var i=[];for(var o in t)i.push(encodeURIComponent(n?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")}var m=/\{ *([\w_-]+) *\}/g;function v(t,e){return t.replace(m,function(t,n){var i=e[n];if(void 0===i)throw new Error("No value provided for variable "+t);return"function"==typeof i&&(i=i(e)),i})}var g=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function _(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function b(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var w=0;function E(t){var e=+new Date,n=Math.max(0,16-(e-w));return w=e+n,window.setTimeout(t,n)}var S=window.requestAnimationFrame||b("RequestAnimationFrame")||E,C=window.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function x(t,e,n){if(!n||S!==E)return S.call(window,o(t,e));t.call(e)}function T(t){t&&C.call(window,t)}var k=(Object.freeze||Object)({freeze:e,extend:n,create:i,bind:o,lastId:r,stamp:a,throttle:s,wrapNum:l,falseFn:u,formatNum:c,trim:h,splitWords:d,setOptions:f,getParamString:p,template:v,isArray:g,indexOf:_,emptyImageUrl:y,requestFn:S,cancelFn:C,requestAnimFrame:x,cancelAnimFrame:T});function I(){}I.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},o=e.__super__=this.prototype,r=i(o);for(var a in r.constructor=e,e.prototype=r,this)this.hasOwnProperty(a)&&"prototype"!==a&&"__super__"!==a&&(e[a]=this[a]);return t.statics&&(n(e,t.statics),delete t.statics),t.includes&&(function(t){if("undefined"!=typeof L&&L&&L.Mixin){t=g(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(t.includes),n.apply(null,[r].concat(t.includes)),delete t.includes),r.options&&(t.options=n(i(r.options),t.options)),n(r,t),r._initHooks=[],r.callInitHooks=function(){if(!this._initHooksCalled){o.callInitHooks&&o.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=r._initHooks.length;t<e;t++)r._initHooks[t].call(this)}},e},I.include=function(t){return n(this.prototype,t),this},I.mergeOptions=function(t){return n(this.prototype.options,t),this},I.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var P={on:function(t,e,n){if("object"==typeof t)for(var i in t)this._on(i,t[i],e);else{t=d(t);for(var o=0,r=t.length;o<r;o++)this._on(t[o],e,n)}return this},off:function(t,e,n){if(t)if("object"==typeof t)for(var i in t)this._off(i,t[i],e);else{t=d(t);for(var o=0,r=t.length;o<r;o++)this._off(t[o],e,n)}else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var i=this._events[t];i||(i=[],this._events[t]=i),n===this&&(n=void 0);for(var o={fn:e,ctx:n},r=i,a=0,s=r.length;a<s;a++)if(r[a].fn===e&&r[a].ctx===n)return;r.push(o)},_off:function(t,e,n){var i,o,r;if(this._events&&(i=this._events[t]))if(e){if(n===this&&(n=void 0),i)for(o=0,r=i.length;o<r;o++){var a=i[o];if(a.ctx===n&&a.fn===e)return a.fn=u,this._firingCount&&(this._events[t]=i=i.slice()),void i.splice(o,1)}}else{for(o=0,r=i.length;o<r;o++)i[o].fn=u;delete this._events[t]}},fire:function(t,e,i){if(!this.listens(t,i))return this;var o=n({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var r=this._events[t];if(r){this._firingCount=this._firingCount+1||1;for(var a=0,s=r.length;a<s;a++){var l=r[a];l.fn.call(l.ctx||this,o)}this._firingCount--}}return i&&this._propagateEvent(o),this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var i in this._eventParents)if(this._eventParents[i].listens(t,e))return!0;return!1},once:function(t,e,n){if("object"==typeof t){for(var i in t)this.once(i,t[i],e);return this}var r=o(function(){this.off(t,e,n).off(t,r,n)},this);return this.on(t,e,n).on(t,r,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[a(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[a(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,n({layer:t.target,propagatedFrom:t.target},t),!0)}};P.addEventListener=P.on,P.removeEventListener=P.clearAllEventListeners=P.off,P.addOneTimeEventListener=P.once,P.fireEvent=P.fire,P.hasEventListeners=P.listens;var A=I.extend(P);function O(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var N=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function R(t,e,n){return t instanceof O?t:g(t)?new O(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new O(t.x,t.y):new O(t,e,n)}function D(t,e){if(t)for(var n=e?[t,e]:t,i=0,o=n.length;i<o;i++)this.extend(n[i])}function M(t,e){return!t||t instanceof D?t:new D(t,e)}function F(t,e){if(t)for(var n=e?[t,e]:t,i=0,o=n.length;i<o;i++)this.extend(n[i])}function j(t,e){return t instanceof F?t:new F(t,e)}function B(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function z(t,e,n){return t instanceof B?t:g(t)&&"object"!=typeof t[0]?3===t.length?new B(t[0],t[1],t[2]):2===t.length?new B(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new B(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new B(t,e,n)}O.prototype={clone:function(){return new O(this.x,this.y)},add:function(t){return this.clone()._add(R(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(R(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new O(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new O(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=N(this.x),this.y=N(this.y),this},distanceTo:function(t){var e=(t=R(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=R(t)).x===this.x&&t.y===this.y},contains:function(t){return t=R(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+c(this.x)+", "+c(this.y)+")"}},D.prototype={extend:function(t){return t=R(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new O((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new O(this.min.x,this.max.y)},getTopRight:function(){return new O(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"==typeof t[0]||t instanceof O?R(t):M(t))instanceof D?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=M(t);var e=this.min,n=this.max,i=t.min,o=t.max,r=o.x>=e.x&&i.x<=n.x,a=o.y>=e.y&&i.y<=n.y;return r&&a},overlaps:function(t){t=M(t);var e=this.min,n=this.max,i=t.min,o=t.max,r=o.x>e.x&&i.x<n.x,a=o.y>e.y&&i.y<n.y;return r&&a},isValid:function(){return!(!this.min||!this.max)}},F.prototype={extend:function(t){var e,n,i=this._southWest,o=this._northEast;if(t instanceof B)e=t,n=t;else{if(!(t instanceof F))return t?this.extend(z(t)||j(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return i||o?(i.lat=Math.min(e.lat,i.lat),i.lng=Math.min(e.lng,i.lng),o.lat=Math.max(n.lat,o.lat),o.lng=Math.max(n.lng,o.lng)):(this._southWest=new B(e.lat,e.lng),this._northEast=new B(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t,o=Math.abs(e.lng-n.lng)*t;return new F(new B(e.lat-i,e.lng-o),new B(n.lat+i,n.lng+o))},getCenter:function(){return new B((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new B(this.getNorth(),this.getWest())},getSouthEast:function(){return new B(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof B||"lat"in t?z(t):j(t);var e,n,i=this._southWest,o=this._northEast;return t instanceof F?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=i.lat&&n.lat<=o.lat&&e.lng>=i.lng&&n.lng<=o.lng},intersects:function(t){t=j(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),o=t.getNorthEast(),r=o.lat>=e.lat&&i.lat<=n.lat,a=o.lng>=e.lng&&i.lng<=n.lng;return r&&a},overlaps:function(t){t=j(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),o=t.getNorthEast(),r=o.lat>e.lat&&i.lat<n.lat,a=o.lng>e.lng&&i.lng<n.lng;return r&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=j(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},B.prototype={equals:function(t,e){if(!t)return!1;t=z(t);var n=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return n<=(void 0===e?1e-9:e)},toString:function(t){return"LatLng("+c(this.lat,t)+", "+c(this.lng,t)+")"},distanceTo:function(t){return V.distance(this,z(t))},wrap:function(){return V.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return j([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new B(this.lat,this.lng,this.alt)}};var U,W={latLngToPoint:function(t,e){var n=this.projection.project(t),i=this.scale(e);return this.transformation._transform(n,i)},pointToLatLng:function(t,e){var n=this.scale(e),i=this.transformation.untransform(t,n);return this.projection.unproject(i)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t),i=this.transformation.transform(e.min,n),o=this.transformation.transform(e.max,n);return new D(i,o)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?l(t.lng,this.wrapLng,!0):t.lng,n=this.wrapLat?l(t.lat,this.wrapLat,!0):t.lat,i=t.alt;return new B(n,e,i)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),i=e.lat-n.lat,o=e.lng-n.lng;if(0===i&&0===o)return t;var r=t.getSouthWest(),a=t.getNorthEast(),s=new B(r.lat-i,r.lng-o),l=new B(a.lat-i,a.lng-o);return new F(s,l)}},V=n({},W,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,i=t.lat*n,o=e.lat*n,r=Math.sin((e.lat-t.lat)*n/2),a=Math.sin((e.lng-t.lng)*n/2),s=r*r+Math.cos(i)*Math.cos(o)*a*a,l=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*l}}),H={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),o=Math.sin(i*e);return new O(this.R*t.lng*e,this.R*Math.log((1+o)/(1-o))/2)},unproject:function(t){var e=180/Math.PI;return new B((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(U=6378137*Math.PI,new D([-U,-U],[U,U]))};function q(t,e,n,i){if(g(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=n,this._d=i}function Z(t,e,n,i){return new q(t,e,n,i)}q.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new O((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var K=n({},V,{code:"EPSG:3857",projection:H,transformation:function(){var t=.5/(Math.PI*H.R);return Z(t,.5,-t,.5)}()}),G=n({},K,{code:"EPSG:900913"});function Q(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Y(t,e){var n,i,o,r,a,s,l="";for(n=0,o=t.length;n<o;n++){for(a=t[n],i=0,r=a.length;i<r;i++)s=a[i],l+=(i?"L":"M")+s.x+" "+s.y;l+=e?kt?"z":"x":""}return l||"M0 0"}var X=document.documentElement.style,J="ActiveXObject"in window,$=J&&!document.addEventListener,tt="msLaunchUri"in navigator&&!("documentMode"in document),et=Pt("webkit"),nt=Pt("android"),it=Pt("android 2")||Pt("android 3"),ot=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),rt=nt&&Pt("Google")&&ot<537&&!("AudioNode"in window),at=!!window.opera,st=Pt("chrome"),lt=Pt("gecko")&&!et&&!at&&!J,ut=!st&&Pt("safari"),ct=Pt("phantom"),ht="OTransition"in X,dt=0===navigator.platform.indexOf("Win"),ft=J&&"transition"in X,pt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!it,mt="MozPerspective"in X,vt=!window.L_DISABLE_3D&&(ft||pt||mt)&&!ht&&!ct,gt="undefined"!=typeof orientation||Pt("mobile"),_t=gt&&et,yt=gt&&pt,bt=!window.PointerEvent&&window.MSPointerEvent,wt=!(!window.PointerEvent&&!bt),Et=!window.L_NO_TOUCH&&(wt||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),St=gt&&at,Ct=gt&&lt,xt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Tt=!!document.createElement("canvas").getContext,kt=!(!document.createElementNS||!Q("svg").createSVGRect),It=!kt&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}();function Pt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Lt=(Object.freeze||Object)({ie:J,ielt9:$,edge:tt,webkit:et,android:nt,android23:it,androidStock:rt,opera:at,chrome:st,gecko:lt,safari:ut,phantom:ct,opera12:ht,win:dt,ie3d:ft,webkit3d:pt,gecko3d:mt,any3d:vt,mobile:gt,mobileWebkit:_t,mobileWebkit3d:yt,msPointer:bt,pointer:wt,touch:Et,mobileOpera:St,mobileGecko:Ct,retina:xt,canvas:Tt,svg:kt,vml:It}),At=bt?"MSPointerDown":"pointerdown",Ot=bt?"MSPointerMove":"pointermove",Nt=bt?"MSPointerUp":"pointerup",Rt=bt?"MSPointerCancel":"pointercancel",Dt=["INPUT","SELECT","OPTION"],Mt={},Ft=!1,jt=0;function Bt(t,e,n,i){return"touchstart"===e?function(t,e,n){var i=o(function(t){if("mouse"!==t.pointerType&&t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(Dt.indexOf(t.target.tagName)<0))return;Me(t)}Vt(t,e)});t["_leaflet_touchstart"+n]=i,t.addEventListener(At,i,!1),Ft||(document.documentElement.addEventListener(At,zt,!0),document.documentElement.addEventListener(Ot,Ut,!0),document.documentElement.addEventListener(Nt,Wt,!0),document.documentElement.addEventListener(Rt,Wt,!0),Ft=!0)}(t,n,i):"touchmove"===e?function(t,e,n){var i=function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&Vt(t,e)};t["_leaflet_touchmove"+n]=i,t.addEventListener(Ot,i,!1)}(t,n,i):"touchend"===e&&function(t,e,n){var i=function(t){Vt(t,e)};t["_leaflet_touchend"+n]=i,t.addEventListener(Nt,i,!1),t.addEventListener(Rt,i,!1)}(t,n,i),this}function zt(t){Mt[t.pointerId]=t,jt++}function Ut(t){Mt[t.pointerId]&&(Mt[t.pointerId]=t)}function Wt(t){delete Mt[t.pointerId],jt--}function Vt(t,e){for(var n in t.touches=[],Mt)t.touches.push(Mt[n]);t.changedTouches=[t],e(t)}var Ht=bt?"MSPointerDown":wt?"pointerdown":"touchstart",qt=bt?"MSPointerUp":wt?"pointerup":"touchend",Zt="_leaflet_";function Kt(t,e,n){var i,o,r=!1,a=250;function s(t){var e;if(wt){if(!tt||"mouse"===t.pointerType)return;e=jt}else e=t.touches.length;if(!(e>1)){var n=Date.now(),s=n-(i||n);o=t.touches?t.touches[0]:t,r=s>0&&s<=a,i=n}}function l(t){if(r&&!o.cancelBubble){if(wt){if(!tt||"mouse"===t.pointerType)return;var n,a,s={};for(a in o)n=o[a],s[a]=n&&n.bind?n.bind(o):n;o=s}o.type="dblclick",e(o),i=null}}return t[Zt+Ht+n]=s,t[Zt+qt+n]=l,t[Zt+"dblclick"+n]=e,t.addEventListener(Ht,s,!1),t.addEventListener(qt,l,!1),t.addEventListener("dblclick",e,!1),this}function Gt(t,e){var n=t[Zt+Ht+e],i=t[Zt+qt+e],o=t[Zt+"dblclick"+e];return t.removeEventListener(Ht,n,!1),t.removeEventListener(qt,i,!1),tt||t.removeEventListener("dblclick",o,!1),this}var Qt,Yt,Xt,Jt,$t,te=ve(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),ee=ve(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ne="webkitTransition"===ee||"OTransition"===ee?ee+"End":"transitionend";function ie(t){return"string"==typeof t?document.getElementById(t):t}function oe(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&document.defaultView){var i=document.defaultView.getComputedStyle(t,null);n=i?i[e]:null}return"auto"===n?null:n}function re(t,e,n){var i=document.createElement(t);return i.className=e||"",n&&n.appendChild(i),i}function ae(t){var e=t.parentNode;e&&e.removeChild(t)}function se(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function le(t){var e=t.parentNode;e.lastChild!==t&&e.appendChild(t)}function ue(t){var e=t.parentNode;e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function ce(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=pe(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function he(t,e){if(void 0!==t.classList)for(var n=d(e),i=0,o=n.length;i<o;i++)t.classList.add(n[i]);else if(!ce(t,e)){var r=pe(t);fe(t,(r?r+" ":"")+e)}}function de(t,e){void 0!==t.classList?t.classList.remove(e):fe(t,h((" "+pe(t)+" ").replace(" "+e+" "," ")))}function fe(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function pe(t){return void 0===t.className.baseVal?t.className:t.className.baseVal}function me(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(i)}catch(t){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+i+"(opacity="+e+")"}(t,e)}function ve(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function ge(t,e,n){var i=e||new O(0,0);t.style[te]=(ft?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(n?" scale("+n+")":"")}function _e(t,e){t._leaflet_pos=e,vt?ge(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function ye(t){return t._leaflet_pos||new O(0,0)}if("onselectstart"in document)Qt=function(){Ie(window,"selectstart",Me)},Yt=function(){Le(window,"selectstart",Me)};else{var be=ve(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Qt=function(){if(be){var t=document.documentElement.style;Xt=t[be],t[be]="none"}},Yt=function(){be&&(document.documentElement.style[be]=Xt,Xt=void 0)}}function we(){Ie(window,"dragstart",Me)}function Ee(){Le(window,"dragstart",Me)}function Se(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(Ce(),Jt=t,$t=t.style.outline,t.style.outline="none",Ie(window,"keydown",Ce))}function Ce(){Jt&&(Jt.style.outline=$t,Jt=void 0,$t=void 0,Le(window,"keydown",Ce))}function xe(t){do{t=t.parentNode}while(!(t.offsetWidth&&t.offsetHeight||t===document.body));return t}function Te(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var ke=(Object.freeze||Object)({TRANSFORM:te,TRANSITION:ee,TRANSITION_END:ne,get:ie,getStyle:oe,create:re,remove:ae,empty:se,toFront:le,toBack:ue,hasClass:ce,addClass:he,removeClass:de,setClass:fe,getClass:pe,setOpacity:me,testProp:ve,setTransform:ge,setPosition:_e,getPosition:ye,disableTextSelection:Qt,enableTextSelection:Yt,disableImageDrag:we,enableImageDrag:Ee,preventOutline:Se,restoreOutline:Ce,getSizedParentNode:xe,getScale:Te});function Ie(t,e,n,i){if("object"==typeof e)for(var o in e)Ae(t,o,e[o],n);else{e=d(e);for(var r=0,a=e.length;r<a;r++)Ae(t,e[r],n,i)}return this}var Pe="_leaflet_events";function Le(t,e,n,i){if("object"==typeof e)for(var o in e)Oe(t,o,e[o],n);else if(e){e=d(e);for(var r=0,a=e.length;r<a;r++)Oe(t,e[r],n,i)}else{for(var s in t[Pe])Oe(t,s,t[Pe][s]);delete t[Pe]}return this}function Ae(t,e,n,i){var o=e+a(n)+(i?"_"+a(i):"");if(t[Pe]&&t[Pe][o])return this;var r=function(e){return n.call(i||t,e||window.event)},s=r;wt&&0===e.indexOf("touch")?Bt(t,e,r,o):!Et||"dblclick"!==e||!Kt||wt&&st?"addEventListener"in t?"mousewheel"===e?t.addEventListener("onwheel"in t?"wheel":"mousewheel",r,!1):"mouseenter"===e||"mouseleave"===e?(r=function(e){e=e||window.event,qe(t,e)&&s(e)},t.addEventListener("mouseenter"===e?"mouseover":"mouseout",r,!1)):("click"===e&&nt&&(r=function(t){!function(t,e){var n=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,i=Ue&&n-Ue;i&&i>100&&i<500||t.target._simulatedClick&&!t._simulated?Fe(t):(Ue=n,e(t))}(t,s)}),t.addEventListener(e,r,!1)):"attachEvent"in t&&t.attachEvent("on"+e,r):Kt(t,r,o),t[Pe]=t[Pe]||{},t[Pe][o]=r}function Oe(t,e,n,i){var o=e+a(n)+(i?"_"+a(i):""),r=t[Pe]&&t[Pe][o];if(!r)return this;wt&&0===e.indexOf("touch")?function(t,e,n){var i=t["_leaflet_"+e+n];"touchstart"===e?t.removeEventListener(At,i,!1):"touchmove"===e?t.removeEventListener(Ot,i,!1):"touchend"===e&&(t.removeEventListener(Nt,i,!1),t.removeEventListener(Rt,i,!1))}(t,e,o):!Et||"dblclick"!==e||!Gt||wt&&st?"removeEventListener"in t?"mousewheel"===e?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",r,!1):t.removeEventListener("mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,r,!1):"detachEvent"in t&&t.detachEvent("on"+e,r):Gt(t,o),t[Pe][o]=null}function Ne(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,He(t),this}function Re(t){return Ae(t,"mousewheel",Ne),this}function De(t){return Ie(t,"mousedown touchstart dblclick",Ne),Ae(t,"click",Ve),this}function Me(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Fe(t){return Me(t),Ne(t),this}function je(t,e){if(!e)return new O(t.clientX,t.clientY);var n=Te(e),i=n.boundingClientRect;return new O((t.clientX-i.left)/n.x-e.clientLeft,(t.clientY-i.top)/n.y-e.clientTop)}var Be=dt&&st?2*window.devicePixelRatio:lt?window.devicePixelRatio:1;function ze(t){return tt?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/Be:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var Ue,We={};function Ve(t){We[t.type]=!0}function He(t){var e=We[t.type];return We[t.type]=!1,e}function qe(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(t){return!1}return n!==t}var Ze=(Object.freeze||Object)({on:Ie,off:Le,stopPropagation:Ne,disableScrollPropagation:Re,disableClickPropagation:De,preventDefault:Me,stop:Fe,getMousePosition:je,getWheelDelta:ze,fakeStop:Ve,skipped:He,isExternalTarget:qe,addListener:Ie,removeListener:Le}),Ke=A.extend({run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=ye(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=x(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),_e(this._el,n),this.fire("step")},_complete:function(){T(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Ge=A.extend({options:{crs:K,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=f(this,e),this._initContainer(t),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(z(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._zoomAnimated=ee&&vt&&!St&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ie(this._proxy,ne,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,i){if(e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(z(t),e,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i){void 0!==i.animate&&(i.zoom=n({animate:i.animate},i.zoom),i.pan=n({animate:i.animate,duration:i.duration},i.pan));var o=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,i.zoom):this._tryAnimatedPan(t,i.pan);if(o)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(vt?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(vt?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var i=this.getZoomScale(e),o=this.getSize().divideBy(2),r=t instanceof O?t:this.latLngToContainerPoint(t),a=r.subtract(o).multiplyBy(1-1/i),s=this.containerPointToLatLng(o.add(a));return this.setView(s,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():j(t);var n=R(e.paddingTopLeft||e.padding||[0,0]),i=R(e.paddingBottomRight||e.padding||[0,0]),o=this.getBoundsZoom(t,!1,n.add(i));if((o="number"==typeof e.maxZoom?Math.min(e.maxZoom,o):o)===1/0)return{center:t.getCenter(),zoom:o};var r=i.subtract(n).divideBy(2),a=this.project(t.getSouthWest(),o),s=this.project(t.getNorthEast(),o),l=this.unproject(a.add(s).divideBy(2).add(r),o);return{center:l,zoom:o}},fitBounds:function(t,e){if(!(t=j(t)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=R(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ke,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){he(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){if(!1===(n=n||{}).animate||!vt)return this.setView(t,e,n);this._stop();var i=this.project(this.getCenter()),o=this.project(t),r=this.getSize(),a=this._zoom;t=z(t),e=void 0===e?a:e;var s=Math.max(r.x,r.y),l=s*this.getZoomScale(a,e),u=o.distanceTo(i)||1,c=1.42,h=c*c;function d(t){var e=t?-1:1,n=t?l:s,i=l*l-s*s+e*h*h*u*u,o=2*n*h*u,r=i/o,a=Math.sqrt(r*r+1)-r,c=a<1e-9?-18:Math.log(a);return c}function f(t){return(Math.exp(t)-Math.exp(-t))/2}function p(t){return(Math.exp(t)+Math.exp(-t))/2}var m=d(0);function v(t){return s*(p(m)*(f(e=m+c*t)/p(e))-f(m))/h;var e}var g=Date.now(),_=(d(1)-m)/c,y=n.duration?1e3*n.duration:1e3*_*.8;return this._moveStart(!0,n.noMoveStart),function n(){var r=(Date.now()-g)/y,l=function(t){return 1-Math.pow(1-t,1.5)}(r)*_;r<=1?(this._flyToFrame=x(n,this),this._move(this.unproject(i.add(o.subtract(i).multiplyBy(v(l)/u)),a),this.getScaleZoom(s/function(t){return s*(p(m)/p(m+c*t))}(l),a),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return(t=j(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),i=this._limitCenter(n,this._zoom,j(t));return n.equals(i)||this.panTo(i,e),this._enforcingBounds=!1,this},invalidateSize:function(t){if(!this._loaded)return this;t=n({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),r=e.divideBy(2).round(),a=i.divideBy(2).round(),s=r.subtract(a);return s.x||s.y?(t.animate&&t.pan?this.panBy(s):(t.pan&&this._rawPanBy(s),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=n({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=o(this._handleGeolocationResponse,this),i=o(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,n=t.coords.longitude,i=new B(e,n),o=i.toBounds(2*t.coords.accuracy),r=this._locateOptions;if(r.setView){var a=this.getBoundsZoom(o);this.setView(i,r.maxZoom?Math.min(a,r.maxZoom):a)}var s={latlng:i,bounds:o,timestamp:t.timestamp};for(var l in t.coords)"number"==typeof t.coords[l]&&(s[l]=t.coords[l]);this.fire("locationfound",s)},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ae(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(T(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)ae(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),i=re("div",n,e||this._mapPane);return t&&(this._panes[t]=i),i},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),n=this.unproject(t.getTopRight());return new F(e,n)},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=j(t),n=R(n||[0,0]);var i=this.getZoom()||0,o=this.getMinZoom(),r=this.getMaxZoom(),a=t.getNorthWest(),s=t.getSouthEast(),l=this.getSize().subtract(n),u=M(this.project(s,i),this.project(a,i)).getSize(),c=vt?this.options.zoomSnap:1,h=l.x/u.x,d=l.y/u.y,f=e?Math.max(h,d):Math.min(h,d);return i=this.getScaleZoom(f,i),c&&(i=Math.round(i/(c/100))*(c/100),i=e?Math.ceil(i/c)*c:Math.floor(i/c)*c),Math.max(o,Math.min(r,i))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new O(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new D(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=void 0===e?this._zoom:e;var i=n.zoom(t*n.scale(e));return isNaN(i)?1/0:i},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(z(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(R(t),e)},layerPointToLatLng:function(t){var e=R(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(z(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(z(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(j(t))},distance:function(t,e){return this.options.crs.distance(z(t),z(e))},containerPointToLayerPoint:function(t){return R(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return R(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(R(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(z(t)))},mouseEventToContainerPoint:function(t){return je(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=ie(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");Ie(e,"scroll",this._onScroll,this),this._containerId=a(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&vt,he(t,"leaflet-container"+(Et?" leaflet-touch":"")+(xt?" leaflet-retina":"")+($?" leaflet-oldie":"")+(ut?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=oe(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),_e(this._mapPane,new O(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(he(t.markerPane,"leaflet-zoom-hide"),he(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){_e(this._mapPane,new O(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var i=this._zoom!==e;this._moveStart(i,!1)._move(t,e)._moveEnd(i),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n){void 0===e&&(e=this._zoom);var i=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(i||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return T(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){_e(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[a(this._container)]=this;var e=t?Le:Ie;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),vt&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){T(this._resizeRequest),this._resizeRequest=x(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,i=[],o="mouseout"===e||"mouseover"===e,r=t.target||t.srcElement,s=!1;r;){if((n=this._targets[a(r)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){s=!0;break}if(n&&n.listens(e,!0)){if(o&&!qe(r,t))break;if(i.push(n),o)break}if(r===this._container)break;r=r.parentNode}return i.length||s||o||!qe(r,t)||(i=[this]),i},_handleDOMEvent:function(t){if(this._loaded&&!He(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e||Se(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,i){if("click"===t.type){var o=n({},t);o.type="preclick",this._fireDOMEvent(o,o.type,i)}if(!t._stopped&&(i=(i||[]).concat(this._findEventTargets(t,e))).length){var r=i[0];"contextmenu"===e&&r.listens(e,!0)&&Me(t);var a={originalEvent:t};if("keypress"!==t.type){var s=r.getLatLng&&(!r._radius||r._radius<=10);a.containerPoint=s?this.latLngToContainerPoint(r.getLatLng()):this.mouseEventToContainerPoint(t),a.layerPoint=this.containerPointToLayerPoint(a.containerPoint),a.latlng=s?r.getLatLng():this.layerPointToLatLng(a.layerPoint)}for(var l=0;l<i.length;l++)if(i[l].fire(e,a,!0),a.originalEvent._stopped||!1===i[l].options.bubblingMouseEvents&&-1!==_(this._mouseEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return ye(this._mapPane)||new O(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var n=t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return n.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(i)},_latLngBoundsToNewLayerBounds:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return M([this.project(t.getSouthWest(),e)._subtract(i),this.project(t.getNorthWest(),e)._subtract(i),this.project(t.getSouthEast(),e)._subtract(i),this.project(t.getNorthEast(),e)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var i=this.project(t,e),o=this.getSize().divideBy(2),r=new D(i.subtract(o),i.add(o)),a=this._getBoundsOffset(r,n,e);return a.round().equals([0,0])?t:this.unproject(i.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),i=new D(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(i,e))},_getBoundsOffset:function(t,e,n){var i=M(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),o=i.min.subtract(t.min),r=i.max.subtract(t.max),a=this._rebound(o.x,-r.x),s=this._rebound(o.y,-r.y);return new O(a,s)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),i=vt?this.options.zoomSnap:1;return i&&(t=Math.round(t/i)*i),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){de(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n)||(this.panBy(n,e),0))},_createAnimProxy:function(){var t=this._proxy=re("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(t){var e=te,n=this._proxy.style[e];ge(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var t=this.getCenter(),e=this.getZoom();ge(this._proxy,this.project(t,e),this.getZoomScale(e,1))},this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ae(this._proxy),delete this._proxy},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1/i);return!(!0!==n.animate&&!this.getSize().contains(o)||(x(function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)},this),0))},_animateZoom:function(t,e,n,i){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,he(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:i}),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&de(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),x(function(){this._moveEnd(!0)},this))}}),Qe=I.extend({options:{position:"topright"},initialize:function(t){f(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n];return he(e,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(e,i.firstChild):i.appendChild(e),this},remove:function(){return this._map?(ae(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Ye=function(t){return new Qe(t)};Ge.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=re("div",e+"control-container",this._container);function i(i,o){var r=e+i+" "+e+o;t[i+o]=re("div",r,n)}i("top","left"),i("top","right"),i("bottom","left"),i("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)ae(this._controlCorners[t]);ae(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Xe=Qe.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,i){return n<i?-1:i<n?1:0}},initialize:function(t,e,n){for(var i in f(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[i],i);for(i in e)this._addLayer(e[i],i,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Qe.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(a(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){he(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(he(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=t+"px"):de(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return de(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=re("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),De(e),Re(e);var i=this._form=re("form",t+"-list");n&&(this._map.on("click",this.collapse,this),nt||Ie(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var o=this._layersLink=re("a",t+"-toggle",e);o.href="#",o.title="Layers",Et?(Ie(o,"click",Fe),Ie(o,"click",this.expand,this)):Ie(o,"focus",this.expand,this),n||this.expand(),this._baseLayersList=re("div",t+"-base",i),this._separator=re("div",t+"-separator",i),this._overlaysList=re("div",t+"-overlays",i),e.appendChild(i)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&a(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(o(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;se(this._baseLayersList),se(this._overlaysList),this._layerControlInputs=[];var t,e,n,i,o=0;for(n=0;n<this._layers.length;n++)i=this._layers[n],this._addItem(i),e=e||i.overlay,t=t||!i.overlay,o+=i.overlay?0:1;return this.options.hideSingleBase&&(t=t&&o>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(a(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",i=document.createElement("div");return i.innerHTML=n,i.firstChild},_addItem:function(t){var e,n=document.createElement("label"),i=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=i):e=this._createRadioElement("leaflet-base-layers",i),this._layerControlInputs.push(e),e.layerId=a(t.layer),Ie(e,"click",this._onInputClick,this);var o=document.createElement("span");o.innerHTML=" "+t.name;var r=document.createElement("div");n.appendChild(r),r.appendChild(e),r.appendChild(o);var s=t.overlay?this._overlaysList:this._baseLayersList;return s.appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n=this._layerControlInputs,i=[],o=[];this._handlingClick=!0;for(var r=n.length-1;r>=0;r--)t=n[r],e=this._getLayer(t.layerId).layer,t.checked?i.push(e):t.checked||o.push(e);for(r=0;r<o.length;r++)this._map.hasLayer(o[r])&&this._map.removeLayer(o[r]);for(r=0;r<i.length;r++)this._map.hasLayer(i[r])||this._map.addLayer(i[r]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,i=this._map.getZoom(),o=n.length-1;o>=0;o--)t=n[o],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&i<e.options.minZoom||void 0!==e.options.maxZoom&&i>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),Je=Qe.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=re("div",e+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,i,o){var r=re("a",n,i);return r.innerHTML=t,r.href="#",r.title=e,r.setAttribute("role","button"),r.setAttribute("aria-label",e),De(r),Ie(r,"click",Fe),Ie(r,"click",o,this),Ie(r,"click",this._refocusOnMap,this),r},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";de(this._zoomInButton,e),de(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&he(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&he(this._zoomInButton,e)}});Ge.mergeOptions({zoomControl:!0}),Ge.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Je,this.addControl(this.zoomControl))});var $e=Qe.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e=re("div","leaflet-control-scale"),n=this.options;return this._addScales(n,"leaflet-control-scale-line",e),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),e},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=re("div",e,n)),t.imperial&&(this._iScale=re("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,i,o=3.2808399*t;o>5280?(e=o/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(i=this._getRoundNum(o),this._updateScale(this._iScale,i+" ft",i/o))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),tn=Qe.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){f(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=re("div","leaflet-control-attribution"),De(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}});Ge.mergeOptions({attributionControl:!0}),Ge.addInitHook(function(){this.options.attributionControl&&(new tn).addTo(this)}),Qe.Layers=Xe,Qe.Zoom=Je,Qe.Scale=$e,Qe.Attribution=tn,Ye.layers=function(t,e,n){return new Xe(t,e,n)},Ye.zoom=function(t){return new Je(t)},Ye.scale=function(t){return new $e(t)},Ye.attribution=function(t){return new tn(t)};var en=I.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});en.addTo=function(t,e){return t.addHandler(e,this),this};var nn,on={Events:P},rn=Et?"touchstart mousedown":"mousedown",an={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},sn={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},ln=A.extend({options:{clickTolerance:3},initialize:function(t,e,n,i){f(this,i),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(Ie(this._dragStartTarget,rn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ln._dragging===this&&this.finishDrag(),Le(this._dragStartTarget,rn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!ce(this._element,"leaflet-zoom-anim")&&!(ln._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(ln._dragging=this,this._preventOutline&&Se(this._element),we(),Qt(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t,n=xe(this._element);this._startPoint=new O(e.clientX,e.clientY),this._parentScale=Te(n),Ie(document,sn[t.type],this._onMove,this),Ie(document,an[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new O(e.clientX,e.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,Me(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=ye(this._element).subtract(n),he(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),he(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,T(this._animRequest),this._lastEvent=t,this._animRequest=x(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),_e(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in de(document.body,"leaflet-dragging"),this._lastTarget&&(de(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),sn)Le(document,sn[t],this._onMove,this),Le(document,an[t],this._onUp,this);Ee(),Yt(),this._moved&&this._moving&&(T(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,ln._dragging=!1}});function un(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=function(t,e){var n=t.length,i=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(n);i[0]=i[n-1]=1,function t(e,n,i,o,r){var a,s,l,u=0;for(s=o+1;s<=r-1;s++)(l=pn(e[s],e[o],e[r],!0))>u&&(a=s,u=l);u>i&&(n[a]=1,t(e,n,i,o,a),t(e,n,i,a,r))}(t,i,e,0,n-1);var o,r=[];for(o=0;o<n;o++)i[o]&&r.push(t[o]);return r}(t=function(t,e){for(var n=[t[0]],i=1,o=0,r=t.length;i<r;i++)a=t[i],s=t[o],l=void 0,u=void 0,l=s.x-a.x,u=s.y-a.y,l*l+u*u>e&&(n.push(t[i]),o=i);var a,s,l,u;return o<r-1&&n.push(t[r-1]),n}(t,n),n)}function cn(t,e,n){return Math.sqrt(pn(t,e,n,!0))}function hn(t,e,n,i,o){var r,a,s,l=i?nn:fn(t,n),u=fn(e,n);for(nn=u;;){if(!(l|u))return[t,e];if(l&u)return!1;a=dn(t,e,r=l||u,n,o),s=fn(a,n),r===l?(t=a,l=s):(e=a,u=s)}}function dn(t,e,n,i,o){var r,a,s=e.x-t.x,l=e.y-t.y,u=i.min,c=i.max;return 8&n?(r=t.x+s*(c.y-t.y)/l,a=c.y):4&n?(r=t.x+s*(u.y-t.y)/l,a=u.y):2&n?(r=c.x,a=t.y+l*(c.x-t.x)/s):1&n&&(r=u.x,a=t.y+l*(u.x-t.x)/s),new O(r,a,o)}function fn(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function pn(t,e,n,i){var o,r=e.x,a=e.y,s=n.x-r,l=n.y-a,u=s*s+l*l;return u>0&&((o=((t.x-r)*s+(t.y-a)*l)/u)>1?(r=n.x,a=n.y):o>0&&(r+=s*o,a+=l*o)),s=t.x-r,l=t.y-a,i?s*s+l*l:new O(r,a)}function mn(t){return!g(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function vn(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),mn(t)}var gn=(Object.freeze||Object)({simplify:un,pointToSegmentDistance:cn,closestPointOnSegment:function(t,e,n){return pn(t,e,n)},clipSegment:hn,_getEdgeIntersection:dn,_getBitCode:fn,_sqClosestPointOnSegment:pn,isFlat:mn,_flat:vn});function _n(t,e,n){var i,o,r,a,s,l,u,c,h,d=[1,4,2,8];for(o=0,u=t.length;o<u;o++)t[o]._code=fn(t[o],e);for(a=0;a<4;a++){for(c=d[a],i=[],o=0,u=t.length,r=u-1;o<u;r=o++)s=t[o],l=t[r],s._code&c?l._code&c||((h=dn(l,s,c,e,n))._code=fn(h,e),i.push(h)):(l._code&c&&((h=dn(l,s,c,e,n))._code=fn(h,e),i.push(h)),i.push(s));t=i}return t}var yn=(Object.freeze||Object)({clipPolygon:_n}),bn={project:function(t){return new O(t.lng,t.lat)},unproject:function(t){return new B(t.y,t.x)},bounds:new D([-180,-90],[180,90])},wn={R:6378137,R_MINOR:6356752.314245179,bounds:new D([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,i=t.lat*e,o=this.R_MINOR/n,r=Math.sqrt(1-o*o),a=r*Math.sin(i),s=Math.tan(Math.PI/4-i/2)/Math.pow((1-a)/(1+a),r/2);return i=-n*Math.log(Math.max(s,1e-10)),new O(t.lng*e*n,i)},unproject:function(t){for(var e,n=180/Math.PI,i=this.R,o=this.R_MINOR/i,r=Math.sqrt(1-o*o),a=Math.exp(-t.y/i),s=Math.PI/2-2*Math.atan(a),l=0,u=.1;l<15&&Math.abs(u)>1e-7;l++)e=r*Math.sin(s),e=Math.pow((1-e)/(1+e),r/2),u=Math.PI/2-2*Math.atan(a*e)-s,s+=u;return new B(s*n,t.x*n/i)}},En=(Object.freeze||Object)({LonLat:bn,Mercator:wn,SphericalMercator:H}),Sn=n({},V,{code:"EPSG:3395",projection:wn,transformation:function(){var t=.5/(Math.PI*wn.R);return Z(t,.5,-t,.5)}()}),Cn=n({},V,{code:"EPSG:4326",projection:bn,transformation:Z(1/180,1,-1/180,.5)}),xn=n({},W,{projection:bn,transformation:Z(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,i=e.lat-t.lat;return Math.sqrt(n*n+i*i)},infinite:!0});W.Earth=V,W.EPSG3395=Sn,W.EPSG3857=K,W.EPSG900913=G,W.EPSG4326=Cn,W.Simple=xn;var Tn=A.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[a(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[a(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",function(){e.off(n,this)},this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});Ge.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=a(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=a(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&a(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){t=t?g(t)?t:[t]:[];for(var e=0,n=t.length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[a(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=a(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var i in this._zoomBoundLayers){var o=this._zoomBoundLayers[i].options;t=void 0===o.minZoom?t:Math.min(t,o.minZoom),e=void 0===o.maxZoom?e:Math.max(e,o.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var kn=Tn.extend({initialize:function(t,e){var n,i;if(f(this,e),this._layers={},t)for(n=0,i=t.length;n<i;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,i=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,i);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return a(t)}}),In=kn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),kn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),kn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new F;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),Pn=I.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){f(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(i,t),i},_setIconStyles:function(t,e){var n=this.options,i=n[e+"Size"];"number"==typeof i&&(i=[i,i]);var o=R(i),r=R("shadow"===e&&n.shadowAnchor||n.iconAnchor||o&&o.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),r&&(t.style.marginLeft=-r.x+"px",t.style.marginTop=-r.y+"px"),o&&(t.style.width=o.x+"px",t.style.height=o.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return xt&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),Ln=Pn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return Ln.imagePath||(Ln.imagePath=this._detectIconPath()),(this.options.imagePath||Ln.imagePath)+Pn.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=re("div","leaflet-default-icon-path",document.body),e=oe(t,"background-image")||oe(t,"backgroundImage");return document.body.removeChild(t),e=null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),An=en.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new ln(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),he(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&de(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,i=this._marker.options.autoPanSpeed,o=this._marker.options.autoPanPadding,r=ye(e._icon),a=n.getPixelBounds(),s=n.getPixelOrigin(),l=M(a.min._subtract(s).add(o),a.max._subtract(s).subtract(o));if(!l.contains(r)){var u=R((Math.max(l.max.x,r.x)-l.max.x)/(a.max.x-l.max.x)-(Math.min(l.min.x,r.x)-l.min.x)/(a.min.x-l.min.x),(Math.max(l.max.y,r.y)-l.max.y)/(a.max.y-l.max.y)-(Math.min(l.min.y,r.y)-l.min.y)/(a.min.y-l.min.y)).multiplyBy(i);n.panBy(u,{animate:!1}),this._draggable._newPos._add(u),this._draggable._startPos._add(u),_e(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=x(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(T(this._panRequest),this._panRequest=x(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,i=ye(e._icon),o=e._map.layerPointToLatLng(i);n&&_e(n,i),e._latlng=o,t.latlng=o,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){T(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),On=Tn.extend({options:{icon:new Ln,interactive:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",bubblingMouseEvents:!1},initialize:function(t,e){f(this,e),this._latlng=z(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=z(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),i=!1;n!==this._icon&&(this._icon&&this._removeIcon(),i=!0,t.title&&(n.title=t.title),"IMG"===n.tagName&&(n.alt=t.alt||"")),he(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var o=t.icon.createShadow(this._shadow),r=!1;o!==this._shadow&&(this._removeShadow(),r=!0),o&&(he(o,e),o.alt=""),this._shadow=o,t.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),o&&r&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),ae(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ae(this._shadow),this._shadow=null},_setPos:function(t){_e(this._icon,t),this._shadow&&_e(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(he(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),An)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new An(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;me(this._icon,t),this._shadow&&me(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),Nn=Tn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return f(this,t),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),Rn=Nn.extend({options:{fill:!0,radius:10},initialize:function(t,e){f(this,e),this._latlng=z(t),this._radius=this.options.radius},setLatLng:function(t){return this._latlng=z(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Nn.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),i=[t+n,e+n];this._pxBounds=new D(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),Dn=Rn.extend({initialize:function(t,e,i){if("number"==typeof e&&(e=n({},i,{radius:e})),f(this,e),this._latlng=z(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new F(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Nn.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,i=n.options.crs;if(i.distance===V.distance){var o=Math.PI/180,r=this._mRadius/V.R/o,a=n.project([e+r,t]),s=n.project([e-r,t]),l=a.add(s).divideBy(2),u=n.unproject(l).lat,c=Math.acos((Math.cos(r*o)-Math.sin(e*o)*Math.sin(u*o))/(Math.cos(e*o)*Math.cos(u*o)))/o;(isNaN(c)||0===c)&&(c=r/Math.cos(Math.PI/180*e)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(c)?0:l.x-n.project([u,t-c]).x,this._radiusY=l.y-a.y}else{var h=i.unproject(i.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(h).x}this._updateBounds()}}),Mn=Nn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){f(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,i=1/0,o=null,r=pn,a=0,s=this._parts.length;a<s;a++)for(var l=this._parts[a],u=1,c=l.length;u<c;u++){e=l[u-1],n=l[u];var h=r(t,e,n,!0);h<i&&(i=h,o=r(t,e,n))}return o&&(o.distance=Math.sqrt(i)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,o,r,a,s=this._rings[0],l=s.length;if(!l)return null;for(t=0,e=0;t<l-1;t++)e+=s[t].distanceTo(s[t+1])/2;if(0===e)return this._map.layerPointToLatLng(s[0]);for(t=0,i=0;t<l-1;t++)if(o=s[t],r=s[t+1],n=o.distanceTo(r),(i+=n)>e)return a=(i-e)/n,this._map.layerPointToLatLng([r.x-a*(r.x-o.x),r.y-a*(r.y-o.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=z(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new F,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return mn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=mn(t),i=0,o=t.length;i<o;i++)n?(e[i]=z(t[i]),this._bounds.extend(e[i])):e[i]=this._convertLatLngs(t[i]);return e},_project:function(){var t=new D;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t);var e=this._clickTolerance(),n=new O(e,e);this._bounds.isValid()&&t.isValid()&&(t.min._subtract(n),t.max._add(n),this._pxBounds=t)},_projectLatlngs:function(t,e,n){var i,o,r=t[0]instanceof B,a=t.length;if(r){for(o=[],i=0;i<a;i++)o[i]=this._map.latLngToLayerPoint(t[i]),n.extend(o[i]);e.push(o)}else for(i=0;i<a;i++)this._projectLatlngs(t[i],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,n,i,o,r,a,s,l=this._parts;for(e=0,i=0,o=this._rings.length;e<o;e++)for(s=this._rings[e],n=0,r=s.length;n<r-1;n++)(a=hn(s[n],s[n+1],t,n,!0))&&(l[i]=l[i]||[],l[i].push(a[0]),a[1]===s[n+1]&&n!==r-2||(l[i].push(a[1]),i++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,i=t.length;n<i;n++)t[n]=un(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,i,o,r,a,s,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,r=this._parts.length;n<r;n++)for(s=this._parts[n],i=0,a=s.length,o=a-1;i<a;o=i++)if((e||0!==i)&&cn(t,s[o],s[i])<=l)return!0;return!1}});Mn._flat=vn;var Fn=Mn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,o,r,a,s,l,u=this._rings[0],c=u.length;if(!c)return null;for(r=a=s=0,t=0,e=c-1;t<c;e=t++)n=u[t],i=u[e],o=n.y*i.x-i.y*n.x,a+=(n.x+i.x)*o,s+=(n.y+i.y)*o,r+=3*o;return l=0===r?u[0]:[a/r,s/r],this._map.layerPointToLatLng(l)},_convertLatLngs:function(t){var e=Mn.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof B&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){Mn.prototype._setLatLngs.call(this,t),mn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return mn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new O(e,e);if(t=new D(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var i,o=0,r=this._rings.length;o<r;o++)(i=_n(this._rings[o],t,!0)).length&&this._parts.push(i)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,i,o,r,a,s,l,u=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(o=0,s=this._parts.length;o<s;o++)for(e=this._parts[o],r=0,l=e.length,a=l-1;r<l;a=r++)n=e[r],i=e[a],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(u=!u);return u||Mn.prototype._containsPoint.call(this,t,!0)}}),jn=In.extend({initialize:function(t,e){f(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,i,o=g(t)?t:t.features;if(o){for(e=0,n=o.length;e<n;e++)((i=o[e]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var r=this.options;if(r.filter&&!r.filter(t))return this;var a=Bn(t,r);return a?(a.feature=qn(t),a.defaultOptions=a.options,this.resetStyle(a),r.onEachFeature&&r.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return t.options=n({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}});function Bn(t,e){var n,i,o,r,a="Feature"===t.type?t.geometry:t,s=a?a.coordinates:null,l=[],u=e&&e.pointToLayer,c=e&&e.coordsToLatLng||zn;if(!s&&!a)return null;switch(a.type){case"Point":return n=c(s),u?u(t,n):new On(n);case"MultiPoint":for(o=0,r=s.length;o<r;o++)n=c(s[o]),l.push(u?u(t,n):new On(n));return new In(l);case"LineString":case"MultiLineString":return i=Un(s,"LineString"===a.type?0:1,c),new Mn(i,e);case"Polygon":case"MultiPolygon":return i=Un(s,"Polygon"===a.type?1:2,c),new Fn(i,e);case"GeometryCollection":for(o=0,r=a.geometries.length;o<r;o++){var h=Bn({geometry:a.geometries[o],type:"Feature",properties:t.properties},e);h&&l.push(h)}return new In(l);default:throw new Error("Invalid GeoJSON object.")}}function zn(t){return new B(t[1],t[0],t[2])}function Un(t,e,n){for(var i,o=[],r=0,a=t.length;r<a;r++)i=e?Un(t[r],e-1,n):(n||zn)(t[r]),o.push(i);return o}function Wn(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[c(t.lng,e),c(t.lat,e),c(t.alt,e)]:[c(t.lng,e),c(t.lat,e)]}function Vn(t,e,n,i){for(var o=[],r=0,a=t.length;r<a;r++)o.push(e?Vn(t[r],e-1,n,i):Wn(t[r],i));return!e&&n&&o.push(o[0]),o}function Hn(t,e){return t.feature?n({},t.feature,{geometry:e}):qn(e)}function qn(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var Zn={toGeoJSON:function(t){return Hn(this,{type:"Point",coordinates:Wn(this.getLatLng(),t)})}};function Kn(t,e){return new jn(t,e)}On.include(Zn),Dn.include(Zn),Rn.include(Zn),Mn.include({toGeoJSON:function(t){var e=!mn(this._latlngs),n=Vn(this._latlngs,e?1:0,!1,t);return Hn(this,{type:(e?"Multi":"")+"LineString",coordinates:n})}}),Fn.include({toGeoJSON:function(t){var e=!mn(this._latlngs),n=e&&!mn(this._latlngs[0]),i=Vn(this._latlngs,n?2:e?1:0,!0,t);return e||(i=[i]),Hn(this,{type:(n?"Multi":"")+"Polygon",coordinates:i})}}),kn.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(n){e.push(n.toGeoJSON(t).geometry.coordinates)}),Hn(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var n="GeometryCollection"===e,i=[];return this.eachLayer(function(e){if(e.toGeoJSON){var o=e.toGeoJSON(t);if(n)i.push(o.geometry);else{var r=qn(o);"FeatureCollection"===r.type?i.push.apply(i,r.features):i.push(r)}}}),n?Hn(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}});var Gn=Kn,Qn=Tn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=j(e),f(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(he(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ae(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&le(this._image),this},bringToBack:function(){return this._map&&ue(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=j(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:re("img");he(e,"leaflet-image-layer"),this._zoomAnimated&&he(e,"leaflet-zoom-animated"),this.options.className&&he(e,this.options.className),e.onselectstart=u,e.onmousemove=u,e.onload=o(this.fire,this,"load"),e.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;ge(this._image,n,e)},_reset:function(){var t=this._image,e=new D(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();_e(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){me(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),Yn=Qn.extend({options:{autoplay:!0,loop:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:re("video");if(he(e,"leaflet-image-layer"),this._zoomAnimated&&he(e,"leaflet-zoom-animated"),e.onselectstart=u,e.onmousemove=u,e.onloadeddata=o(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),i=[],r=0;r<n.length;r++)i.push(n[r].src);this._url=n.length>0?i:[e.src]}else{g(this._url)||(this._url=[this._url]),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop;for(var a=0;a<this._url.length;a++){var s=re("source");s.src=this._url[a],e.appendChild(s)}}}}),Xn=Tn.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){f(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&me(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&me(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(me(this._container,0),this._removeTimeout=setTimeout(o(ae,void 0,this._container),200)):ae(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=z(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&le(this._container),this},bringToBack:function(){return this._map&&ue(this._container),this},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=R(this.options.offset),n=this._getAnchor();this._zoomAnimated?_e(this._container,t.add(n)):e=e.add(t).add(n);var i=this._containerBottom=-e.y,o=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=i+"px",this._container.style.left=o+"px"}},_getAnchor:function(){return[0,0]}}),Jn=Xn.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){Xn.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Nn||this._source.on("preclick",Ne))},onRemove:function(t){Xn.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Nn||this._source.off("preclick",Ne))},getEvents:function(){var t=Xn.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=re("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=re("div",t+"-content-wrapper",e);if(this._contentNode=re("div",t+"-content",n),De(n),Re(this._contentNode),Ie(n,"contextmenu",Ne),this._tipContainer=re("div",t+"-tip-container",e),this._tip=re("div",t+"-tip",this._tipContainer),this.options.closeButton){var i=this._closeButton=re("a",t+"-close-button",e);i.href="#close",i.innerHTML="&#215;",Ie(i,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var i=t.offsetHeight,o=this.options.maxHeight;o&&i>o?(e.height=o+"px",he(t,"leaflet-popup-scrolled")):de(t,"leaflet-popup-scrolled"),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();_e(this._container,e.add(n))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var t=this._map,e=parseInt(oe(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,i=this._containerWidth,o=new O(this._containerLeft,-n-this._containerBottom);o._add(ye(this._container));var r=t.layerPointToContainerPoint(o),a=R(this.options.autoPanPadding),s=R(this.options.autoPanPaddingTopLeft||a),l=R(this.options.autoPanPaddingBottomRight||a),u=t.getSize(),c=0,h=0;r.x+i+l.x>u.x&&(c=r.x+i-u.x+l.x),r.x-c-s.x<0&&(c=r.x-s.x),r.y+n+l.y>u.y&&(h=r.y+n-u.y+l.y),r.y-h-s.y<0&&(h=r.y-s.y),(c||h)&&t.fire("autopanstart").panBy([c,h])}},_onCloseButtonClick:function(t){this._close(),Fe(t)},_getAnchor:function(){return R(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Ge.mergeOptions({closePopupOnClick:!0}),Ge.include({openPopup:function(t,e,n){return t instanceof Jn||(t=new Jn(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),Tn.include({bindPopup:function(t,e){return t instanceof Jn?(f(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new Jn(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){if(t instanceof Tn||(e=t,t=this),t instanceof In)for(var n in this._layers){t=this._layers[n];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._popup&&this._map&&(this._popup._source=t,this._popup.update(),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(Fe(t),e instanceof Nn?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var $n=Xn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){Xn.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){Xn.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=Xn.prototype.getEvents.call(this);return Et&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=re("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,n=this._container,i=e.latLngToContainerPoint(e.getCenter()),o=e.layerPointToContainerPoint(t),r=this.options.direction,a=n.offsetWidth,s=n.offsetHeight,l=R(this.options.offset),u=this._getAnchor();"top"===r?t=t.add(R(-a/2+l.x,-s+l.y+u.y,!0)):"bottom"===r?t=t.subtract(R(a/2-l.x,-l.y,!0)):"center"===r?t=t.subtract(R(a/2+l.x,s/2-u.y+l.y,!0)):"right"===r||"auto"===r&&o.x<i.x?(r="right",t=t.add(R(l.x+u.x,u.y-s/2+l.y,!0))):(r="left",t=t.subtract(R(a+u.x-l.x,s/2-u.y-l.y,!0))),de(n,"leaflet-tooltip-right"),de(n,"leaflet-tooltip-left"),de(n,"leaflet-tooltip-top"),de(n,"leaflet-tooltip-bottom"),he(n,"leaflet-tooltip-"+r),_e(n,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&me(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return R(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Ge.include({openTooltip:function(t,e,n){return t instanceof $n||(t=new $n(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),Tn.include({bindTooltip:function(t,e){return t instanceof $n?(f(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=new $n(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),Et&&(n.click=this._openTooltip)),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){if(t instanceof Tn||(e=t,t=this),t instanceof In)for(var n in this._layers){t=this._layers[n];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=t,this._tooltip.update(),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(he(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(de(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,n,i=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),i=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(i)}});var ti=Pn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.options;if(e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var i=R(n.bgPos);e.style.backgroundPosition=-i.x+"px "+-i.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});Pn.Default=Ln;var ei=Tn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:gt,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){f(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),ae(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(le(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ue(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=s(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof O?t:new O(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,i=-t(-1/0,1/0),o=0,r=n.length;o<r;o++)e=n[o].style.zIndex,n[o]!==this._container&&e&&(i=t(i,+e));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!$){me(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var i in this._tiles){var o=this._tiles[i];if(o.current&&o.loaded){var r=Math.min(1,(t-o.loaded)/200);me(o.el,r),r<1?e=!0:(o.active?n=!0:this._onOpaqueTile(o),o.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(T(this._fadeFrame),this._fadeFrame=x(this._updateOpacity,this))}},_onOpaqueTile:u,_initContainer:function(){this._container||(this._container=re("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(ae(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var i=this._levels[t],o=this._map;return i||((i=this._levels[t]={}).el=re("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=e,i.origin=o.project(o.unproject(o.getPixelOrigin()),t).round(),i.zoom=t,this._setZoomTransform(i,o.getCenter(),o.getZoom()),i.el.offsetWidth,this._onCreateLevel(i)),this._level=i,i}},_onUpdateLevel:u,_onRemoveLevel:u,_onCreateLevel:u,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var i=e.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)ae(this._levels[t].el),this._onRemoveLevel(t),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,i){var o=Math.floor(t/2),r=Math.floor(e/2),a=n-1,s=new O(+o,+r);s.z=+a;var l=this._tileCoordsToKey(s),u=this._tiles[l];return u&&u.active?(u.retain=!0,!0):(u&&u.loaded&&(u.retain=!0),a>i&&this._retainParent(o,r,a,i))},_retainChildren:function(t,e,n,i){for(var o=2*t;o<2*t+2;o++)for(var r=2*e;r<2*e+2;r++){var a=new O(o,r);a.z=n+1;var s=this._tileCoordsToKey(a),l=this._tiles[s];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<i&&this._retainChildren(o,r,n+1,i))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,i){var o=this._clampZoom(Math.round(e));(void 0!==this.options.maxZoom&&o>this.options.maxZoom||void 0!==this.options.minZoom&&o<this.options.minZoom)&&(o=void 0);var r=this.options.updateWhenZooming&&o!==this._tileZoom;i&&!r||(this._tileZoom=o,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==o&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var i=this._map.getZoomScale(n,t.zoom),o=t.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(e,n)).round();vt?ge(t.el,o,i):_e(t.el,o)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,o=this._map.getPixelWorldBounds(this._tileZoom);o&&(this._globalTileRange=this._pxBoundsToTileRange(o)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],i).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],i).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],i).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),i=e.getZoomScale(n,this._tileZoom),o=e.project(t,this._tileZoom).floor(),r=e.getSize().divideBy(2*i);return new D(o.subtract(r),o.add(r))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var i=this._getTiledPixelBounds(t),o=this._pxBoundsToTileRange(i),r=o.getCenter(),a=[],s=this.options.keepBuffer,l=new D(o.getBottomLeft().subtract([s,-s]),o.getTopRight().add([s,-s]));if(!(isFinite(o.min.x)&&isFinite(o.min.y)&&isFinite(o.max.x)&&isFinite(o.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var u in this._tiles){var c=this._tiles[u].coords;c.z===this._tileZoom&&l.contains(new O(c.x,c.y))||(this._tiles[u].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(t,n);else{for(var h=o.min.y;h<=o.max.y;h++)for(var d=o.min.x;d<=o.max.x;d++){var f=new O(d,h);if(f.z=this._tileZoom,this._isValidTile(f)){var p=this._tiles[this._tileCoordsToKey(f)];p?p.current=!0:a.push(f)}}if(a.sort(function(t,e){return t.distanceTo(r)-e.distanceTo(r)}),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(d=0;d<a.length;d++)this._addTile(a[d],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._tileCoordsToBounds(t);return j(this.options.bounds).overlaps(i)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),i=t.scaleBy(n),o=i.add(n),r=e.unproject(i,t.z),a=e.unproject(o,t.z);return[r,a]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new F(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new O(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(rt||e.el.setAttribute("src",y),ae(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){he(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=u,t.onmousemove=u,$&&this.options.opacity<1&&me(t,this.options.opacity),nt&&!it&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var n=this._getTilePos(t),i=this._tileCoordsToKey(t),r=this.createTile(this._wrapCoords(t),o(this._tileReady,this,t));this._initTile(r),this.createTile.length<2&&x(o(this._tileReady,this,t,null,r)),_e(r,n),this._tiles[i]={el:r,coords:t,current:!0},e.appendChild(r),this.fire("tileloadstart",{tile:r,coords:t})},_tileReady:function(t,e,n){if(this._map&&n.getAttribute("src")!==y){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var i=this._tileCoordsToKey(t);(n=this._tiles[i])&&(n.loaded=+new Date,this._map._fadeAnimated?(me(n.el,0),T(this._fadeFrame),this._fadeFrame=x(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(he(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),$||!this._map._fadeAnimated?x(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))}},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new O(this._wrapX?l(t.x,this._wrapX):t.x,this._wrapY?l(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new D(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),ni=ei.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=f(this,e)).detectRetina&&xt&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),nt||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return Ie(n,"load",o(this._tileOnLoad,this,e,n)),Ie(n,"error",o(this._tileOnError,this,e,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:xt?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=i),e["-y"]=i}return v(this._url,n(e,this.options))},_tileOnLoad:function(t,e){$?setTimeout(o(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var i=this.options.errorTileUrl;i&&e.getAttribute("src")!==i&&(e.src=i),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,n=this.options.zoomReverse,i=this.options.zoomOffset;return n&&(t=e-t),t+i},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=u,e.onerror=u,e.complete||(e.src=y,ae(e),delete this._tiles[t]))}});function ii(t,e){return new ni(t,e)}var oi=ni.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var i=n({},this.defaultWmsParams);for(var o in e)o in this.options||(i[o]=e[o]);var r=(e=f(this,e)).detectRetina&&xt?2:1,a=this.getTileSize();i.width=a.x*r,i.height=a.y*r,this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,ni.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,i=M(n.project(e[0]),n.project(e[1])),o=i.min,r=i.max,a=(this._wmsVersion>=1.3&&this._crs===Cn?[o.y,o.x,r.y,r.x]:[o.x,o.y,r.x,r.y]).join(","),s=ni.prototype.getTileUrl.call(this,t);return s+p(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(t,e){return n(this.wmsParams,t),e||this.redraw(),this}});ni.WMS=oi,ii.wms=function(t,e){return new oi(t,e)};var ri=Tn.extend({options:{padding:.1,tolerance:0},initialize:function(t){f(this,t),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&he(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),i=ye(this._container),o=this._map.getSize().multiplyBy(.5+this.options.padding),r=this._map.project(this._center,e),a=this._map.project(t,e),s=a.subtract(r),l=o.multiplyBy(-n).add(i).add(o).subtract(s);vt?ge(this._container,l,n):_e(this._container,l)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new D(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ai=ri.extend({getEvents:function(){var t=ri.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ri.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Ie(t,"mousemove",s(this._onMouseMove,32,this),this),Ie(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ie(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){T(this._redrawRequest),delete this._ctx,ae(this._container),Le(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},ri.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),i=xt?2:1;_e(e,t.min),e.width=i*n.x,e.height=i*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",xt&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){ri.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[a(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,i=e.prev;n?n.prev=i:this._drawLast=i,i?i.next=n:this._drawFirst=n,delete this._drawnLayers[t._leaflet_id],delete t._order,delete this._layers[a(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){var e,n=t.options.dashArray.split(","),i=[];for(e=0;e<n.length;e++)i.push(Number(n[e]));t.options._dashArray=i}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||x(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new D,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)t=i.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,i,o,r,a=t._parts,s=a.length,l=this._ctx;if(s){for(this._drawnLayers[t._leaflet_id]=t,l.beginPath(),n=0;n<s;n++){for(i=0,o=a[n].length;i<o;i++)r=a[n][i],l[i?"lineTo":"moveTo"](r.x,r.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,i=Math.max(Math.round(t._radius),1),o=(Math.max(Math.round(t._radiusY),1)||i)/i;this._drawnLayers[t._leaflet_id]=t,1!==o&&(n.save(),n.scale(1,o)),n.beginPath(),n.arc(e.x,e.y/o,i,0,2*Math.PI,!1),1!==o&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,i=this._map.mouseEventToLayerPoint(t),o=this._drawFirst;o;o=o.next)(e=o.layer).options.interactive&&e._containsPoint(i)&&!this._map._draggableMoved(e)&&(n=e);n&&(Ve(t),this._fireEvent([n],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(de(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,e){for(var n,i,o=this._drawFirst;o;o=o.next)(n=o.layer).options.interactive&&n._containsPoint(e)&&(i=n);i!==this._hoveredLayer&&(this._handleMouseOut(t),i&&(he(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseover"),this._hoveredLayer=i)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order,n=e.next,i=e.prev;n&&(n.prev=i,i?i.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))},_bringToBack:function(t){var e=t._order,n=e.next,i=e.prev;i&&(i.next=n,n?n.prev=i:i&&(this._drawLast=i),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}});function si(t){return Tt?new ai(t):null}var li=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),ui={_initContainer:function(){this._container=re("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ri.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=li("shape");he(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=li("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;ae(e),t.removeInteractiveTarget(e),delete this._layers[a(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,i=t.options,o=t._container;o.stroked=!!i.stroke,o.filled=!!i.fill,i.stroke?(e||(e=t._stroke=li("stroke")),o.appendChild(e),e.weight=i.weight+"px",e.color=i.color,e.opacity=i.opacity,i.dashArray?e.dashStyle=g(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=i.lineCap.replace("butt","flat"),e.joinstyle=i.lineJoin):e&&(o.removeChild(e),t._stroke=null),i.fill?(n||(n=t._fill=li("fill")),o.appendChild(n),n.color=i.fillColor||i.color,n.opacity=i.fillOpacity):n&&(o.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),i=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+i+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){le(t._container)},_bringToBack:function(t){ue(t._container)}},ci=It?li:Q,hi=ri.extend({getEvents:function(){var t=ri.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=ci("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ci("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ae(this._container),Le(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){ri.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),_e(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=ci("path");t.options.className&&he(e,t.options.className),t.options.interactive&&he(e,"leaflet-interactive"),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){ae(t._path),t.removeInteractiveTarget(t._path),delete this._layers[a(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,Y(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),i=Math.max(Math.round(t._radiusY),1)||n,o="a"+n+","+i+" 0 1,0 ",r=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+o+2*n+",0 "+o+2*-n+",0 ";this._setPath(t,r)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){le(t._path)},_bringToBack:function(t){ue(t._path)}});function di(t){return kt||It?new hi(t):null}It&&hi.include(ui),Ge.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&si(t)||di(t)}});var fi=Fn.extend({initialize:function(t,e){Fn.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=j(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});hi.create=ci,hi.pointsToPath=Y,jn.geometryToLayer=Bn,jn.coordsToLatLng=zn,jn.coordsToLatLngs=Un,jn.latLngToCoords=Wn,jn.latLngsToCoords=Vn,jn.getFeature=Hn,jn.asFeature=qn,Ge.mergeOptions({boxZoom:!0});var pi=en.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Ie(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Le(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ae(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),Qt(),we(),this._startPoint=this._map.mouseEventToContainerPoint(t),Ie(document,{contextmenu:Fe,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=re("div","leaflet-zoom-box",this._container),he(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new D(this._point,this._startPoint),n=e.getSize();_e(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(ae(this._box),de(this._container,"leaflet-crosshair")),Yt(),Ee(),Le(document,{contextmenu:Fe,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var e=new F(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});Ge.addInitHook("addHandler","boxZoom",pi),Ge.mergeOptions({doubleClickZoom:!0});var mi=en.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),i=e.options.zoomDelta,o=t.originalEvent.shiftKey?n-i:n+i;"center"===e.options.doubleClickZoom?e.setZoom(o):e.setZoomAround(t.containerPoint,o)}});Ge.addInitHook("addHandler","doubleClickZoom",mi),Ge.mergeOptions({dragging:!0,inertia:!it,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var vi=en.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new ln(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}he(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){de(this._map._container,"leaflet-grab"),de(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=j(this._map.options.maxBounds);this._offsetLimit=M(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,o=(i-e+n)%t+e-n,r=(i+e+n)%t-e-n,a=Math.abs(o+n)<Math.abs(r+n)?o:r;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(t){var e=this._map,n=e.options,i=!n.inertia||this._times.length<2;if(e.fire("dragend",t),i)e.fire("moveend");else{this._prunePositions(+new Date);var o=this._lastPos.subtract(this._positions[0]),r=(this._lastTime-this._times[0])/1e3,a=n.easeLinearity,s=o.multiplyBy(a/r),l=s.distanceTo([0,0]),u=Math.min(n.inertiaMaxSpeed,l),c=s.multiplyBy(u/l),h=u/(n.inertiaDeceleration*a),d=c.multiplyBy(-h/2).round();d.x||d.y?(d=e._limitOffset(d,e.options.maxBounds),x(function(){e.panBy(d,{duration:h,easeLinearity:a,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}});Ge.addInitHook("addHandler","dragging",vi),Ge.mergeOptions({keyboard:!0,keyboardPanDelta:80});var gi=en.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Ie(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Le(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,i=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(i,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,i=this._panKeys={},o=this.keyCodes;for(e=0,n=o.left.length;e<n;e++)i[o.left[e]]=[-1*t,0];for(e=0,n=o.right.length;e<n;e++)i[o.right[e]]=[t,0];for(e=0,n=o.down.length;e<n;e++)i[o.down[e]]=[0,t];for(e=0,n=o.up.length;e<n;e++)i[o.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,i=this._zoomKeys={},o=this.keyCodes;for(e=0,n=o.zoomIn.length;e<n;e++)i[o.zoomIn[e]]=t;for(e=0,n=o.zoomOut.length;e<n;e++)i[o.zoomOut[e]]=-t},_addHooks:function(){Ie(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Le(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,i=this._map;if(n in this._panKeys)i._panAnim&&i._panAnim._inProgress||(e=this._panKeys[n],t.shiftKey&&(e=R(e).multiplyBy(3)),i.panBy(e),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds));else if(n in this._zoomKeys)i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!i._popup||!i._popup.options.closeOnEscapeKey)return;i.closePopup()}Fe(t)}}});Ge.addInitHook("addHandler","keyboard",gi),Ge.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var _i=en.extend({addHooks:function(){Ie(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Le(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=ze(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var i=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),i),Fe(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var i=this._delta/(4*this._map.options.wheelPxPerZoomLevel),o=4*Math.log(2/(1+Math.exp(-Math.abs(i))))/Math.LN2,r=n?Math.ceil(o/n)*n:o,a=t._limitZoom(e+(this._delta>0?r:-r))-e;this._delta=0,this._startTime=null,a&&("center"===t.options.scrollWheelZoom?t.setZoom(e+a):t.setZoomAround(this._lastMousePos,e+a))}});Ge.addInitHook("addHandler","scrollWheelZoom",_i),Ge.mergeOptions({tap:!0,tapTolerance:15});var yi=en.extend({addHooks:function(){Ie(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Le(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(Me(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new O(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&he(n,"leaflet-active"),this._holdTimeout=setTimeout(o(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),Ie(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),Le(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&de(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new O(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var n=document.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}});Et&&!wt&&Ge.addInitHook("addHandler","tap",yi),Ge.mergeOptions({touchZoom:Et&&!it,bounceAtZoomLimits:!0});var bi=en.extend({addHooks:function(){he(this._map._container,"leaflet-touch-zoom"),Ie(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){de(this._map._container,"leaflet-touch-zoom"),Le(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(i)._divideBy(2))),this._startDist=n.distanceTo(i),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Ie(document,"touchmove",this._onTouchMove,this),Ie(document,"touchend",this._onTouchEnd,this),Me(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]),r=n.distanceTo(i)/this._startDist;if(this._zoom=e.getScaleZoom(r,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&r<1||this._zoom>e.getMaxZoom()&&r>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===r)return}else{var a=n._add(i)._divideBy(2)._subtract(this._centerPoint);if(1===r&&0===a.x&&0===a.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(a),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),T(this._animRequest);var s=o(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=x(s,this,!0),Me(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,T(this._animRequest),Le(document,"touchmove",this._onTouchMove),Le(document,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Ge.addInitHook("addHandler","touchZoom",bi),Ge.BoxZoom=pi,Ge.DoubleClickZoom=mi,Ge.Drag=vi,Ge.Keyboard=gi,Ge.ScrollWheelZoom=_i,Ge.Tap=yi,Ge.TouchZoom=bi,Object.freeze=e,t.version="1.3.3",t.Control=Qe,t.control=Ye,t.Browser=Lt,t.Evented=A,t.Mixin=on,t.Util=k,t.Class=I,t.Handler=en,t.extend=n,t.bind=o,t.stamp=a,t.setOptions=f,t.DomEvent=Ze,t.DomUtil=ke,t.PosAnimation=Ke,t.Draggable=ln,t.LineUtil=gn,t.PolyUtil=yn,t.Point=O,t.point=R,t.Bounds=D,t.bounds=M,t.Transformation=q,t.transformation=Z,t.Projection=En,t.LatLng=B,t.latLng=z,t.LatLngBounds=F,t.latLngBounds=j,t.CRS=W,t.GeoJSON=jn,t.geoJSON=Kn,t.geoJson=Gn,t.Layer=Tn,t.LayerGroup=kn,t.layerGroup=function(t,e){return new kn(t,e)},t.FeatureGroup=In,t.featureGroup=function(t){return new In(t)},t.ImageOverlay=Qn,t.imageOverlay=function(t,e,n){return new Qn(t,e,n)},t.VideoOverlay=Yn,t.videoOverlay=function(t,e,n){return new Yn(t,e,n)},t.DivOverlay=Xn,t.Popup=Jn,t.popup=function(t,e){return new Jn(t,e)},t.Tooltip=$n,t.tooltip=function(t,e){return new $n(t,e)},t.Icon=Pn,t.icon=function(t){return new Pn(t)},t.DivIcon=ti,t.divIcon=function(t){return new ti(t)},t.Marker=On,t.marker=function(t,e){return new On(t,e)},t.TileLayer=ni,t.tileLayer=ii,t.GridLayer=ei,t.gridLayer=function(t){return new ei(t)},t.SVG=hi,t.svg=di,t.Renderer=ri,t.Canvas=ai,t.canvas=si,t.Path=Nn,t.CircleMarker=Rn,t.circleMarker=function(t,e){return new Rn(t,e)},t.Circle=Dn,t.circle=function(t,e,n){return new Dn(t,e,n)},t.Polyline=Mn,t.polyline=function(t,e){return new Mn(t,e)},t.Polygon=Fn,t.polygon=function(t,e){return new Fn(t,e)},t.Rectangle=fi,t.rectangle=function(t,e){return new fi(t,e)},t.Map=Ge,t.map=function(t,e){return new Ge(t,e)};var wi=window.L;t.noConflict=function(){return window.L=wi,this},window.L=t}(e)},function(t,e,n){"use strict";n(7);var i,o=(i=n(0))&&"object"==typeof i&&"default"in i?i.default:i;t.exports=o},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){(function(e){var n;t.exports=function t(e,i,o){function r(s,l){if(!i[s]){if(!e[s]){var u="function"==typeof n&&n;if(!l&&u)return n(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var h=i[s]={exports:{}};e[s][0].call(h.exports,function(t){var n=e[s][1][t];return r(n||t)},h,h.exports,t,e,i,o)}return i[s].exports}for(var a="function"==typeof n&&n,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(t,n,i){(function(t){"use strict";var e,i,o=t.MutationObserver||t.WebKitMutationObserver;if(o){var r=0,a=new o(c),s=t.document.createTextNode("");a.observe(s,{characterData:!0}),e=function(){s.data=r=++r%2}}else if(t.setImmediate||void 0===t.MessageChannel)e="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){c(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(c,0)};else{var l=new t.MessageChannel;l.port1.onmessage=c,e=function(){l.port2.postMessage(0)}}var u=[];function c(){var t,e;i=!0;for(var n=u.length;n;){for(e=u,u=[],t=-1;++t<n;)e[t]();n=u.length}i=!1}n.exports=function(t){1!==u.push(t)||i||e()}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,n){"use strict";var i=t(1);function o(){}var r={},a=["REJECTED"],s=["FULFILLED"],l=["PENDING"];function u(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,t!==o&&f(this,t)}function c(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function h(t,e,n){i(function(){var i;try{i=e(n)}catch(e){return r.reject(t,e)}i===t?r.reject(t,new TypeError("Cannot resolve promise with itself")):r.resolve(t,i)})}function d(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function f(t,e){var n=!1;function i(e){n||(n=!0,r.reject(t,e))}function o(e){n||(n=!0,r.resolve(t,e))}var a=p(function(){e(o,i)});"error"===a.status&&i(a.value)}function p(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}e.exports=u,u.prototype.catch=function(t){return this.then(null,t)},u.prototype.then=function(t,e){if("function"!=typeof t&&this.state===s||"function"!=typeof e&&this.state===a)return this;var n=new this.constructor(o);if(this.state!==l){var i=this.state===s?t:e;h(n,i,this.outcome)}else this.queue.push(new c(n,t,e));return n},c.prototype.callFulfilled=function(t){r.resolve(this.promise,t)},c.prototype.otherCallFulfilled=function(t){h(this.promise,this.onFulfilled,t)},c.prototype.callRejected=function(t){r.reject(this.promise,t)},c.prototype.otherCallRejected=function(t){h(this.promise,this.onRejected,t)},r.resolve=function(t,e){var n=p(d,e);if("error"===n.status)return r.reject(t,n.value);var i=n.value;if(i)f(t,i);else{t.state=s,t.outcome=e;for(var o=-1,a=t.queue.length;++o<a;)t.queue[o].callFulfilled(e)}return t},r.reject=function(t,e){t.state=a,t.outcome=e;for(var n=-1,i=t.queue.length;++n<i;)t.queue[n].callRejected(e);return t},u.resolve=function(t){return t instanceof this?t:r.resolve(new this(o),t)},u.reject=function(t){var e=new this(o);return r.reject(e,t)},u.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,i=!1;if(!n)return this.resolve([]);for(var a=new Array(n),s=0,l=-1,u=new this(o);++l<n;)c(t[l],l);return u;function c(t,o){e.resolve(t).then(function(t){a[o]=t,++s!==n||i||(i=!0,r.resolve(u,a))},function(t){i||(i=!0,r.reject(u,t))})}},u.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,i=!1;if(!n)return this.resolve([]);for(var a,s=-1,l=new this(o);++s<n;)a=t[s],e.resolve(a).then(function(t){i||(i=!0,r.resolve(l,t))},function(t){i||(i=!0,r.reject(l,t))});return l}},{1:1}],3:[function(t,n,i){(function(e){"use strict";"function"!=typeof e.Promise&&(e.Promise=t(2))}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(t){return}}();function r(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(r){if("TypeError"!==r.name)throw r;for(var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,i=new n,o=0;o<t.length;o+=1)i.append(t[o]);return i.getBlob(e.type)}}"undefined"==typeof Promise&&t(3);var a=Promise;function s(t,e){e&&t.then(function(t){e(null,t)},function(t){e(t)})}function l(t,e,n){"function"==typeof e&&t.then(e),"function"==typeof n&&t.catch(n)}function u(t){return"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t)),t}function c(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var h="local-forage-detect-blob-support",d=void 0,f={},p=Object.prototype.toString,m="readonly",v="readwrite";function g(t){return"boolean"==typeof d?a.resolve(d):function(t){return new a(function(e){var n=t.transaction(h,v),i=r([""]);n.objectStore(h).put(i,"key"),n.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},n.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);e(n||!t||parseInt(t[1],10)>=43)}}).catch(function(){return!1})}(t).then(function(t){return d=t})}function _(t){var e=f[t.name],n={};n.promise=new a(function(t,e){n.resolve=t,n.reject=e}),e.deferredOperations.push(n),e.dbReady?e.dbReady=e.dbReady.then(function(){return n.promise}):e.dbReady=n.promise}function y(t){var e=f[t.name],n=e.deferredOperations.pop();if(n)return n.resolve(),n.promise}function b(t,e){var n=f[t.name],i=n.deferredOperations.pop();if(i)return i.reject(e),i.promise}function w(t,e){return new a(function(n,i){if(f[t.name]=f[t.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},t.db){if(!e)return n(t.db);_(t),t.db.close()}var r=[t.name];e&&r.push(t.version);var a=o.open.apply(o,r);e&&(a.onupgradeneeded=function(e){var n=a.result;try{n.createObjectStore(t.storeName),e.oldVersion<=1&&n.createObjectStore(h)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+t.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+t.storeName+'" already exists.')}}),a.onerror=function(t){t.preventDefault(),i(a.error)},a.onsuccess=function(){n(a.result),y(t)}})}function E(t){return w(t,!1)}function S(t){return w(t,!0)}function C(t,e){if(!t.db)return!0;var n=!t.db.objectStoreNames.contains(t.storeName),i=t.version<t.db.version,o=t.version>t.db.version;if(i&&(t.version!==e&&console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),o||n){if(n){var r=t.db.version+1;r>t.version&&(t.version=r)}return!0}return!1}function x(t){var e=function(t){for(var e=t.length,n=new ArrayBuffer(e),i=new Uint8Array(n),o=0;o<e;o++)i[o]=t.charCodeAt(o);return n}(atob(t.data));return r([e],{type:t.type})}function T(t){return t&&t.__local_forage_encoded_blob}function k(t){var e=this,n=e._initReady().then(function(){var t=f[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady});return l(n,t,t),n}function I(t,e,n,i){void 0===i&&(i=1);try{var o=t.db.transaction(t.storeName,e);n(null,o)}catch(o){if(i>0&&(!t.db||"InvalidStateError"===o.name||"NotFoundError"===o.name))return a.resolve().then(function(){if(!t.db||"NotFoundError"===o.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),S(t)}).then(function(){return function(t){_(t);for(var e=f[t.name],n=e.forages,i=0;i<n.length;i++){var o=n[i];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return t.db=null,E(t).then(function(e){return t.db=e,C(t)?S(t):e}).then(function(i){t.db=e.db=i;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=i}).catch(function(e){throw b(t,e),e})}(t).then(function(){I(t,e,n,i-1)})}).catch(n);n(o)}}var P={_driver:"asyncStorage",_initStorage:function(t){var e=this,n={db:null};if(t)for(var i in t)n[i]=t[i];var o=f[n.name];o||(o={forages:[],db:null,dbReady:null,deferredOperations:[]},f[n.name]=o),o.forages.push(e),e._initReady||(e._initReady=e.ready,e.ready=k);var r=[];function s(){return a.resolve()}for(var l=0;l<o.forages.length;l++){var u=o.forages[l];u!==e&&r.push(u._initReady().catch(s))}var c=o.forages.slice(0);return a.all(r).then(function(){return n.db=o.db,E(n)}).then(function(t){return n.db=t,C(n,e._defaultConfig.version)?S(n):t}).then(function(t){n.db=o.db=t,e._dbInfo=n;for(var i=0;i<c.length;i++){var r=c[i];r!==e&&(r._dbInfo.db=n.db,r._dbInfo.version=n.version)}})},_support:function(){try{if(!o)return!1;var t="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!t||e)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(t){return!1}}(),iterate:function(t,e){var n=this,i=new a(function(e,i){n.ready().then(function(){I(n._dbInfo,m,function(o,r){if(o)return i(o);try{var a=r.objectStore(n._dbInfo.storeName),s=a.openCursor(),l=1;s.onsuccess=function(){var n=s.result;if(n){var i=n.value;T(i)&&(i=x(i));var o=t(i,n.key,l++);void 0!==o?e(o):n.continue()}else e()},s.onerror=function(){i(s.error)}}catch(t){i(t)}})}).catch(i)});return s(i,e),i},getItem:function(t,e){var n=this;t=u(t);var i=new a(function(e,i){n.ready().then(function(){I(n._dbInfo,m,function(o,r){if(o)return i(o);try{var a=r.objectStore(n._dbInfo.storeName),s=a.get(t);s.onsuccess=function(){var t=s.result;void 0===t&&(t=null),T(t)&&(t=x(t)),e(t)},s.onerror=function(){i(s.error)}}catch(t){i(t)}})}).catch(i)});return s(i,e),i},setItem:function(t,e,n){var i=this;t=u(t);var o=new a(function(n,o){var r;i.ready().then(function(){return r=i._dbInfo,"[object Blob]"===p.call(e)?g(r.db).then(function(t){return t?e:(n=e,new a(function(t,e){var i=new FileReader;i.onerror=e,i.onloadend=function(e){var i=btoa(e.target.result||"");t({__local_forage_encoded_blob:!0,data:i,type:n.type})},i.readAsBinaryString(n)}));var n}):e}).then(function(e){I(i._dbInfo,v,function(r,a){if(r)return o(r);try{var s=a.objectStore(i._dbInfo.storeName);null===e&&(e=void 0);var l=s.put(e,t);a.oncomplete=function(){void 0===e&&(e=null),n(e)},a.onabort=a.onerror=function(){var t=l.error?l.error:l.transaction.error;o(t)}}catch(t){o(t)}})}).catch(o)});return s(o,n),o},removeItem:function(t,e){var n=this;t=u(t);var i=new a(function(e,i){n.ready().then(function(){I(n._dbInfo,v,function(o,r){if(o)return i(o);try{var a=r.objectStore(n._dbInfo.storeName),s=a.delete(t);r.oncomplete=function(){e()},r.onerror=function(){i(s.error)},r.onabort=function(){var t=s.error?s.error:s.transaction.error;i(t)}}catch(t){i(t)}})}).catch(i)});return s(i,e),i},clear:function(t){var e=this,n=new a(function(t,n){e.ready().then(function(){I(e._dbInfo,v,function(i,o){if(i)return n(i);try{var r=o.objectStore(e._dbInfo.storeName),a=r.clear();o.oncomplete=function(){t()},o.onabort=o.onerror=function(){var t=a.error?a.error:a.transaction.error;n(t)}}catch(t){n(t)}})}).catch(n)});return s(n,t),n},length:function(t){var e=this,n=new a(function(t,n){e.ready().then(function(){I(e._dbInfo,m,function(i,o){if(i)return n(i);try{var r=o.objectStore(e._dbInfo.storeName),a=r.count();a.onsuccess=function(){t(a.result)},a.onerror=function(){n(a.error)}}catch(t){n(t)}})}).catch(n)});return s(n,t),n},key:function(t,e){var n=this,i=new a(function(e,i){t<0?e(null):n.ready().then(function(){I(n._dbInfo,m,function(o,r){if(o)return i(o);try{var a=r.objectStore(n._dbInfo.storeName),s=!1,l=a.openCursor();l.onsuccess=function(){var n=l.result;n?0===t?e(n.key):s?e(n.key):(s=!0,n.advance(t)):e(null)},l.onerror=function(){i(l.error)}}catch(t){i(t)}})}).catch(i)});return s(i,e),i},keys:function(t){var e=this,n=new a(function(t,n){e.ready().then(function(){I(e._dbInfo,m,function(i,o){if(i)return n(i);try{var r=o.objectStore(e._dbInfo.storeName),a=r.openCursor(),s=[];a.onsuccess=function(){var e=a.result;e?(s.push(e.key),e.continue()):t(s)},a.onerror=function(){n(a.error)}}catch(t){n(t)}})}).catch(n)});return s(n,t),n},dropInstance:function(t,e){e=c.apply(this,arguments);var n,i=this.config();if((t="function"!=typeof t&&t||{}).name||(t.name=t.name||i.name,t.storeName=t.storeName||i.storeName),t.name){var r=t.name===i.name&&this._dbInfo.db,l=r?a.resolve(this._dbInfo.db):E(t).then(function(e){var n=f[t.name],i=n.forages;n.db=e;for(var o=0;o<i.length;o++)i[o]._dbInfo.db=e;return e});n=t.storeName?l.then(function(e){if(e.objectStoreNames.contains(t.storeName)){var n=e.version+1;_(t);var i=f[t.name],r=i.forages;e.close();for(var s=0;s<r.length;s++){var l=r[s];l._dbInfo.db=null,l._dbInfo.version=n}var u=new a(function(e,i){var r=o.open(t.name,n);r.onerror=function(t){var e=r.result;e.close(),i(t)},r.onupgradeneeded=function(){var e=r.result;e.deleteObjectStore(t.storeName)},r.onsuccess=function(){var t=r.result;t.close(),e(t)}});return u.then(function(t){i.db=t;for(var e=0;e<r.length;e++){var n=r[e];n._dbInfo.db=t,y(n._dbInfo)}}).catch(function(e){throw(b(t,e)||a.resolve()).catch(function(){}),e})}}):l.then(function(e){_(t);var n=f[t.name],i=n.forages;e.close();for(var r=0;r<i.length;r++){var s=i[r];s._dbInfo.db=null}var l=new a(function(e,n){var i=o.deleteDatabase(t.name);i.onerror=i.onblocked=function(t){var e=i.result;e&&e.close(),n(t)},i.onsuccess=function(){var t=i.result;t&&t.close(),e(t)}});return l.then(function(t){n.db=t;for(var e=0;e<i.length;e++){var o=i[e];y(o._dbInfo)}}).catch(function(e){throw(b(t,e)||a.resolve()).catch(function(){}),e})})}else n=a.reject("Invalid arguments");return s(n,e),n}},L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A="~~local_forage_type~",O=/^~~local_forage_type~([^~]+)~/,N="__lfsc__:",R=N.length,D="arbf",M="blob",F="si08",j="ui08",B="uic8",z="si16",U="si32",W="ur16",V="ui32",H="fl32",q="fl64",Z=R+D.length,K=Object.prototype.toString;function G(t){var e,n,i,o,r,a=.75*t.length,s=t.length,l=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var u=new ArrayBuffer(a),c=new Uint8Array(u);for(e=0;e<s;e+=4)n=L.indexOf(t[e]),i=L.indexOf(t[e+1]),o=L.indexOf(t[e+2]),r=L.indexOf(t[e+3]),c[l++]=n<<2|i>>4,c[l++]=(15&i)<<4|o>>2,c[l++]=(3&o)<<6|63&r;return u}function Q(t){var e,n=new Uint8Array(t),i="";for(e=0;e<n.length;e+=3)i+=L[n[e]>>2],i+=L[(3&n[e])<<4|n[e+1]>>4],i+=L[(15&n[e+1])<<2|n[e+2]>>6],i+=L[63&n[e+2]];return n.length%3==2?i=i.substring(0,i.length-1)+"=":n.length%3==1&&(i=i.substring(0,i.length-2)+"=="),i}var Y={serialize:function(t,e){var n="";if(t&&(n=K.call(t)),t&&("[object ArrayBuffer]"===n||t.buffer&&"[object ArrayBuffer]"===K.call(t.buffer))){var i,o=N;t instanceof ArrayBuffer?(i=t,o+=D):(i=t.buffer,"[object Int8Array]"===n?o+=F:"[object Uint8Array]"===n?o+=j:"[object Uint8ClampedArray]"===n?o+=B:"[object Int16Array]"===n?o+=z:"[object Uint16Array]"===n?o+=W:"[object Int32Array]"===n?o+=U:"[object Uint32Array]"===n?o+=V:"[object Float32Array]"===n?o+=H:"[object Float64Array]"===n?o+=q:e(new Error("Failed to get type for BinaryArray"))),e(o+Q(i))}else if("[object Blob]"===n){var r=new FileReader;r.onload=function(){var n=A+t.type+"~"+Q(this.result);e(N+M+n)},r.readAsArrayBuffer(t)}else try{e(JSON.stringify(t))}catch(n){console.error("Couldn't convert value into a JSON string: ",t),e(null,n)}},deserialize:function(t){if(t.substring(0,R)!==N)return JSON.parse(t);var e,n=t.substring(Z),i=t.substring(R,Z);if(i===M&&O.test(n)){var o=n.match(O);e=o[1],n=n.substring(o[0].length)}var a=G(n);switch(i){case D:return a;case M:return r([a],{type:e});case F:return new Int8Array(a);case j:return new Uint8Array(a);case B:return new Uint8ClampedArray(a);case z:return new Int16Array(a);case W:return new Uint16Array(a);case U:return new Int32Array(a);case V:return new Uint32Array(a);case H:return new Float32Array(a);case q:return new Float64Array(a);default:throw new Error("Unkown type: "+i)}},stringToBuffer:G,bufferToString:Q};function X(t,e,n,i){t.executeSql("CREATE TABLE IF NOT EXISTS "+e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,i)}function J(t,e,n,i,o,r){t.executeSql(n,i,o,function(t,a){a.code===a.SYNTAX_ERR?t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[e.storeName],function(t,s){s.rows.length?r(t,a):X(t,e,function(){t.executeSql(n,i,o,r)},r)},r):r(t,a)},r)}var $={_driver:"webSQLStorage",_initStorage:function(t){var e=this,n={db:null};if(t)for(var i in t)n[i]="string"!=typeof t[i]?t[i].toString():t[i];var o=new a(function(t,i){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(t){return i(t)}n.db.transaction(function(o){X(o,n,function(){e._dbInfo=n,t()},function(t,e){i(e)})},i)});return n.serializer=Y,o},_support:"function"==typeof openDatabase,iterate:function(t,e){var n=this,i=new a(function(e,i){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){J(n,o,"SELECT * FROM "+o.storeName,[],function(n,i){for(var r=i.rows,a=r.length,s=0;s<a;s++){var l=r.item(s),u=l.value;if(u&&(u=o.serializer.deserialize(u)),void 0!==(u=t(u,l.key,s+1)))return void e(u)}e()},function(t,e){i(e)})})}).catch(i)});return s(i,e),i},getItem:function(t,e){var n=this;t=u(t);var i=new a(function(e,i){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){J(n,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[t],function(t,n){var i=n.rows.length?n.rows.item(0).value:null;i&&(i=o.serializer.deserialize(i)),e(i)},function(t,e){i(e)})})}).catch(i)});return s(i,e),i},setItem:function(t,e,n){return function t(e,n,i,o){var r=this;e=u(e);var l=new a(function(a,s){r.ready().then(function(){void 0===n&&(n=null);var l=n,u=r._dbInfo;u.serializer.serialize(n,function(n,c){c?s(c):u.db.transaction(function(t){J(t,u,"INSERT OR REPLACE INTO "+u.storeName+" (key, value) VALUES (?, ?)",[e,n],function(){a(l)},function(t,e){s(e)})},function(n){if(n.code===n.QUOTA_ERR){if(o>0)return void a(t.apply(r,[e,l,i,o-1]));s(n)}})})}).catch(s)});return s(l,i),l}.apply(this,[t,e,n,1])},removeItem:function(t,e){var n=this;t=u(t);var i=new a(function(e,i){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){J(n,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[t],function(){e()},function(t,e){i(e)})})}).catch(i)});return s(i,e),i},clear:function(t){var e=this,n=new a(function(t,n){e.ready().then(function(){var i=e._dbInfo;i.db.transaction(function(e){J(e,i,"DELETE FROM "+i.storeName,[],function(){t()},function(t,e){n(e)})})}).catch(n)});return s(n,t),n},length:function(t){var e=this,n=new a(function(t,n){e.ready().then(function(){var i=e._dbInfo;i.db.transaction(function(e){J(e,i,"SELECT COUNT(key) as c FROM "+i.storeName,[],function(e,n){var i=n.rows.item(0).c;t(i)},function(t,e){n(e)})})}).catch(n)});return s(n,t),n},key:function(t,e){var n=this,i=new a(function(e,i){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){J(n,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[t+1],function(t,n){var i=n.rows.length?n.rows.item(0).key:null;e(i)},function(t,e){i(e)})})}).catch(i)});return s(i,e),i},keys:function(t){var e=this,n=new a(function(t,n){e.ready().then(function(){var i=e._dbInfo;i.db.transaction(function(e){J(e,i,"SELECT key FROM "+i.storeName,[],function(e,n){for(var i=[],o=0;o<n.rows.length;o++)i.push(n.rows.item(o).key);t(i)},function(t,e){n(e)})})}).catch(n)});return s(n,t),n},dropInstance:function(t,e){e=c.apply(this,arguments);var n=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var i,o=this;return s(i=t.name?new a(function(e){var i;i=t.name===n.name?o._dbInfo.db:openDatabase(t.name,"","",0),t.storeName?e({db:i,storeNames:[t.storeName]}):e(function(t){return new a(function(e,n){t.transaction(function(i){i.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(n,i){for(var o=[],r=0;r<i.rows.length;r++)o.push(i.rows.item(r).name);e({db:t,storeNames:o})},function(t,e){n(e)})},function(t){n(t)})})}(i))}).then(function(t){return new a(function(e,n){t.db.transaction(function(i){function o(t){return new a(function(e,n){i.executeSql("DROP TABLE IF EXISTS "+t,[],function(){e()},function(t,e){n(e)})})}for(var r=[],s=0,l=t.storeNames.length;s<l;s++)r.push(o(t.storeNames[s]));a.all(r).then(function(){e()}).catch(function(t){n(t)})},function(t){n(t)})})}):a.reject("Invalid arguments"),e),i}};function tt(t,e){var n=t.name+"/";return t.storeName!==e.storeName&&(n+=t.storeName+"/"),n}function et(){return!function(){try{return localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1}catch(t){return!0}}()||localStorage.length>0}var nt={_driver:"localStorageWrapper",_initStorage:function(t){var e={};if(t)for(var n in t)e[n]=t[n];return e.keyPrefix=tt(t,this._defaultConfig),et()?(this._dbInfo=e,e.serializer=Y,a.resolve()):a.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}(),iterate:function(t,e){var n=this,i=n.ready().then(function(){for(var e=n._dbInfo,i=e.keyPrefix,o=i.length,r=localStorage.length,a=1,s=0;s<r;s++){var l=localStorage.key(s);if(0===l.indexOf(i)){var u=localStorage.getItem(l);if(u&&(u=e.serializer.deserialize(u)),void 0!==(u=t(u,l.substring(o),a++)))return u}}});return s(i,e),i},getItem:function(t,e){var n=this;t=u(t);var i=n.ready().then(function(){var e=n._dbInfo,i=localStorage.getItem(e.keyPrefix+t);return i&&(i=e.serializer.deserialize(i)),i});return s(i,e),i},setItem:function(t,e,n){var i=this;t=u(t);var o=i.ready().then(function(){void 0===e&&(e=null);var n=e;return new a(function(o,r){var a=i._dbInfo;a.serializer.serialize(e,function(e,i){if(i)r(i);else try{localStorage.setItem(a.keyPrefix+t,e),o(n)}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||r(t),r(t)}})})});return s(o,n),o},removeItem:function(t,e){var n=this;t=u(t);var i=n.ready().then(function(){var e=n._dbInfo;localStorage.removeItem(e.keyPrefix+t)});return s(i,e),i},clear:function(t){var e=this,n=e.ready().then(function(){for(var t=e._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var i=localStorage.key(n);0===i.indexOf(t)&&localStorage.removeItem(i)}});return s(n,t),n},length:function(t){var e=this.keys().then(function(t){return t.length});return s(e,t),e},key:function(t,e){var n=this,i=n.ready().then(function(){var e,i=n._dbInfo;try{e=localStorage.key(t)}catch(t){e=null}return e&&(e=e.substring(i.keyPrefix.length)),e});return s(i,e),i},keys:function(t){var e=this,n=e.ready().then(function(){for(var t=e._dbInfo,n=localStorage.length,i=[],o=0;o<n;o++){var r=localStorage.key(o);0===r.indexOf(t.keyPrefix)&&i.push(r.substring(t.keyPrefix.length))}return i});return s(n,t),n},dropInstance:function(t,e){if(e=c.apply(this,arguments),!(t="function"!=typeof t&&t||{}).name){var n=this.config();t.name=t.name||n.name,t.storeName=t.storeName||n.storeName}var i,o=this;return s(i=t.name?new a(function(e){t.storeName?e(tt(t,o._defaultConfig)):e(t.name+"/")}).then(function(t){for(var e=localStorage.length-1;e>=0;e--){var n=localStorage.key(e);0===n.indexOf(t)&&localStorage.removeItem(n)}}):a.reject("Invalid arguments"),e),i}},it=function(t,e){for(var n=t.length,i=0;i<n;){if((o=t[i])===(r=e)||"number"==typeof o&&"number"==typeof r&&isNaN(o)&&isNaN(r))return!0;i++}var o,r;return!1},ot=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},rt={},at={},st={INDEXEDDB:P,WEBSQL:$,LOCALSTORAGE:nt},lt=[st.INDEXEDDB._driver,st.WEBSQL._driver,st.LOCALSTORAGE._driver],ut=["dropInstance"],ct=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ut),ht={description:"",driver:lt.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function dt(t,e){t[e]=function(){var n=arguments;return t.ready().then(function(){return t[e].apply(t,n)})}}function ft(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var n in e)e.hasOwnProperty(n)&&(ot(e[n])?arguments[0][n]=e[n].slice():arguments[0][n]=e[n])}return arguments[0]}var pt=function(){function t(e){for(var n in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),st)if(st.hasOwnProperty(n)){var i=st[n],o=i._driver;this[n]=o,rt[o]||this.defineDriver(i)}this._defaultConfig=ft({},ht),this._config=ft({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return t.prototype.config=function(t){if("object"===(void 0===t?"undefined":i(t))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t){if("storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),"version"===e&&"number"!=typeof t[e])return new Error("Database version must be a number.");this._config[e]=t[e]}return!("driver"in t&&t.driver)||this.setDriver(this._config.driver)}return"string"==typeof t?this._config[t]:this._config},t.prototype.defineDriver=function(t,e,n){var i=new a(function(e,n){try{var i=t._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver)return void n(o);for(var r=ct.concat("_initStorage"),l=0,u=r.length;l<u;l++){var c=r[l],h=!it(ut,c);if((h||t[c])&&"function"!=typeof t[c])return void n(o)}!function(){for(var e=function(t){return function(){var e=new Error("Method "+t+" is not implemented by the current driver"),n=a.reject(e);return s(n,arguments[arguments.length-1]),n}},n=0,i=ut.length;n<i;n++){var o=ut[n];t[o]||(t[o]=e(o))}}();var d=function(n){rt[i]&&console.info("Redefining LocalForage driver: "+i),rt[i]=t,at[i]=n,e()};"_support"in t?t._support&&"function"==typeof t._support?t._support().then(d,n):d(!!t._support):d(!0)}catch(t){n(t)}});return l(i,e,n),i},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(t,e,n){var i=rt[t]?a.resolve(rt[t]):a.reject(new Error("Driver not found."));return l(i,e,n),i},t.prototype.getSerializer=function(t){var e=a.resolve(Y);return l(e,t),e},t.prototype.ready=function(t){var e=this,n=e._driverSet.then(function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready});return l(n,t,t),n},t.prototype.setDriver=function(t,e,n){var i=this;ot(t)||(t=[t]);var o=this._getSupportedDrivers(t);function r(){i._config.driver=i.driver()}function s(t){return i._extend(t),r(),i._ready=i._initStorage(i._config),i._ready}var u=null!==this._driverSet?this._driverSet.catch(function(){return a.resolve()}):a.resolve();return this._driverSet=u.then(function(){var t=o[0];return i._dbInfo=null,i._ready=null,i.getDriver(t).then(function(t){i._driver=t._driver,r(),i._wrapLibraryMethodsWithReady(),i._initDriver=function(t){return function(){var e=0;return function n(){for(;e<t.length;){var o=t[e];return e++,i._dbInfo=null,i._ready=null,i.getDriver(o).then(s).catch(n)}r();var l=new Error("No available storage method found.");return i._driverSet=a.reject(l),i._driverSet}()}}(o)})}).catch(function(){r();var t=new Error("No available storage method found.");return i._driverSet=a.reject(t),i._driverSet}),l(this._driverSet,e,n),this._driverSet},t.prototype.supports=function(t){return!!at[t]},t.prototype._extend=function(t){ft(this,t)},t.prototype._getSupportedDrivers=function(t){for(var e=[],n=0,i=t.length;n<i;n++){var o=t[n];this.supports(o)&&e.push(o)}return e},t.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,e=ct.length;t<e;t++)dt(this,ct[t])},t.prototype.createInstance=function(e){return new t(e)},t}(),mt=new pt;e.exports=mt},{3:3}]},{},[4])(4)}).call(this,n(3))},function(t,e){var n,i,o=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===r||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:r}catch(t){n=r}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var l,u=[],c=!1,h=-1;function d(){c&&l&&(c=!1,l.length?u=l.concat(u):h=-1,u.length&&f())}function f(){if(!c){var t=s(d);c=!0;for(var e=u.length;e;){for(l=u,u=[];++h<e;)l&&l[h].run();h=-1,e=u.length}l=null,c=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function m(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new p(t,e)),1!==u.length||c||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(11),o={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},r=function(t,e){if(!t)throw a(e)},a=function(t){return new Error("Firebase Database ("+o.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,i=0;i<t.length;i++){var o=t.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):55296==(64512&o)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(o=65536+((1023&o)<<10)+(1023&t.charCodeAt(++i)),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},l={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[],o=0;o<t.length;o+=3){var r=t[o],a=o+1<t.length,s=a?t[o+1]:0,l=o+2<t.length,u=l?t[o+2]:0,c=r>>2,h=(3&r)<<4|s>>4,d=(15&s)<<2|u>>6,f=63&u;l||(f=64,a||(d=64)),i.push(n[c],n[h],n[d],n[f])}return i.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,i=0;n<t.length;){var o=t[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){var r=t[n++];e[i++]=String.fromCharCode((31&o)<<6|63&r)}else if(o>239&&o<365){var a=((7&o)<<18|(63&(r=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(a>>10)),e[i++]=String.fromCharCode(56320+(1023&a))}else{r=t[n++];var s=t[n++];e[i++]=String.fromCharCode((15&o)<<12|(63&r)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[],o=0;o<t.length;){var r=n[t.charAt(o++)],a=o<t.length?n[t.charAt(o)]:0,s=++o<t.length?n[t.charAt(o)]:64,l=++o<t.length?n[t.charAt(o)]:64;if(++o,null==r||null==a||null==s||null==l)throw Error();var u=r<<2|a>>4;if(i.push(u),64!=s){var c=a<<4&240|s>>2;if(i.push(c),64!=l){var h=s<<6&192|l;i.push(h)}}}return i},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){try{return l.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function c(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=c(t[n],e[n]));return t}var h=function(){function t(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,i){n?e.reject(n):e.resolve(i),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,i))}},t}(),d=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""},f="FirebaseError",p=Error.captureStackTrace;var m=function(){return function(t,e){if(this.code=t,this.message=e,p)p(this,v.prototype.create);else try{throw Error.apply(this,arguments)}catch(t){this.name=f,Object.defineProperty(this,"stack",{get:function(){return t.stack}})}}}();m.prototype=Object.create(Error.prototype),m.prototype.constructor=m,m.prototype.name=f;var v=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return t.prototype.create=function(t,e){void 0===e&&(e={});var n,i=this.errors[t],o=this.service+"/"+t;n=void 0===i?"Error":i.replace(this.pattern,function(t,n){var i=e[n];return void 0!==i?i.toString():"<"+n+"?>"}),n=this.serviceName+": "+n+" ("+o+").";var r=new m(o,n);for(var a in e)e.hasOwnProperty(a)&&"_"!==a.slice(-1)&&(r[a]=e[a]);return r},t}();function g(t){return JSON.parse(t)}var _=function(t){var e={},n={},i={},o="";try{var r=t.split(".");e=g(u(r[0])||""),n=g(u(r[1])||""),o=r[2],i=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:i,signature:o}},y=function(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])},b=function(t,e){return y(e,function(e,n){t[e]=n}),t},w=function(t,e,n){for(var i in t)if(e.call(n,t[i],i,t))return i},E=function(t){function e(){var e=t.call(this)||this;e.chain_=[],e.buf_=[],e.W_=[],e.pad_=[],e.inbuf_=0,e.total_=0,e.blockSize=64,e.pad_[0]=128;for(var n=1;n<e.blockSize;++n)e.pad_[n]=0;return e.reset(),e}return i.__extends(e,t),e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var i=0;i<16;i++)n[i]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(i=0;i<16;i++)n[i]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(i=16;i<80;i++){var o=n[i-3]^n[i-8]^n[i-14]^n[i-16];n[i]=4294967295&(o<<1|o>>>31)}var r,a,s=this.chain_[0],l=this.chain_[1],u=this.chain_[2],c=this.chain_[3],h=this.chain_[4];for(i=0;i<80;i++){i<40?i<20?(r=c^l&(u^c),a=1518500249):(r=l^u^c,a=1859775393):i<60?(r=l&u|c&(l|u),a=2400959708):(r=l^u^c,a=3395469782);o=(s<<5|s>>>27)+r+h+a+n[i]&4294967295;h=c,c=u,u=4294967295&(l<<30|l>>>2),l=s,s=o}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,i=0,o=this.buf_,r=this.inbuf_;i<e;){if(0==r)for(;i<=n;)this.compress_(t,i),i+=this.blockSize;if("string"==typeof t){for(;i<e;)if(o[r]=t.charCodeAt(i),++i,++r==this.blockSize){this.compress_(o),r=0;break}}else for(;i<e;)if(o[r]=t[i],++i,++r==this.blockSize){this.compress_(o),r=0;break}}this.inbuf_=r,this.total_+=e}},e.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var i=0;for(n=0;n<5;n++)for(var o=24;o>=0;o-=8)t[i]=this.chain_[n]>>o&255,++i;return t},e}(function(){return function(){this.blockSize=-1}}());var S=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var i,o=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(i=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,i=e;n<i.length;n++){var o=i[n];if(o in t&&"function"==typeof t[o])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(i.next=C),void 0===i.error&&(i.error=C),void 0===i.complete&&(i.complete=C);var r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{o.finalError?i.error(o.finalError):i.complete()}catch(t){}}),this.observers.push(i),r},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function C(){}function x(t,e,n){var i="";switch(e){case 1:i=n?"first":"First";break;case 2:i=n?"second":"Second";break;case 3:i=n?"third":"Third";break;case 4:i=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var o=t+" failed: ";return o+=i+" argument "}e.assert=r,e.assertionError=a,e.base64=l,e.base64Decode=u,e.base64Encode=function(t){var e=s(t);return l.encodeByteArray(e,!0)},e.CONSTANTS=o,e.deepCopy=function(t){return c(void 0,t)},e.deepExtend=c,e.patchProperty=function(t,e,n){t[e]=n},e.Deferred=h,e.getUA=d,e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())},e.isNodeSdk=function(){return!0===o.NODE_CLIENT||!0===o.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.ErrorFactory=v,e.FirebaseError=m,e.patchCapture=function(t){var e=p;return p=t,e},e.jsonEval=g,e.stringify=function(t){return JSON.stringify(t)},e.decode=_,e.isAdmin=function(t){var e=_(t).claims;return"object"==typeof e&&!0===e.admin},e.issuedAtTime=function(t){var e=_(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.isValidFormat=function(t){var e=_(t),n=e.claims;return!!e.signature&&!!n&&"object"==typeof n&&n.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e,n,i=_(t).claims,o=Math.floor((new Date).getTime()/1e3);return"object"==typeof i&&(i.hasOwnProperty("nbf")?e=i.nbf:i.hasOwnProperty("iat")&&(e=i.iat),n=i.hasOwnProperty("exp")?i.exp:e+86400),o&&e&&n&&o>=e&&o<=n},e.clone=function(t){return b({},t)},e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.every=function(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&!e(n,t[n]))return!1;return!0},e.extend=b,e.findKey=w,e.findValue=function(t,e,n){var i=w(t,e,n);return i&&t[i]},e.forEach=y,e.getAnyKey=function(t){for(var e in t)return e},e.getCount=function(t){var e=0;for(var n in t)e++;return e},e.getValues=function(t){var e=[],n=0;for(var i in t)e[n++]=t[i];return e},e.isEmpty=function(t){for(var e in t)return!1;return!0},e.isNonNullObject=function(t){return"object"==typeof t&&null!==t},e.map=function(t,e,n){var i={};for(var o in t)i[o]=e.call(n,t[o],o,t);return i},e.safeGet=function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]},e.querystring=function(t){var e=[];return y(t,function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}),e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach(function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}}),e},e.Sha1=E,e.async=function(t,e){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];Promise.resolve(!0).then(function(){t.apply(void 0,n)}).catch(function(t){e&&e(t)})}},e.createSubscribe=function(t,e){var n=new S(t,e);return n.subscribe.bind(n)},e.errorPrefix=x,e.validateArgCount=function(t,e,n,i){var o;if(i<e?o="at least "+e:i>n&&(o=0===n?"none":"no more than "+n),o)throw new Error(t+" failed: Was called with "+i+(1===i?" argument.":" arguments.")+" Expects "+o+".")},e.validateCallback=function(t,e,n,i){if((!i||n)&&"function"!=typeof n)throw new Error(x(t,e,i)+"must be a valid function.")},e.validateContextObject=function(t,e,n,i){if((!i||n)&&("object"!=typeof n||null===n))throw new Error(x(t,e,i)+"must be a valid context object.")},e.validateNamespace=function(t,e,n,i){if((!i||n)&&"string"!=typeof n)throw new Error(x(t,e,i)+"must be a valid firebase namespace.")},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],n=0,i=0;i<t.length;i++){var o=t.charCodeAt(i);if(o>=55296&&o<=56319){var a=o-55296;r(++i<t.length,"Surrogate pair missing trail surrogate."),o=65536+(a<<10)+(t.charCodeAt(i)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e}},function(t,e,n){"use strict";n.r(e),function(t,e){n(10);var i=setTimeout;function o(){}function r(t){if(!(this instanceof r))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(t,this)}function a(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,r._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var i;try{i=n(t._value)}catch(t){return void l(e.promise,t)}s(e.promise,i)}else(1===t._state?s:l)(e.promise,t._value)})):t._deferreds.push(e)}function s(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof r)return t._state=3,t._value=e,void u(t);if("function"==typeof n)return void h((i=n,o=e,function(){i.apply(o,arguments)}),t)}t._state=1,t._value=e,u(t)}catch(e){l(t,e)}var i,o}function l(t,e){t._state=2,t._value=e,u(t)}function u(t){2===t._state&&0===t._deferreds.length&&r._immediateFn(function(){t._handled||r._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)a(t,t._deferreds[e]);t._deferreds=null}function c(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function h(t,e){var n=!1;try{t(function(t){n||(n=!0,s(e,t))},function(t){n||(n=!0,l(e,t))})}catch(t){if(n)return;n=!0,l(e,t)}}r.prototype.catch=function(t){return this.then(null,t)},r.prototype.then=function(t,e){var n=new this.constructor(o);return a(this,new c(t,e,n)),n},r.prototype.finally=function(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){return e.reject(n)})})},r.all=function(t){return new r(function(e,n){if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var i=Array.prototype.slice.call(t);if(0===i.length)return e([]);var o=i.length;function r(t,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){r(t,e)},n)}i[t]=a,0==--o&&e(i)}catch(t){n(t)}}for(var a=0;a<i.length;a++)r(a,i[a])})},r.resolve=function(t){return t&&"object"==typeof t&&t.constructor===r?t:new r(function(e){e(t)})},r.reject=function(t){return new r(function(e,n){n(t)})},r.race=function(t){return new r(function(e,n){for(var i=0,o=t.length;i<o;i++)t[i].then(e,n)})},r._immediateFn="function"==typeof t&&function(e){t(e)}||function(t){i(t,0)},r._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var d=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e)return e;throw new Error("unable to locate global object")}();function f(t,e){return t(e={exports:{}},e.exports),e.exports}d.Promise||(d.Promise=r);var p=f(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),m=f(function(t){var e=t.exports={version:"2.5.5"};"number"==typeof __e&&(__e=e)}),v=(m.version,function(t){return"object"==typeof t?null!==t:"function"==typeof t}),g=function(t){if(!v(t))throw TypeError(t+" is not an object!");return t},_=function(t){try{return!!t()}catch(t){return!0}},y=!_(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),b=p.document,w=v(b)&&v(b.createElement),E=function(t){return w?b.createElement(t):{}},S=!y&&!_(function(){return 7!=Object.defineProperty(E("div"),"a",{get:function(){return 7}}).a}),C=function(t,e){if(!v(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!v(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!v(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!v(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")},x=Object.defineProperty,T={f:y?Object.defineProperty:function(t,e,n){if(g(t),e=C(e,!0),g(n),S)try{return x(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},k=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},I=y?function(t,e,n){return T.f(t,e,k(1,n))}:function(t,e,n){return t[e]=n,t},P={}.hasOwnProperty,L=function(t,e){return P.call(t,e)},A=0,O=Math.random(),N=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++A+O).toString(36))},R=f(function(t){var e=N("src"),n=Function.toString,i=(""+n).split("toString");m.inspectSource=function(t){return n.call(t)},(t.exports=function(t,n,o,r){var a="function"==typeof o;a&&(L(o,"name")||I(o,"name",n)),t[n]!==o&&(a&&(L(o,e)||I(o,e,t[n]?""+t[n]:i.join(String(n)))),t===p?t[n]=o:r?t[n]?t[n]=o:I(t,n,o):(delete t[n],I(t,n,o)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[e]||n.call(this)})}),D=function(t,e,n){if(function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,o){return t.call(e,n,i,o)}}return function(){return t.apply(e,arguments)}},M=function(t,e,n){var i,o,r,a,s=t&M.F,l=t&M.G,u=t&M.S,c=t&M.P,h=t&M.B,d=l?p:u?p[e]||(p[e]={}):(p[e]||{}).prototype,f=l?m:m[e]||(m[e]={}),v=f.prototype||(f.prototype={});for(i in l&&(n=e),n)r=((o=!s&&d&&void 0!==d[i])?d:n)[i],a=h&&o?D(r,p):c&&"function"==typeof r?D(Function.call,r):r,d&&R(d,i,r,t&M.U),f[i]!=r&&I(f,i,a),c&&v[i]!=r&&(v[i]=r)};p.core=m,M.F=1,M.G=2,M.S=4,M.P=8,M.B=16,M.W=32,M.U=64,M.R=128;var F=M,j={}.toString,B=function(t){return j.call(t).slice(8,-1)},z=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==B(t)?t.split(""):Object(t)},U=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},W=function(t){return Object(U(t))},V=Math.ceil,H=Math.floor,q=function(t){return isNaN(t=+t)?0:(t>0?H:V)(t)},Z=Math.min,K=function(t){return t>0?Z(q(t),9007199254740991):0},G=Array.isArray||function(t){return"Array"==B(t)},Q=p["__core-js_shared__"]||(p["__core-js_shared__"]={}),Y=function(t){return Q[t]||(Q[t]={})},X=f(function(t){var e=Y("wks"),n=p.Symbol,i="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=i&&n[t]||(i?n:N)("Symbol."+t))}).store=e}),J=X("species"),$=function(t,e){return new(function(t){var e;return G(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!G(e.prototype)||(e=void 0),v(e)&&null===(e=e[J])&&(e=void 0)),void 0===e?Array:e}(t))(e)},tt=function(t,e){var n=1==t,i=2==t,o=3==t,r=4==t,a=6==t,s=5==t||a,l=e||$;return function(e,u,c){for(var h,d,f=W(e),p=z(f),m=D(u,c,3),v=K(p.length),g=0,_=n?l(e,v):i?l(e,0):void 0;v>g;g++)if((s||g in p)&&(d=m(h=p[g],g,f),t))if(n)_[g]=d;else if(d)switch(t){case 3:return!0;case 5:return h;case 6:return g;case 2:_.push(h)}else if(r)return!1;return a?-1:o||r?r:_}},et=X("unscopables"),nt=Array.prototype;null==nt[et]&&I(nt,et,{});var it=function(t){nt[et][t]=!0},ot=tt(5),rt=!0;"find"in[]&&Array(1).find(function(){rt=!1}),F(F.P+F.F*rt,"Array",{find:function(t){return ot(this,t,arguments.length>1?arguments[1]:void 0)}}),it("find");m.Array.find;var at=tt(6),st=!0;"findIndex"in[]&&Array(1).findIndex(function(){st=!1}),F(F.P+F.F*st,"Array",{findIndex:function(t){return at(this,t,arguments.length>1?arguments[1]:void 0)}}),it("findIndex");m.Array.findIndex;var lt,ut=function(t){return z(U(t))},ct=Math.max,ht=Math.min,dt=Y("keys"),ft=function(t){return dt[t]||(dt[t]=N(t))},pt=(lt=!1,function(t,e,n){var i,o=ut(t),r=K(o.length),a=function(t,e){return(t=q(t))<0?ct(t+e,0):ht(t,e)}(n,r);if(lt&&e!=e){for(;r>a;)if((i=o[a++])!=i)return!0}else for(;r>a;a++)if((lt||a in o)&&o[a]===e)return lt||a||0;return!lt&&-1}),mt=ft("IE_PROTO"),vt=function(t,e){var n,i=ut(t),o=0,r=[];for(n in i)n!=mt&&L(i,n)&&r.push(n);for(;e.length>o;)L(i,n=e[o++])&&(~pt(r,n)||r.push(n));return r},gt="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),_t=Object.keys||function(t){return vt(t,gt)},yt={f:Object.getOwnPropertySymbols},bt={f:{}.propertyIsEnumerable},wt=Object.assign,Et=!wt||_(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=wt({},t)[n]||Object.keys(wt({},e)).join("")!=i})?function(t,e){for(var n=W(t),i=arguments.length,o=1,r=yt.f,a=bt.f;i>o;)for(var s,l=z(arguments[o++]),u=r?_t(l).concat(r(l)):_t(l),c=u.length,h=0;c>h;)a.call(l,s=u[h++])&&(n[s]=l[s]);return n}:wt;F(F.S+F.F,"Object",{assign:Et});m.Object.assign;var St=X("match"),Ct=function(t,e,n){if(v(i=e)&&(void 0!==(o=i[St])?o:"RegExp"==B(i)))throw TypeError("String#"+n+" doesn't accept regex!");var i,o;return String(U(t))},xt=X("match"),Tt="".startsWith;F(F.P+F.F*function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[xt]=!1,!"/./"[t](e)}catch(t){}}return!0}("startsWith"),"String",{startsWith:function(t){var e=Ct(this,t,"startsWith"),n=K(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),i=String(t);return Tt?Tt.call(e,i,n):e.slice(n,n+i.length)===i}});m.String.startsWith;F(F.P,"String",{repeat:function(t){var e=String(U(this)),n="",i=q(t);if(i<0||i==1/0)throw RangeError("Count can't be negative");for(;i>0;(i>>>=1)&&(e+=e))1&i&&(n+=e);return n}});m.String.repeat;var kt=f(function(t){var e=N("meta"),n=T.f,i=0,o=Object.isExtensible||function(){return!0},r=!_(function(){return o(Object.preventExtensions({}))}),a=function(t){n(t,e,{value:{i:"O"+ ++i,w:{}}})},s=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!v(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!L(t,e)){if(!o(t))return"F";if(!n)return"E";a(t)}return t[e].i},getWeak:function(t,n){if(!L(t,e)){if(!o(t))return!0;if(!n)return!1;a(t)}return t[e].w},onFreeze:function(t){return r&&s.NEED&&o(t)&&!L(t,e)&&a(t),t}}}),It=(kt.KEY,kt.NEED,kt.fastKey,kt.getWeak,kt.onFreeze,T.f),Pt=X("toStringTag"),Lt=function(t,e,n){t&&!L(t=n?t:t.prototype,Pt)&&It(t,Pt,{configurable:!0,value:e})},At={f:X},Ot=T.f,Nt=function(t){var e=m.Symbol||(m.Symbol=p.Symbol||{});"_"==t.charAt(0)||t in e||Ot(e,t,{value:At.f(t)})},Rt=y?Object.defineProperties:function(t,e){g(t);for(var n,i=_t(e),o=i.length,r=0;o>r;)T.f(t,n=i[r++],e[n]);return t},Dt=p.document,Mt=Dt&&Dt.documentElement,Ft=ft("IE_PROTO"),jt=function(){},Bt=function(){var t,e=E("iframe"),n=gt.length;for(e.style.display="none",Mt.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Bt=t.F;n--;)delete Bt.prototype[gt[n]];return Bt()},zt=Object.create||function(t,e){var n;return null!==t?(jt.prototype=g(t),n=new jt,jt.prototype=null,n[Ft]=t):n=Bt(),void 0===e?n:Rt(n,e)},Ut=gt.concat("length","prototype"),Wt={f:Object.getOwnPropertyNames||function(t){return vt(t,Ut)}},Vt=Wt.f,Ht={}.toString,qt="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Zt={f:function(t){return qt&&"[object Window]"==Ht.call(t)?function(t){try{return Vt(t)}catch(t){return qt.slice()}}(t):Vt(ut(t))}},Kt=Object.getOwnPropertyDescriptor,Gt={f:y?Kt:function(t,e){if(t=ut(t),e=C(e,!0),S)try{return Kt(t,e)}catch(t){}if(L(t,e))return k(!bt.f.call(t,e),t[e])}},Qt=kt.KEY,Yt=Gt.f,Xt=T.f,Jt=Zt.f,$t=p.Symbol,te=p.JSON,ee=te&&te.stringify,ne=X("_hidden"),ie=X("toPrimitive"),oe={}.propertyIsEnumerable,re=Y("symbol-registry"),ae=Y("symbols"),se=Y("op-symbols"),le=Object.prototype,ue="function"==typeof $t,ce=p.QObject,he=!ce||!ce.prototype||!ce.prototype.findChild,de=y&&_(function(){return 7!=zt(Xt({},"a",{get:function(){return Xt(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=Yt(le,e);i&&delete le[e],Xt(t,e,n),i&&t!==le&&Xt(le,e,i)}:Xt,fe=function(t){var e=ae[t]=zt($t.prototype);return e._k=t,e},pe=ue&&"symbol"==typeof $t.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof $t},me=function(t,e,n){return t===le&&me(se,e,n),g(t),e=C(e,!0),g(n),L(ae,e)?(n.enumerable?(L(t,ne)&&t[ne][e]&&(t[ne][e]=!1),n=zt(n,{enumerable:k(0,!1)})):(L(t,ne)||Xt(t,ne,k(1,{})),t[ne][e]=!0),de(t,e,n)):Xt(t,e,n)},ve=function(t,e){g(t);for(var n,i=function(t){var e=_t(t),n=yt.f;if(n)for(var i,o=n(t),r=bt.f,a=0;o.length>a;)r.call(t,i=o[a++])&&e.push(i);return e}(e=ut(e)),o=0,r=i.length;r>o;)me(t,n=i[o++],e[n]);return t},ge=function(t){var e=oe.call(this,t=C(t,!0));return!(this===le&&L(ae,t)&&!L(se,t))&&(!(e||!L(this,t)||!L(ae,t)||L(this,ne)&&this[ne][t])||e)},_e=function(t,e){if(t=ut(t),e=C(e,!0),t!==le||!L(ae,e)||L(se,e)){var n=Yt(t,e);return!n||!L(ae,e)||L(t,ne)&&t[ne][e]||(n.enumerable=!0),n}},ye=function(t){for(var e,n=Jt(ut(t)),i=[],o=0;n.length>o;)L(ae,e=n[o++])||e==ne||e==Qt||i.push(e);return i},be=function(t){for(var e,n=t===le,i=Jt(n?se:ut(t)),o=[],r=0;i.length>r;)!L(ae,e=i[r++])||n&&!L(le,e)||o.push(ae[e]);return o};ue||(R(($t=function(){if(this instanceof $t)throw TypeError("Symbol is not a constructor!");var t=N(arguments.length>0?arguments[0]:void 0),e=function(n){this===le&&e.call(se,n),L(this,ne)&&L(this[ne],t)&&(this[ne][t]=!1),de(this,t,k(1,n))};return y&&he&&de(le,t,{configurable:!0,set:e}),fe(t)}).prototype,"toString",function(){return this._k}),Gt.f=_e,T.f=me,Wt.f=Zt.f=ye,bt.f=ge,yt.f=be,y&&R(le,"propertyIsEnumerable",ge,!0),At.f=function(t){return fe(X(t))}),F(F.G+F.W+F.F*!ue,{Symbol:$t});for(var we="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Ee=0;we.length>Ee;)X(we[Ee++]);for(var Se=_t(X.store),Ce=0;Se.length>Ce;)Nt(Se[Ce++]);F(F.S+F.F*!ue,"Symbol",{for:function(t){return L(re,t+="")?re[t]:re[t]=$t(t)},keyFor:function(t){if(!pe(t))throw TypeError(t+" is not a symbol!");for(var e in re)if(re[e]===t)return e},useSetter:function(){he=!0},useSimple:function(){he=!1}}),F(F.S+F.F*!ue,"Object",{create:function(t,e){return void 0===e?zt(t):ve(zt(t),e)},defineProperty:me,defineProperties:ve,getOwnPropertyDescriptor:_e,getOwnPropertyNames:ye,getOwnPropertySymbols:be}),te&&F(F.S+F.F*(!ue||_(function(){var t=$t();return"[null]"!=ee([t])||"{}"!=ee({a:t})||"{}"!=ee(Object(t))})),"JSON",{stringify:function(t){for(var e,n,i=[t],o=1;arguments.length>o;)i.push(arguments[o++]);if(n=e=i[1],(v(e)||void 0!==t)&&!pe(t))return G(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!pe(e))return e}),i[1]=e,ee.apply(te,i)}}),$t.prototype[ie]||I($t.prototype,ie,$t.prototype.valueOf),Lt($t,"Symbol"),Lt(Math,"Math",!0),Lt(p.JSON,"JSON",!0);var xe=X("toStringTag"),Te="Arguments"==B(function(){return arguments}()),ke={};ke[X("toStringTag")]="z",ke+""!="[object z]"&&R(Object.prototype,"toString",function(){return"[object "+(void 0===(t=this)?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),xe))?n:Te?B(e):"Object"==(i=B(e))&&"function"==typeof e.callee?"Arguments":i)+"]";var t,e,n,i},!0),Nt("asyncIterator"),Nt("observable");m.Symbol;var Ie={},Pe={};I(Pe,X("iterator"),function(){return this});var Le,Ae=function(t,e,n){t.prototype=zt(Pe,{next:k(1,n)}),Lt(t,e+" Iterator")},Oe=ft("IE_PROTO"),Ne=Object.prototype,Re=Object.getPrototypeOf||function(t){return t=W(t),L(t,Oe)?t[Oe]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Ne:null},De=X("iterator"),Me=!([].keys&&"next"in[].keys()),Fe=function(){return this},je=function(t,e,n,i,o,r,a){Ae(n,e,i);var s,l,u,c=function(t){if(!Me&&t in p)return p[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},h=e+" Iterator",d="values"==o,f=!1,p=t.prototype,m=p[De]||p["@@iterator"]||o&&p[o],v=m||c(o),g=o?d?c("entries"):v:void 0,_="Array"==e&&p.entries||m;if(_&&(u=Re(_.call(new t)))!==Object.prototype&&u.next&&(Lt(u,h,!0),"function"!=typeof u[De]&&I(u,De,Fe)),d&&m&&"values"!==m.name&&(f=!0,v=function(){return m.call(this)}),(Me||f||!p[De])&&I(p,De,v),Ie[e]=v,Ie[h]=Fe,o)if(s={values:d?v:c("values"),keys:r?v:c("keys"),entries:g},a)for(l in s)l in p||R(p,l,s[l]);else F(F.P+F.F*(Me||f),e,s);return s},Be=(Le=!0,function(t,e){var n,i,o=String(U(t)),r=q(e),a=o.length;return r<0||r>=a?Le?"":void 0:(n=o.charCodeAt(r))<55296||n>56319||r+1===a||(i=o.charCodeAt(r+1))<56320||i>57343?Le?o.charAt(r):n:Le?o.slice(r,r+2):i-56320+(n-55296<<10)+65536});je(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=Be(e,n),this._i+=t.length,{value:t,done:!1})});var ze=function(t,e){return{value:e,done:!!t}},Ue=je(Array,"Array",function(t,e){this._t=ut(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,ze(1)):ze(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values");Ie.Arguments=Ie.Array,it("keys"),it("values"),it("entries");for(var We=X("iterator"),Ve=X("toStringTag"),He=Ie.Array,qe={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Ze=_t(qe),Ke=0;Ke<Ze.length;Ke++){var Ge,Qe=Ze[Ke],Ye=qe[Qe],Xe=p[Qe],Je=Xe&&Xe.prototype;if(Je&&(Je[We]||I(Je,We,He),Je[Ve]||I(Je,Ve,Qe),Ie[Qe]=He,Ye))for(Ge in Ue)Je[Ge]||R(Je,Ge,Ue[Ge],!0)}At.f("iterator")}.call(this,n(8).setImmediate,n(3))},function(t,e,n){(function(t){var i=void 0!==t&&t||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function r(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new r(o.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new r(o.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(9),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(3))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var i,o,r,a,s,l=1,u={},c=!1,h=t.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(t);d=d&&d.setTimeout?d:t,"[object process]"==={}.toString.call(t.process)?i=function(t){e.nextTick(function(){p(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((r=new MessageChannel).port1.onmessage=function(t){p(t.data)},i=function(t){r.port2.postMessage(t)}):h&&"onreadystatechange"in h.createElement("script")?(o=h.documentElement,i=function(t){var e=h.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,o.removeChild(e),e=null},o.appendChild(e)}):i=function(t){setTimeout(p,0,t)}:(a="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&p(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),i=function(e){t.postMessage(a+e,"*")}),d.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var o={callback:t,args:e};return u[l]=o,i(l),l++},d.clearImmediate=f}function f(t){delete u[t]}function p(t){if(c)setTimeout(p,0,t);else{var e=u[t];if(e){c=!0;try{!function(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(n,i)}}(e)}finally{f(t),c=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(3),n(5))},function(t,e){!function(t){"use strict";if(!t.fetch){var e={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(e.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],i=function(t){return t&&DataView.prototype.isPrototypeOf(t)},o=ArrayBuffer.isView||function(t){return t&&n.indexOf(Object.prototype.toString.call(t))>-1};c.prototype.append=function(t,e){t=s(t),e=l(e);var n=this.map[t];this.map[t]=n?n+","+e:e},c.prototype.delete=function(t){delete this.map[s(t)]},c.prototype.get=function(t){return t=s(t),this.has(t)?this.map[t]:null},c.prototype.has=function(t){return this.map.hasOwnProperty(s(t))},c.prototype.set=function(t,e){this.map[s(t)]=l(e)},c.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},c.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),u(t)},c.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),u(t)},c.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),u(t)},e.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var r=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},m.call(v.prototype),m.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},_.error=function(){var t=new _(null,{status:0,statusText:""});return t.type="error",t};var a=[301,302,303,307,308];_.redirect=function(t,e){if(-1===a.indexOf(e))throw new RangeError("Invalid status code");return new _(null,{status:e,headers:{location:t}})},t.Headers=c,t.Request=v,t.Response=_,t.fetch=function(t,n){return new Promise(function(i,o){var r=new v(t,n),a=new XMLHttpRequest;a.onload=function(){var t,e,n={status:a.status,statusText:a.statusText,headers:(t=a.getAllResponseHeaders()||"",e=new c,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var n=t.split(":"),i=n.shift().trim();if(i){var o=n.join(":").trim();e.append(i,o)}}),e)};n.url="responseURL"in a?a.responseURL:n.headers.get("X-Request-URL");var o="response"in a?a.response:a.responseText;i(new _(o,n))},a.onerror=function(){o(new TypeError("Network request failed"))},a.ontimeout=function(){o(new TypeError("Network request failed"))},a.open(r.method,r.url,!0),"include"===r.credentials?a.withCredentials=!0:"omit"===r.credentials&&(a.withCredentials=!1),"responseType"in a&&e.blob&&(a.responseType="blob"),r.headers.forEach(function(t,e){a.setRequestHeader(e,t)}),a.send(void 0===r._bodyInit?null:r._bodyInit)})},t.fetch.polyfill=!0}function s(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function l(t){return"string"!=typeof t&&(t=String(t)),t}function u(t){var n={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e.iterable&&(n[Symbol.iterator]=function(){return n}),n}function c(t){this.map={},t instanceof c?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function h(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function d(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function f(t){var e=new FileReader,n=d(e);return e.readAsArrayBuffer(t),n}function p(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(e.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(e.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(e.arrayBuffer&&e.blob&&i(t))this._bodyArrayBuffer=p(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!e.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!o(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=p(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},e.blob&&(this.blob=function(){var t=h(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(f)}),this.text=function(){var t,e,n,i=h(this);if(i)return i;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=d(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),i=0;i<e.length;i++)n[i]=String.fromCharCode(e[i]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},e.formData&&(this.formData=function(){return this.text().then(g)}),this.json=function(){return this.text().then(JSON.parse)},this}function v(t,e){var n,i,o=(e=e||{}).body;if(t instanceof v){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new c(t.headers)),this.method=t.method,this.mode=t.mode,o||null==t._bodyInit||(o=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new c(e.headers)),this.method=(n=e.method||this.method||"GET",i=n.toUpperCase(),r.indexOf(i)>-1?i:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function g(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),i=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(i),decodeURIComponent(o))}}),e}function _(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new c(e.headers),this.url=e.url||"",this._initBody(t)}}("undefined"!=typeof self?self:this)},function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",function(){return o}),n.d(e,"__assign",function(){return r}),n.d(e,"__rest",function(){return a}),n.d(e,"__decorate",function(){return s}),n.d(e,"__param",function(){return l}),n.d(e,"__metadata",function(){return u}),n.d(e,"__awaiter",function(){return c}),n.d(e,"__generator",function(){return h}),n.d(e,"__exportStar",function(){return d}),n.d(e,"__values",function(){return f}),n.d(e,"__read",function(){return p}),n.d(e,"__spread",function(){return m}),n.d(e,"__await",function(){return v}),n.d(e,"__asyncGenerator",function(){return g}),n.d(e,"__asyncDelegator",function(){return _}),n.d(e,"__asyncValues",function(){return y}),n.d(e,"__makeTemplateObject",function(){return b}),n.d(e,"__importStar",function(){return w}),n.d(e,"__importDefault",function(){return E});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function o(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var r=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};function a(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&(n[i[o]]=t[i[o]])}return n}function s(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a}function l(t,e){return function(n,i){e(n,i,t)}}function u(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t,e,n,i){return new(n||(n=Promise))(function(o,r){function a(t){try{l(i.next(t))}catch(t){r(t)}}function s(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}l((i=i.apply(t,e||[])).next())})}function h(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}function d(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function f(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function p(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(t){o={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function m(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}function v(t){return this instanceof v?(this.v=t,this):new v(t)}function g(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,o=n.apply(t,e||[]),r=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(t){o[t]&&(i[t]=function(e){return new Promise(function(n,i){r.push([t,e,n,i])>1||s(t,e)})})}function s(t,e){try{(n=o[t](e)).value instanceof v?Promise.resolve(n.value.v).then(l,u):c(r[0][2],n)}catch(t){c(r[0][3],t)}var n}function l(t){s("next",t)}function u(t){s("throw",t)}function c(t,e){t(e),r.shift(),r.length&&s(r[0][0],r[0][1])}}function _(t){var e,n;return e={},i("next"),i("throw",function(t){throw t}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(i,o){t[i]&&(e[i]=function(e){return(n=!n)?{value:v(t[i](e)),done:"return"===i}:o?o(e):e})}}function y(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator];return e?e.call(t):f(t)}function b(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function w(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function E(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){var i=n(13);"string"==typeof i&&(i=[[t.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(24)(i,o);i.locals&&(t.exports=i.locals)},function(t,e,n){var i=n(14);(t.exports=n(15)(!1)).push([t.i,'@charset "UTF-8";\n.img-fluid {\n  max-width: 100%;\n  height: auto; }\n\n.img-thumbnail {\n  padding: 0.25rem;\n  background-color: #fff;\n  border: 1px solid #dee2e6;\n  border-radius: 0.25rem;\n  max-width: 100%;\n  height: auto; }\n\n.figure {\n  display: inline-block; }\n\n.figure-img {\n  margin-bottom: 0.5rem;\n  line-height: 1; }\n\n.figure-caption {\n  font-size: 90%;\n  color: #6c757d; }\n\n.table {\n  width: 100%;\n  margin-bottom: 1rem;\n  background-color: transparent; }\n  .table th,\n  .table td {\n    padding: 0.75rem;\n    vertical-align: top;\n    border-top: 1px solid #dee2e6; }\n  .table thead th {\n    vertical-align: bottom;\n    border-bottom: 2px solid #dee2e6; }\n  .table tbody + tbody {\n    border-top: 2px solid #dee2e6; }\n  .table .table {\n    background-color: #fff; }\n\n.table-sm th,\n.table-sm td {\n  padding: 0.3rem; }\n\n.table-bordered {\n  border: 1px solid #dee2e6; }\n  .table-bordered th,\n  .table-bordered td {\n    border: 1px solid #dee2e6; }\n  .table-bordered thead th,\n  .table-bordered thead td {\n    border-bottom-width: 2px; }\n\n.table-borderless th,\n.table-borderless td,\n.table-borderless thead th,\n.table-borderless tbody + tbody {\n  border: 0; }\n\n.table-striped tbody tr:nth-of-type(odd) {\n  background-color: rgba(0, 0, 0, 0.05); }\n\n.table-hover tbody tr:hover {\n  background-color: rgba(0, 0, 0, 0.075); }\n\n.table-primary,\n.table-primary > th,\n.table-primary > td {\n  background-color: #b8daff; }\n\n.table-hover .table-primary:hover {\n  background-color: #9fcdff; }\n  .table-hover .table-primary:hover > td,\n  .table-hover .table-primary:hover > th {\n    background-color: #9fcdff; }\n\n.table-secondary,\n.table-secondary > th,\n.table-secondary > td {\n  background-color: #d6d8db; }\n\n.table-hover .table-secondary:hover {\n  background-color: #c8cbcf; }\n  .table-hover .table-secondary:hover > td,\n  .table-hover .table-secondary:hover > th {\n    background-color: #c8cbcf; }\n\n.table-success,\n.table-success > th,\n.table-success > td {\n  background-color: #c3e6cb; }\n\n.table-hover .table-success:hover {\n  background-color: #b1dfbb; }\n  .table-hover .table-success:hover > td,\n  .table-hover .table-success:hover > th {\n    background-color: #b1dfbb; }\n\n.table-info,\n.table-info > th,\n.table-info > td {\n  background-color: #bee5eb; }\n\n.table-hover .table-info:hover {\n  background-color: #abdde5; }\n  .table-hover .table-info:hover > td,\n  .table-hover .table-info:hover > th {\n    background-color: #abdde5; }\n\n.table-warning,\n.table-warning > th,\n.table-warning > td {\n  background-color: #ffeeba; }\n\n.table-hover .table-warning:hover {\n  background-color: #ffe8a1; }\n  .table-hover .table-warning:hover > td,\n  .table-hover .table-warning:hover > th {\n    background-color: #ffe8a1; }\n\n.table-danger,\n.table-danger > th,\n.table-danger > td {\n  background-color: #f5c6cb; }\n\n.table-hover .table-danger:hover {\n  background-color: #f1b0b7; }\n  .table-hover .table-danger:hover > td,\n  .table-hover .table-danger:hover > th {\n    background-color: #f1b0b7; }\n\n.table-light,\n.table-light > th,\n.table-light > td {\n  background-color: #fdfdfe; }\n\n.table-hover .table-light:hover {\n  background-color: #ececf6; }\n  .table-hover .table-light:hover > td,\n  .table-hover .table-light:hover > th {\n    background-color: #ececf6; }\n\n.table-dark,\n.table-dark > th,\n.table-dark > td {\n  background-color: #c6c8ca; }\n\n.table-hover .table-dark:hover {\n  background-color: #b9bbbe; }\n  .table-hover .table-dark:hover > td,\n  .table-hover .table-dark:hover > th {\n    background-color: #b9bbbe; }\n\n.table-active,\n.table-active > th,\n.table-active > td {\n  background-color: rgba(0, 0, 0, 0.075); }\n\n.table-hover .table-active:hover {\n  background-color: rgba(0, 0, 0, 0.075); }\n  .table-hover .table-active:hover > td,\n  .table-hover .table-active:hover > th {\n    background-color: rgba(0, 0, 0, 0.075); }\n\n.table .thead-dark th {\n  color: #fff;\n  background-color: #212529;\n  border-color: #32383e; }\n\n.table .thead-light th {\n  color: #495057;\n  background-color: #e9ecef;\n  border-color: #dee2e6; }\n\n.table-dark {\n  color: #fff;\n  background-color: #212529; }\n  .table-dark th,\n  .table-dark td,\n  .table-dark thead th {\n    border-color: #32383e; }\n  .table-dark.table-bordered {\n    border: 0; }\n  .table-dark.table-striped tbody tr:nth-of-type(odd) {\n    background-color: rgba(255, 255, 255, 0.05); }\n  .table-dark.table-hover tbody tr:hover {\n    background-color: rgba(255, 255, 255, 0.075); }\n\n@media (max-width: 575.98px) {\n  .table-responsive-sm {\n    display: block;\n    width: 100%;\n    overflow-x: auto;\n    -webkit-overflow-scrolling: touch;\n    -ms-overflow-style: -ms-autohiding-scrollbar; }\n    .table-responsive-sm > .table-bordered {\n      border: 0; } }\n\n@media (max-width: 767.98px) {\n  .table-responsive-md {\n    display: block;\n    width: 100%;\n    overflow-x: auto;\n    -webkit-overflow-scrolling: touch;\n    -ms-overflow-style: -ms-autohiding-scrollbar; }\n    .table-responsive-md > .table-bordered {\n      border: 0; } }\n\n@media (max-width: 991.98px) {\n  .table-responsive-lg {\n    display: block;\n    width: 100%;\n    overflow-x: auto;\n    -webkit-overflow-scrolling: touch;\n    -ms-overflow-style: -ms-autohiding-scrollbar; }\n    .table-responsive-lg > .table-bordered {\n      border: 0; } }\n\n@media (max-width: 1199.98px) {\n  .table-responsive-xl {\n    display: block;\n    width: 100%;\n    overflow-x: auto;\n    -webkit-overflow-scrolling: touch;\n    -ms-overflow-style: -ms-autohiding-scrollbar; }\n    .table-responsive-xl > .table-bordered {\n      border: 0; } }\n\n.table-responsive {\n  display: block;\n  width: 100%;\n  overflow-x: auto;\n  -webkit-overflow-scrolling: touch;\n  -ms-overflow-style: -ms-autohiding-scrollbar; }\n  .table-responsive > .table-bordered {\n    border: 0; }\n\n.form-control {\n  display: block;\n  width: 100%;\n  height: calc(2.25rem + 2px);\n  padding: 0.375rem 0.75rem;\n  font-size: 1rem;\n  line-height: 1.5;\n  color: #495057;\n  background-color: #fff;\n  background-clip: padding-box;\n  border: 1px solid #ced4da;\n  border-radius: 0.25rem;\n  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out; }\n  @media screen and (prefers-reduced-motion: reduce) {\n    .form-control {\n      transition: none; } }\n  .form-control::-ms-expand {\n    background-color: transparent;\n    border: 0; }\n  .form-control:focus {\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25); }\n  .form-control::-webkit-input-placeholder {\n    color: #6c757d;\n    opacity: 1; }\n  .form-control:-ms-input-placeholder {\n    color: #6c757d;\n    opacity: 1; }\n  .form-control::-ms-input-placeholder {\n    color: #6c757d;\n    opacity: 1; }\n  .form-control::placeholder {\n    color: #6c757d;\n    opacity: 1; }\n  .form-control:disabled, .form-control[readonly] {\n    background-color: #e9ecef;\n    opacity: 1; }\n\nselect.form-control:focus::-ms-value {\n  color: #495057;\n  background-color: #fff; }\n\n.form-control-file,\n.form-control-range {\n  display: block;\n  width: 100%; }\n\n.col-form-label {\n  padding-top: calc(0.375rem + 1px);\n  padding-bottom: calc(0.375rem + 1px);\n  margin-bottom: 0;\n  font-size: inherit;\n  line-height: 1.5; }\n\n.col-form-label-lg {\n  padding-top: calc(0.5rem + 1px);\n  padding-bottom: calc(0.5rem + 1px);\n  font-size: 1.25rem;\n  line-height: 1.5; }\n\n.col-form-label-sm {\n  padding-top: calc(0.25rem + 1px);\n  padding-bottom: calc(0.25rem + 1px);\n  font-size: 0.875rem;\n  line-height: 1.5; }\n\n.form-control-plaintext {\n  display: block;\n  width: 100%;\n  padding-top: 0.375rem;\n  padding-bottom: 0.375rem;\n  margin-bottom: 0;\n  line-height: 1.5;\n  color: #212529;\n  background-color: transparent;\n  border: solid transparent;\n  border-width: 1px 0; }\n  .form-control-plaintext.form-control-sm, .form-control-plaintext.form-control-lg {\n    padding-right: 0;\n    padding-left: 0; }\n\n.form-control-sm {\n  height: calc(1.8125rem + 2px);\n  padding: 0.25rem 0.5rem;\n  font-size: 0.875rem;\n  line-height: 1.5;\n  border-radius: 0.2rem; }\n\n.form-control-lg {\n  height: calc(2.875rem + 2px);\n  padding: 0.5rem 1rem;\n  font-size: 1.25rem;\n  line-height: 1.5;\n  border-radius: 0.3rem; }\n\nselect.form-control[size], select.form-control[multiple] {\n  height: auto; }\n\ntextarea.form-control {\n  height: auto; }\n\n.form-group {\n  margin-bottom: 1rem; }\n\n.form-text {\n  display: block;\n  margin-top: 0.25rem; }\n\n.form-row {\n  display: flex;\n  flex-wrap: wrap;\n  margin-right: -5px;\n  margin-left: -5px; }\n  .form-row > .col,\n  .form-row > [class*="col-"] {\n    padding-right: 5px;\n    padding-left: 5px; }\n\n.form-check {\n  position: relative;\n  display: block;\n  padding-left: 1.25rem; }\n\n.form-check-input {\n  position: absolute;\n  margin-top: 0.3rem;\n  margin-left: -1.25rem; }\n  .form-check-input:disabled ~ .form-check-label {\n    color: #6c757d; }\n\n.form-check-label {\n  margin-bottom: 0; }\n\n.form-check-inline {\n  display: inline-flex;\n  align-items: center;\n  padding-left: 0;\n  margin-right: 0.75rem; }\n  .form-check-inline .form-check-input {\n    position: static;\n    margin-top: 0;\n    margin-right: 0.3125rem;\n    margin-left: 0; }\n\n.valid-feedback {\n  display: none;\n  width: 100%;\n  margin-top: 0.25rem;\n  font-size: 80%;\n  color: #28a745; }\n\n.valid-tooltip {\n  position: absolute;\n  top: 100%;\n  z-index: 5;\n  display: none;\n  max-width: 100%;\n  padding: 0.25rem 0.5rem;\n  margin-top: .1rem;\n  font-size: 0.875rem;\n  line-height: 1.5;\n  color: #fff;\n  background-color: rgba(40, 167, 69, 0.9);\n  border-radius: 0.25rem; }\n\n.was-validated .form-control:valid, .form-control.is-valid, .was-validated\n.custom-select:valid,\n.custom-select.is-valid {\n  border-color: #28a745; }\n  .was-validated .form-control:valid:focus, .form-control.is-valid:focus, .was-validated\n  .custom-select:valid:focus,\n  .custom-select.is-valid:focus {\n    border-color: #28a745;\n    box-shadow: 0 0 0 0.2rem rgba(40, 167, 69, 0.25); }\n  .was-validated .form-control:valid ~ .valid-feedback,\n  .was-validated .form-control:valid ~ .valid-tooltip, .form-control.is-valid ~ .valid-feedback,\n  .form-control.is-valid ~ .valid-tooltip, .was-validated\n  .custom-select:valid ~ .valid-feedback,\n  .was-validated\n  .custom-select:valid ~ .valid-tooltip,\n  .custom-select.is-valid ~ .valid-feedback,\n  .custom-select.is-valid ~ .valid-tooltip {\n    display: block; }\n\n.was-validated .form-control-file:valid ~ .valid-feedback,\n.was-validated .form-control-file:valid ~ .valid-tooltip, .form-control-file.is-valid ~ .valid-feedback,\n.form-control-file.is-valid ~ .valid-tooltip {\n  display: block; }\n\n.was-validated .form-check-input:valid ~ .form-check-label, .form-check-input.is-valid ~ .form-check-label {\n  color: #28a745; }\n\n.was-validated .form-check-input:valid ~ .valid-feedback,\n.was-validated .form-check-input:valid ~ .valid-tooltip, .form-check-input.is-valid ~ .valid-feedback,\n.form-check-input.is-valid ~ .valid-tooltip {\n  display: block; }\n\n.was-validated .custom-control-input:valid ~ .custom-control-label, .custom-control-input.is-valid ~ .custom-control-label {\n  color: #28a745; }\n  .was-validated .custom-control-input:valid ~ .custom-control-label::before, .custom-control-input.is-valid ~ .custom-control-label::before {\n    background-color: #71dd8a; }\n\n.was-validated .custom-control-input:valid ~ .valid-feedback,\n.was-validated .custom-control-input:valid ~ .valid-tooltip, .custom-control-input.is-valid ~ .valid-feedback,\n.custom-control-input.is-valid ~ .valid-tooltip {\n  display: block; }\n\n.was-validated .custom-control-input:valid:checked ~ .custom-control-label::before, .custom-control-input.is-valid:checked ~ .custom-control-label::before {\n  background-color: #34ce57; }\n\n.was-validated .custom-control-input:valid:focus ~ .custom-control-label::before, .custom-control-input.is-valid:focus ~ .custom-control-label::before {\n  box-shadow: 0 0 0 1px #fff, 0 0 0 0.2rem rgba(40, 167, 69, 0.25); }\n\n.was-validated .custom-file-input:valid ~ .custom-file-label, .custom-file-input.is-valid ~ .custom-file-label {\n  border-color: #28a745; }\n  .was-validated .custom-file-input:valid ~ .custom-file-label::after, .custom-file-input.is-valid ~ .custom-file-label::after {\n    border-color: inherit; }\n\n.was-validated .custom-file-input:valid ~ .valid-feedback,\n.was-validated .custom-file-input:valid ~ .valid-tooltip, .custom-file-input.is-valid ~ .valid-feedback,\n.custom-file-input.is-valid ~ .valid-tooltip {\n  display: block; }\n\n.was-validated .custom-file-input:valid:focus ~ .custom-file-label, .custom-file-input.is-valid:focus ~ .custom-file-label {\n  box-shadow: 0 0 0 0.2rem rgba(40, 167, 69, 0.25); }\n\n.invalid-feedback {\n  display: none;\n  width: 100%;\n  margin-top: 0.25rem;\n  font-size: 80%;\n  color: #dc3545; }\n\n.invalid-tooltip {\n  position: absolute;\n  top: 100%;\n  z-index: 5;\n  display: none;\n  max-width: 100%;\n  padding: 0.25rem 0.5rem;\n  margin-top: .1rem;\n  font-size: 0.875rem;\n  line-height: 1.5;\n  color: #fff;\n  background-color: rgba(220, 53, 69, 0.9);\n  border-radius: 0.25rem; }\n\n.was-validated .form-control:invalid, .form-control.is-invalid, .was-validated\n.custom-select:invalid,\n.custom-select.is-invalid {\n  border-color: #dc3545; }\n  .was-validated .form-control:invalid:focus, .form-control.is-invalid:focus, .was-validated\n  .custom-select:invalid:focus,\n  .custom-select.is-invalid:focus {\n    border-color: #dc3545;\n    box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25); }\n  .was-validated .form-control:invalid ~ .invalid-feedback,\n  .was-validated .form-control:invalid ~ .invalid-tooltip, .form-control.is-invalid ~ .invalid-feedback,\n  .form-control.is-invalid ~ .invalid-tooltip, .was-validated\n  .custom-select:invalid ~ .invalid-feedback,\n  .was-validated\n  .custom-select:invalid ~ .invalid-tooltip,\n  .custom-select.is-invalid ~ .invalid-feedback,\n  .custom-select.is-invalid ~ .invalid-tooltip {\n    display: block; }\n\n.was-validated .form-control-file:invalid ~ .invalid-feedback,\n.was-validated .form-control-file:invalid ~ .invalid-tooltip, .form-control-file.is-invalid ~ .invalid-feedback,\n.form-control-file.is-invalid ~ .invalid-tooltip {\n  display: block; }\n\n.was-validated .form-check-input:invalid ~ .form-check-label, .form-check-input.is-invalid ~ .form-check-label {\n  color: #dc3545; }\n\n.was-validated .form-check-input:invalid ~ .invalid-feedback,\n.was-validated .form-check-input:invalid ~ .invalid-tooltip, .form-check-input.is-invalid ~ .invalid-feedback,\n.form-check-input.is-invalid ~ .invalid-tooltip {\n  display: block; }\n\n.was-validated .custom-control-input:invalid ~ .custom-control-label, .custom-control-input.is-invalid ~ .custom-control-label {\n  color: #dc3545; }\n  .was-validated .custom-control-input:invalid ~ .custom-control-label::before, .custom-control-input.is-invalid ~ .custom-control-label::before {\n    background-color: #efa2a9; }\n\n.was-validated .custom-control-input:invalid ~ .invalid-feedback,\n.was-validated .custom-control-input:invalid ~ .invalid-tooltip, .custom-control-input.is-invalid ~ .invalid-feedback,\n.custom-control-input.is-invalid ~ .invalid-tooltip {\n  display: block; }\n\n.was-validated .custom-control-input:invalid:checked ~ .custom-control-label::before, .custom-control-input.is-invalid:checked ~ .custom-control-label::before {\n  background-color: #e4606d; }\n\n.was-validated .custom-control-input:invalid:focus ~ .custom-control-label::before, .custom-control-input.is-invalid:focus ~ .custom-control-label::before {\n  box-shadow: 0 0 0 1px #fff, 0 0 0 0.2rem rgba(220, 53, 69, 0.25); }\n\n.was-validated .custom-file-input:invalid ~ .custom-file-label, .custom-file-input.is-invalid ~ .custom-file-label {\n  border-color: #dc3545; }\n  .was-validated .custom-file-input:invalid ~ .custom-file-label::after, .custom-file-input.is-invalid ~ .custom-file-label::after {\n    border-color: inherit; }\n\n.was-validated .custom-file-input:invalid ~ .invalid-feedback,\n.was-validated .custom-file-input:invalid ~ .invalid-tooltip, .custom-file-input.is-invalid ~ .invalid-feedback,\n.custom-file-input.is-invalid ~ .invalid-tooltip {\n  display: block; }\n\n.was-validated .custom-file-input:invalid:focus ~ .custom-file-label, .custom-file-input.is-invalid:focus ~ .custom-file-label {\n  box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25); }\n\n.form-inline {\n  display: flex;\n  flex-flow: row wrap;\n  align-items: center; }\n  .form-inline .form-check {\n    width: 100%; }\n  @media (min-width: 576px) {\n    .form-inline label {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      margin-bottom: 0; }\n    .form-inline .form-group {\n      display: flex;\n      flex: 0 0 auto;\n      flex-flow: row wrap;\n      align-items: center;\n      margin-bottom: 0; }\n    .form-inline .form-control {\n      display: inline-block;\n      width: auto;\n      vertical-align: middle; }\n    .form-inline .form-control-plaintext {\n      display: inline-block; }\n    .form-inline .input-group,\n    .form-inline .custom-select {\n      width: auto; }\n    .form-inline .form-check {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      width: auto;\n      padding-left: 0; }\n    .form-inline .form-check-input {\n      position: relative;\n      margin-top: 0;\n      margin-right: 0.25rem;\n      margin-left: 0; }\n    .form-inline .custom-control {\n      align-items: center;\n      justify-content: center; }\n    .form-inline .custom-control-label {\n      margin-bottom: 0; } }\n\n.btn {\n  display: inline-block;\n  font-weight: 400;\n  text-align: center;\n  white-space: nowrap;\n  vertical-align: middle;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  border: 1px solid transparent;\n  padding: 0.375rem 0.75rem;\n  font-size: 1rem;\n  line-height: 1.5;\n  border-radius: 0.25rem;\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out; }\n  @media screen and (prefers-reduced-motion: reduce) {\n    .btn {\n      transition: none; } }\n  .btn:hover, .btn:focus {\n    text-decoration: none; }\n  .btn:focus, .btn.focus {\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25); }\n  .btn.disabled, .btn:disabled {\n    opacity: 0.65; }\n  .btn:not(:disabled):not(.disabled) {\n    cursor: pointer; }\n\na.btn.disabled,\nfieldset:disabled a.btn {\n  pointer-events: none; }\n\n.btn-primary {\n  color: #fff;\n  background-color: #007bff;\n  border-color: #007bff; }\n  .btn-primary:hover {\n    color: #fff;\n    background-color: #0069d9;\n    border-color: #0062cc; }\n  .btn-primary:focus, .btn-primary.focus {\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.5); }\n  .btn-primary.disabled, .btn-primary:disabled {\n    color: #fff;\n    background-color: #007bff;\n    border-color: #007bff; }\n  .btn-primary:not(:disabled):not(.disabled):active, .btn-primary:not(:disabled):not(.disabled).active,\n  .show > .btn-primary.dropdown-toggle {\n    color: #fff;\n    background-color: #0062cc;\n    border-color: #005cbf; }\n    .btn-primary:not(:disabled):not(.disabled):active:focus, .btn-primary:not(:disabled):not(.disabled).active:focus,\n    .show > .btn-primary.dropdown-toggle:focus {\n      box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.5); }\n\n.btn-secondary {\n  color: #fff;\n  background-color: #6c757d;\n  border-color: #6c757d; }\n  .btn-secondary:hover {\n    color: #fff;\n    background-color: #5a6268;\n    border-color: #545b62; }\n  .btn-secondary:focus, .btn-secondary.focus {\n    box-shadow: 0 0 0 0.2rem rgba(108, 117, 125, 0.5); }\n  .btn-secondary.disabled, .btn-secondary:disabled {\n    color: #fff;\n    background-color: #6c757d;\n    border-color: #6c757d; }\n  .btn-secondary:not(:disabled):not(.disabled):active, .btn-secondary:not(:disabled):not(.disabled).active,\n  .show > .btn-secondary.dropdown-toggle {\n    color: #fff;\n    background-color: #545b62;\n    border-color: #4e555b; }\n    .btn-secondary:not(:disabled):not(.disabled):active:focus, .btn-secondary:not(:disabled):not(.disabled).active:focus,\n    .show > .btn-secondary.dropdown-toggle:focus {\n      box-shadow: 0 0 0 0.2rem rgba(108, 117, 125, 0.5); }\n\n.btn-success {\n  color: #fff;\n  background-color: #28a745;\n  border-color: #28a745; }\n  .btn-success:hover {\n    color: #fff;\n    background-color: #218838;\n    border-color: #1e7e34; }\n  .btn-success:focus, .btn-success.focus {\n    box-shadow: 0 0 0 0.2rem rgba(40, 167, 69, 0.5); }\n  .btn-success.disabled, .btn-success:disabled {\n    color: #fff;\n    background-color: #28a745;\n    border-color: #28a745; }\n  .btn-success:not(:disabled):not(.disabled):active, .btn-success:not(:disabled):not(.disabled).active,\n  .show > .btn-success.dropdown-toggle {\n    color: #fff;\n    background-color: #1e7e34;\n    border-color: #1c7430; }\n    .btn-success:not(:disabled):not(.disabled):active:focus, .btn-success:not(:disabled):not(.disabled).active:focus,\n    .show > .btn-success.dropdown-toggle:focus {\n      box-shadow: 0 0 0 0.2rem rgba(40, 167, 69, 0.5); }\n\n.btn-info {\n  color: #fff;\n  background-color: #17a2b8;\n  border-color: #17a2b8; }\n  .btn-info:hover {\n    color: #fff;\n    background-color: #138496;\n    border-color: #117a8b; }\n  .btn-info:focus, .btn-info.focus {\n    box-shadow: 0 0 0 0.2rem rgba(23, 162, 184, 0.5); }\n  .btn-info.disabled, .btn-info:disabled {\n    color: #fff;\n    background-color: #17a2b8;\n    border-color: #17a2b8; }\n  .btn-info:not(:disabled):not(.disabled):active, .btn-info:not(:disabled):not(.disabled).active,\n  .show > .btn-info.dropdown-toggle {\n    color: #fff;\n    background-color: #117a8b;\n    border-color: #10707f; }\n    .btn-info:not(:disabled):not(.disabled):active:focus, .btn-info:not(:disabled):not(.disabled).active:focus,\n    .show > .btn-info.dropdown-toggle:focus {\n      box-shadow: 0 0 0 0.2rem rgba(23, 162, 184, 0.5); }\n\n.btn-warning {\n  color: #212529;\n  background-color: #ffc107;\n  border-color: #ffc107; }\n  .btn-warning:hover {\n    color: #212529;\n    background-color: #e0a800;\n    border-color: #d39e00; }\n  .btn-warning:focus, .btn-warning.focus {\n    box-shadow: 0 0 0 0.2rem rgba(255, 193, 7, 0.5); }\n  .btn-warning.disabled, .btn-warning:disabled {\n    color: #212529;\n    background-color: #ffc107;\n    border-color: #ffc107; }\n  .btn-warning:not(:disabled):not(.disabled):active, .btn-warning:not(:disabled):not(.disabled).active,\n  .show > .btn-warning.dropdown-toggle {\n    color: #212529;\n    background-color: #d39e00;\n    border-color: #c69500; }\n    .btn-warning:not(:disabled):not(.disabled):active:focus, .btn-warning:not(:disabled):not(.disabled).active:focus,\n    .show > .btn-warning.dropdown-toggle:focus {\n      box-shadow: 0 0 0 0.2rem rgba(255, 193, 7, 0.5); }\n\n.btn-danger {\n  color: #fff;\n  background-color: #dc3545;\n  border-color: #dc3545; }\n  .btn-danger:hover {\n    color: #fff;\n    background-color: #c82333;\n    border-color: #bd2130; }\n  .btn-danger:focus, .btn-danger.focus {\n    box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.5); }\n  .btn-danger.disabled, .btn-danger:disabled {\n    color: #fff;\n    background-color: #dc3545;\n    border-color: #dc3545; }\n  .btn-danger:not(:disabled):not(.disabled):active, .btn-danger:not(:disabled):not(.disabled).active,\n  .show > .btn-danger.dropdown-toggle {\n    color: #fff;\n    background-color: #bd2130;\n    border-color: #b21f2d; }\n    .btn-danger:not(:disabled):not(.disabled):active:focus, .btn-danger:not(:disabled):not(.disabled).active:focus,\n    .show > .btn-danger.dropdown-toggle:focus {\n      box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.5); }\n\n.btn-light {\n  color: #212529;\n  background-color: #f8f9fa;\n  border-color: #f8f9fa; }\n  .btn-light:hover {\n    color: #212529;\n    background-color: #e2e6ea;\n    border-color: #dae0e5; }\n  .btn-light:focus, .btn-light.focus {\n    box-shadow: 0 0 0 0.2rem rgba(248, 249, 250, 0.5); }\n  .btn-light.disabled, .btn-light:disabled {\n    color: #212529;\n    background-color: #f8f9fa;\n    border-color: #f8f9fa; }\n  .btn-light:not(:disabled):not(.disabled):active, .btn-light:not(:disabled):not(.disabled).active,\n  .show > .btn-light.dropdown-toggle {\n    color: #212529;\n    background-color: #dae0e5;\n    border-color: #d3d9df; }\n    .btn-light:not(:disabled):not(.disabled):active:focus, .btn-light:not(:disabled):not(.disabled).active:focus,\n    .show > .btn-light.dropdown-toggle:focus {\n      box-shadow: 0 0 0 0.2rem rgba(248, 249, 250, 0.5); }\n\n.btn-dark {\n  color: #fff;\n  background-color: #343a40;\n  border-color: #343a40; }\n  .btn-dark:hover {\n    color: #fff;\n    background-color: #23272b;\n    border-color: #1d2124; }\n  .btn-dark:focus, .btn-dark.focus {\n    box-shadow: 0 0 0 0.2rem rgba(52, 58, 64, 0.5); }\n  .btn-dark.disabled, .btn-dark:disabled {\n    color: #fff;\n    background-color: #343a40;\n    border-color: #343a40; }\n  .btn-dark:not(:disabled):not(.disabled):active, .btn-dark:not(:disabled):not(.disabled).active,\n  .show > .btn-dark.dropdown-toggle {\n    color: #fff;\n    background-color: #1d2124;\n    border-color: #171a1d; }\n    .btn-dark:not(:disabled):not(.disabled):active:focus, .btn-dark:not(:disabled):not(.disabled).active:focus,\n    .show > .btn-dark.dropdown-toggle:focus {\n      box-shadow: 0 0 0 0.2rem rgba(52, 58, 64, 0.5); }\n\n.btn-outline-primary {\n  color: #007bff;\n  background-color: transparent;\n  background-image: none;\n  border-color: #007bff; }\n  .btn-outline-primary:hover {\n    color: #fff;\n    background-color: #007bff;\n    border-color: #007bff; }\n  .btn-outline-primary:focus, .btn-outline-primary.focus {\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.5); }\n  .btn-outline-primary.disabled, .btn-outline-primary:disabled {\n    color: #007bff;\n    background-color: transparent; }\n  .btn-outline-primary:not(:disabled):not(.disabled):active, .btn-outline-primary:not(:disabled):not(.disabled).active,\n  .show > .btn-outline-primary.dropdown-toggle {\n    color: #fff;\n    background-color: #007bff;\n    border-color: #007bff; }\n    .btn-outline-primary:not(:disabled):not(.disabled):active:focus, .btn-outline-primary:not(:disabled):not(.disabled).active:focus,\n    .show > .btn-outline-primary.dropdown-toggle:focus {\n      box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.5); }\n\n.btn-outline-secondary {\n  color: #6c757d;\n  background-color: transparent;\n  background-image: none;\n  border-color: #6c757d; }\n  .btn-outline-secondary:hover {\n    color: #fff;\n    background-color: #6c757d;\n    border-color: #6c757d; }\n  .btn-outline-secondary:focus, .btn-outline-secondary.focus {\n    box-shadow: 0 0 0 0.2rem rgba(108, 117, 125, 0.5); }\n  .btn-outline-secondary.disabled, .btn-outline-secondary:disabled {\n    color: #6c757d;\n    background-color: transparent; }\n  .btn-outline-secondary:not(:disabled):not(.disabled):active, .btn-outline-secondary:not(:disabled):not(.disabled).active,\n  .show > .btn-outline-secondary.dropdown-toggle {\n    color: #fff;\n    background-color: #6c757d;\n    border-color: #6c757d; }\n    .btn-outline-secondary:not(:disabled):not(.disabled):active:focus, .btn-outline-secondary:not(:disabled):not(.disabled).active:focus,\n    .show > .btn-outline-secondary.dropdown-toggle:focus {\n      box-shadow: 0 0 0 0.2rem rgba(108, 117, 125, 0.5); }\n\n.btn-outline-success {\n  color: #28a745;\n  background-color: transparent;\n  background-image: none;\n  border-color: #28a745; }\n  .btn-outline-success:hover {\n    color: #fff;\n    background-color: #28a745;\n    border-color: #28a745; }\n  .btn-outline-success:focus, .btn-outline-success.focus {\n    box-shadow: 0 0 0 0.2rem rgba(40, 167, 69, 0.5); }\n  .btn-outline-success.disabled, .btn-outline-success:disabled {\n    color: #28a745;\n    background-color: transparent; }\n  .btn-outline-success:not(:disabled):not(.disabled):active, .btn-outline-success:not(:disabled):not(.disabled).active,\n  .show > .btn-outline-success.dropdown-toggle {\n    color: #fff;\n    background-color: #28a745;\n    border-color: #28a745; }\n    .btn-outline-success:not(:disabled):not(.disabled):active:focus, .btn-outline-success:not(:disabled):not(.disabled).active:focus,\n    .show > .btn-outline-success.dropdown-toggle:focus {\n      box-shadow: 0 0 0 0.2rem rgba(40, 167, 69, 0.5); }\n\n.btn-outline-info {\n  color: #17a2b8;\n  background-color: transparent;\n  background-image: none;\n  border-color: #17a2b8; }\n  .btn-outline-info:hover {\n    color: #fff;\n    background-color: #17a2b8;\n    border-color: #17a2b8; }\n  .btn-outline-info:focus, .btn-outline-info.focus {\n    box-shadow: 0 0 0 0.2rem rgba(23, 162, 184, 0.5); }\n  .btn-outline-info.disabled, .btn-outline-info:disabled {\n    color: #17a2b8;\n    background-color: transparent; }\n  .btn-outline-info:not(:disabled):not(.disabled):active, .btn-outline-info:not(:disabled):not(.disabled).active,\n  .show > .btn-outline-info.dropdown-toggle {\n    color: #fff;\n    background-color: #17a2b8;\n    border-color: #17a2b8; }\n    .btn-outline-info:not(:disabled):not(.disabled):active:focus, .btn-outline-info:not(:disabled):not(.disabled).active:focus,\n    .show > .btn-outline-info.dropdown-toggle:focus {\n      box-shadow: 0 0 0 0.2rem rgba(23, 162, 184, 0.5); }\n\n.btn-outline-warning {\n  color: #ffc107;\n  background-color: transparent;\n  background-image: none;\n  border-color: #ffc107; }\n  .btn-outline-warning:hover {\n    color: #212529;\n    background-color: #ffc107;\n    border-color: #ffc107; }\n  .btn-outline-warning:focus, .btn-outline-warning.focus {\n    box-shadow: 0 0 0 0.2rem rgba(255, 193, 7, 0.5); }\n  .btn-outline-warning.disabled, .btn-outline-warning:disabled {\n    color: #ffc107;\n    background-color: transparent; }\n  .btn-outline-warning:not(:disabled):not(.disabled):active, .btn-outline-warning:not(:disabled):not(.disabled).active,\n  .show > .btn-outline-warning.dropdown-toggle {\n    color: #212529;\n    background-color: #ffc107;\n    border-color: #ffc107; }\n    .btn-outline-warning:not(:disabled):not(.disabled):active:focus, .btn-outline-warning:not(:disabled):not(.disabled).active:focus,\n    .show > .btn-outline-warning.dropdown-toggle:focus {\n      box-shadow: 0 0 0 0.2rem rgba(255, 193, 7, 0.5); }\n\n.btn-outline-danger {\n  color: #dc3545;\n  background-color: transparent;\n  background-image: none;\n  border-color: #dc3545; }\n  .btn-outline-danger:hover {\n    color: #fff;\n    background-color: #dc3545;\n    border-color: #dc3545; }\n  .btn-outline-danger:focus, .btn-outline-danger.focus {\n    box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.5); }\n  .btn-outline-danger.disabled, .btn-outline-danger:disabled {\n    color: #dc3545;\n    background-color: transparent; }\n  .btn-outline-danger:not(:disabled):not(.disabled):active, .btn-outline-danger:not(:disabled):not(.disabled).active,\n  .show > .btn-outline-danger.dropdown-toggle {\n    color: #fff;\n    background-color: #dc3545;\n    border-color: #dc3545; }\n    .btn-outline-danger:not(:disabled):not(.disabled):active:focus, .btn-outline-danger:not(:disabled):not(.disabled).active:focus,\n    .show > .btn-outline-danger.dropdown-toggle:focus {\n      box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.5); }\n\n.btn-outline-light {\n  color: #f8f9fa;\n  background-color: transparent;\n  background-image: none;\n  border-color: #f8f9fa; }\n  .btn-outline-light:hover {\n    color: #212529;\n    background-color: #f8f9fa;\n    border-color: #f8f9fa; }\n  .btn-outline-light:focus, .btn-outline-light.focus {\n    box-shadow: 0 0 0 0.2rem rgba(248, 249, 250, 0.5); }\n  .btn-outline-light.disabled, .btn-outline-light:disabled {\n    color: #f8f9fa;\n    background-color: transparent; }\n  .btn-outline-light:not(:disabled):not(.disabled):active, .btn-outline-light:not(:disabled):not(.disabled).active,\n  .show > .btn-outline-light.dropdown-toggle {\n    color: #212529;\n    background-color: #f8f9fa;\n    border-color: #f8f9fa; }\n    .btn-outline-light:not(:disabled):not(.disabled):active:focus, .btn-outline-light:not(:disabled):not(.disabled).active:focus,\n    .show > .btn-outline-light.dropdown-toggle:focus {\n      box-shadow: 0 0 0 0.2rem rgba(248, 249, 250, 0.5); }\n\n.btn-outline-dark {\n  color: #343a40;\n  background-color: transparent;\n  background-image: none;\n  border-color: #343a40; }\n  .btn-outline-dark:hover {\n    color: #fff;\n    background-color: #343a40;\n    border-color: #343a40; }\n  .btn-outline-dark:focus, .btn-outline-dark.focus {\n    box-shadow: 0 0 0 0.2rem rgba(52, 58, 64, 0.5); }\n  .btn-outline-dark.disabled, .btn-outline-dark:disabled {\n    color: #343a40;\n    background-color: transparent; }\n  .btn-outline-dark:not(:disabled):not(.disabled):active, .btn-outline-dark:not(:disabled):not(.disabled).active,\n  .show > .btn-outline-dark.dropdown-toggle {\n    color: #fff;\n    background-color: #343a40;\n    border-color: #343a40; }\n    .btn-outline-dark:not(:disabled):not(.disabled):active:focus, .btn-outline-dark:not(:disabled):not(.disabled).active:focus,\n    .show > .btn-outline-dark.dropdown-toggle:focus {\n      box-shadow: 0 0 0 0.2rem rgba(52, 58, 64, 0.5); }\n\n.btn-link {\n  font-weight: 400;\n  color: #007bff;\n  background-color: transparent; }\n  .btn-link:hover {\n    color: #0056b3;\n    text-decoration: underline;\n    background-color: transparent;\n    border-color: transparent; }\n  .btn-link:focus, .btn-link.focus {\n    text-decoration: underline;\n    border-color: transparent;\n    box-shadow: none; }\n  .btn-link:disabled, .btn-link.disabled {\n    color: #6c757d;\n    pointer-events: none; }\n\n.btn-lg {\n  padding: 0.5rem 1rem;\n  font-size: 1.25rem;\n  line-height: 1.5;\n  border-radius: 0.3rem; }\n\n.btn-sm {\n  padding: 0.25rem 0.5rem;\n  font-size: 0.875rem;\n  line-height: 1.5;\n  border-radius: 0.2rem; }\n\n.btn-block {\n  display: block;\n  width: 100%; }\n  .btn-block + .btn-block {\n    margin-top: 0.5rem; }\n\ninput[type="submit"].btn-block,\ninput[type="reset"].btn-block,\ninput[type="button"].btn-block {\n  width: 100%; }\n\n.input-group {\n  position: relative;\n  display: flex;\n  flex-wrap: wrap;\n  align-items: stretch;\n  width: 100%; }\n  .input-group > .form-control,\n  .input-group > .custom-select,\n  .input-group > .custom-file {\n    position: relative;\n    flex: 1 1 auto;\n    width: 1%;\n    margin-bottom: 0; }\n    .input-group > .form-control + .form-control,\n    .input-group > .form-control + .custom-select,\n    .input-group > .form-control + .custom-file,\n    .input-group > .custom-select + .form-control,\n    .input-group > .custom-select + .custom-select,\n    .input-group > .custom-select + .custom-file,\n    .input-group > .custom-file + .form-control,\n    .input-group > .custom-file + .custom-select,\n    .input-group > .custom-file + .custom-file {\n      margin-left: -1px; }\n  .input-group > .form-control:focus,\n  .input-group > .custom-select:focus,\n  .input-group > .custom-file .custom-file-input:focus ~ .custom-file-label {\n    z-index: 3; }\n  .input-group > .custom-file .custom-file-input:focus {\n    z-index: 4; }\n  .input-group > .form-control:not(:last-child),\n  .input-group > .custom-select:not(:last-child) {\n    border-top-right-radius: 0;\n    border-bottom-right-radius: 0; }\n  .input-group > .form-control:not(:first-child),\n  .input-group > .custom-select:not(:first-child) {\n    border-top-left-radius: 0;\n    border-bottom-left-radius: 0; }\n  .input-group > .custom-file {\n    display: flex;\n    align-items: center; }\n    .input-group > .custom-file:not(:last-child) .custom-file-label,\n    .input-group > .custom-file:not(:last-child) .custom-file-label::after {\n      border-top-right-radius: 0;\n      border-bottom-right-radius: 0; }\n    .input-group > .custom-file:not(:first-child) .custom-file-label {\n      border-top-left-radius: 0;\n      border-bottom-left-radius: 0; }\n\n.input-group-prepend,\n.input-group-append {\n  display: flex; }\n  .input-group-prepend .btn,\n  .input-group-append .btn {\n    position: relative;\n    z-index: 2; }\n  .input-group-prepend .btn + .btn,\n  .input-group-prepend .btn + .input-group-text,\n  .input-group-prepend .input-group-text + .input-group-text,\n  .input-group-prepend .input-group-text + .btn,\n  .input-group-append .btn + .btn,\n  .input-group-append .btn + .input-group-text,\n  .input-group-append .input-group-text + .input-group-text,\n  .input-group-append .input-group-text + .btn {\n    margin-left: -1px; }\n\n.input-group-prepend {\n  margin-right: -1px; }\n\n.input-group-append {\n  margin-left: -1px; }\n\n.input-group-text {\n  display: flex;\n  align-items: center;\n  padding: 0.375rem 0.75rem;\n  margin-bottom: 0;\n  font-size: 1rem;\n  font-weight: 400;\n  line-height: 1.5;\n  color: #495057;\n  text-align: center;\n  white-space: nowrap;\n  background-color: #e9ecef;\n  border: 1px solid #ced4da;\n  border-radius: 0.25rem; }\n  .input-group-text input[type="radio"],\n  .input-group-text input[type="checkbox"] {\n    margin-top: 0; }\n\n.input-group-lg > .form-control,\n.input-group-lg > .input-group-prepend > .input-group-text,\n.input-group-lg > .input-group-append > .input-group-text,\n.input-group-lg > .input-group-prepend > .btn,\n.input-group-lg > .input-group-append > .btn {\n  height: calc(2.875rem + 2px);\n  padding: 0.5rem 1rem;\n  font-size: 1.25rem;\n  line-height: 1.5;\n  border-radius: 0.3rem; }\n\n.input-group-sm > .form-control,\n.input-group-sm > .input-group-prepend > .input-group-text,\n.input-group-sm > .input-group-append > .input-group-text,\n.input-group-sm > .input-group-prepend > .btn,\n.input-group-sm > .input-group-append > .btn {\n  height: calc(1.8125rem + 2px);\n  padding: 0.25rem 0.5rem;\n  font-size: 0.875rem;\n  line-height: 1.5;\n  border-radius: 0.2rem; }\n\n.input-group > .input-group-prepend > .btn,\n.input-group > .input-group-prepend > .input-group-text,\n.input-group > .input-group-append:not(:last-child) > .btn,\n.input-group > .input-group-append:not(:last-child) > .input-group-text,\n.input-group > .input-group-append:last-child > .btn:not(:last-child):not(.dropdown-toggle),\n.input-group > .input-group-append:last-child > .input-group-text:not(:last-child) {\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0; }\n\n.input-group > .input-group-append > .btn,\n.input-group > .input-group-append > .input-group-text,\n.input-group > .input-group-prepend:not(:first-child) > .btn,\n.input-group > .input-group-prepend:not(:first-child) > .input-group-text,\n.input-group > .input-group-prepend:first-child > .btn:not(:first-child),\n.input-group > .input-group-prepend:first-child > .input-group-text:not(:first-child) {\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0; }\n\n.alert {\n  position: relative;\n  padding: 0.75rem 1.25rem;\n  margin-bottom: 1rem;\n  border: 1px solid transparent;\n  border-radius: 0.25rem; }\n\n.alert-heading {\n  color: inherit; }\n\n.alert-link {\n  font-weight: 700; }\n\n.alert-dismissible {\n  padding-right: 4rem; }\n  .alert-dismissible .close {\n    position: absolute;\n    top: 0;\n    right: 0;\n    padding: 0.75rem 1.25rem;\n    color: inherit; }\n\n.alert-primary {\n  color: #004085;\n  background-color: #cce5ff;\n  border-color: #b8daff; }\n  .alert-primary hr {\n    border-top-color: #9fcdff; }\n  .alert-primary .alert-link {\n    color: #002752; }\n\n.alert-secondary {\n  color: #383d41;\n  background-color: #e2e3e5;\n  border-color: #d6d8db; }\n  .alert-secondary hr {\n    border-top-color: #c8cbcf; }\n  .alert-secondary .alert-link {\n    color: #202326; }\n\n.alert-success {\n  color: #155724;\n  background-color: #d4edda;\n  border-color: #c3e6cb; }\n  .alert-success hr {\n    border-top-color: #b1dfbb; }\n  .alert-success .alert-link {\n    color: #0b2e13; }\n\n.alert-info {\n  color: #0c5460;\n  background-color: #d1ecf1;\n  border-color: #bee5eb; }\n  .alert-info hr {\n    border-top-color: #abdde5; }\n  .alert-info .alert-link {\n    color: #062c33; }\n\n.alert-warning {\n  color: #856404;\n  background-color: #fff3cd;\n  border-color: #ffeeba; }\n  .alert-warning hr {\n    border-top-color: #ffe8a1; }\n  .alert-warning .alert-link {\n    color: #533f03; }\n\n.alert-danger {\n  color: #721c24;\n  background-color: #f8d7da;\n  border-color: #f5c6cb; }\n  .alert-danger hr {\n    border-top-color: #f1b0b7; }\n  .alert-danger .alert-link {\n    color: #491217; }\n\n.alert-light {\n  color: #818182;\n  background-color: #fefefe;\n  border-color: #fdfdfe; }\n  .alert-light hr {\n    border-top-color: #ececf6; }\n  .alert-light .alert-link {\n    color: #686868; }\n\n.alert-dark {\n  color: #1b1e21;\n  background-color: #d6d8d9;\n  border-color: #c6c8ca; }\n  .alert-dark hr {\n    border-top-color: #b9bbbe; }\n  .alert-dark .alert-link {\n    color: #040505; }\n\n.close {\n  float: right;\n  font-size: 1.5rem;\n  font-weight: 700;\n  line-height: 1;\n  color: #000;\n  text-shadow: 0 1px 0 #fff;\n  opacity: .5; }\n  .close:not(:disabled):not(.disabled) {\n    cursor: pointer; }\n    .close:not(:disabled):not(.disabled):hover, .close:not(:disabled):not(.disabled):focus {\n      color: #000;\n      text-decoration: none;\n      opacity: .75; }\n\nbutton.close {\n  padding: 0;\n  background-color: transparent;\n  border: 0;\n  -webkit-appearance: none; }\n\n.modal-open {\n  overflow: hidden; }\n  .modal-open .modal {\n    overflow-x: hidden;\n    overflow-y: auto; }\n\n.modal {\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 1050;\n  display: none;\n  overflow: hidden;\n  outline: 0; }\n\n.modal-dialog {\n  position: relative;\n  width: auto;\n  margin: 0.5rem;\n  pointer-events: none; }\n  .modal.fade .modal-dialog {\n    transition: -webkit-transform 0.3s ease-out;\n    transition: transform 0.3s ease-out;\n    transition: transform 0.3s ease-out, -webkit-transform 0.3s ease-out;\n    -webkit-transform: translate(0, -25%);\n            transform: translate(0, -25%); }\n    @media screen and (prefers-reduced-motion: reduce) {\n      .modal.fade .modal-dialog {\n        transition: none; } }\n  .modal.show .modal-dialog {\n    -webkit-transform: translate(0, 0);\n            transform: translate(0, 0); }\n\n.modal-dialog-centered {\n  display: flex;\n  align-items: center;\n  min-height: calc(100% - (0.5rem * 2)); }\n  .modal-dialog-centered::before {\n    display: block;\n    height: calc(100vh - (0.5rem * 2));\n    content: ""; }\n\n.modal-content {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  pointer-events: auto;\n  background-color: #fff;\n  background-clip: padding-box;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  border-radius: 0.3rem;\n  outline: 0; }\n\n.modal-backdrop {\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 1040;\n  background-color: #000; }\n  .modal-backdrop.fade {\n    opacity: 0; }\n  .modal-backdrop.show {\n    opacity: 0.5; }\n\n.modal-header {\n  display: flex;\n  align-items: flex-start;\n  justify-content: space-between;\n  padding: 1rem;\n  border-bottom: 1px solid #e9ecef;\n  border-top-left-radius: 0.3rem;\n  border-top-right-radius: 0.3rem; }\n  .modal-header .close {\n    padding: 1rem;\n    margin: -1rem -1rem -1rem auto; }\n\n.modal-title {\n  margin-bottom: 0;\n  line-height: 1.5; }\n\n.modal-body {\n  position: relative;\n  flex: 1 1 auto;\n  padding: 1rem; }\n\n.modal-footer {\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  padding: 1rem;\n  border-top: 1px solid #e9ecef; }\n  .modal-footer > :not(:first-child) {\n    margin-left: .25rem; }\n  .modal-footer > :not(:last-child) {\n    margin-right: .25rem; }\n\n.modal-scrollbar-measure {\n  position: absolute;\n  top: -9999px;\n  width: 50px;\n  height: 50px;\n  overflow: scroll; }\n\n@media (min-width: 576px) {\n  .modal-dialog {\n    max-width: 500px;\n    margin: 1.75rem auto; }\n  .modal-dialog-centered {\n    min-height: calc(100% - (1.75rem * 2)); }\n    .modal-dialog-centered::before {\n      height: calc(100vh - (1.75rem * 2)); }\n  .modal-sm {\n    max-width: 300px; } }\n\n@media (min-width: 992px) {\n  .modal-lg {\n    max-width: 800px; } }\n\n.tooltip {\n  position: absolute;\n  z-index: 1070;\n  display: block;\n  margin: 0;\n  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";\n  font-style: normal;\n  font-weight: 400;\n  line-height: 1.5;\n  text-align: left; }\n\n[dir="ltr"] .tooltip{\n  text-align: left; }\n\n[dir="rtl"] .tooltip{\n  text-align: right; }\n\n.tooltip {\n  text-decoration: none;\n  text-shadow: none;\n  text-transform: none;\n  letter-spacing: normal;\n  word-break: normal;\n  word-spacing: normal;\n  white-space: normal;\n  line-break: auto;\n  font-size: 0.875rem;\n  word-wrap: break-word;\n  opacity: 0; }\n  .tooltip.show {\n    opacity: 0.9; }\n  .tooltip .arrow {\n    position: absolute;\n    display: block;\n    width: 0.8rem;\n    height: 0.4rem; }\n    .tooltip .arrow::before {\n      position: absolute;\n      content: "";\n      border-color: transparent;\n      border-style: solid; }\n\n.bs-tooltip-top, .bs-tooltip-auto[x-placement^="top"] {\n  padding: 0.4rem 0; }\n  .bs-tooltip-top .arrow, .bs-tooltip-auto[x-placement^="top"] .arrow {\n    bottom: 0; }\n    .bs-tooltip-top .arrow::before, .bs-tooltip-auto[x-placement^="top"] .arrow::before {\n      top: 0;\n      border-width: 0.4rem 0.4rem 0;\n      border-top-color: #000; }\n\n.bs-tooltip-right, .bs-tooltip-auto[x-placement^="right"] {\n  padding: 0 0.4rem; }\n  .bs-tooltip-right .arrow, .bs-tooltip-auto[x-placement^="right"] .arrow {\n    left: 0;\n    width: 0.4rem;\n    height: 0.8rem; }\n    .bs-tooltip-right .arrow::before, .bs-tooltip-auto[x-placement^="right"] .arrow::before {\n      right: 0;\n      border-width: 0.4rem 0.4rem 0.4rem 0;\n      border-right-color: #000; }\n\n.bs-tooltip-bottom, .bs-tooltip-auto[x-placement^="bottom"] {\n  padding: 0.4rem 0; }\n  .bs-tooltip-bottom .arrow, .bs-tooltip-auto[x-placement^="bottom"] .arrow {\n    top: 0; }\n    .bs-tooltip-bottom .arrow::before, .bs-tooltip-auto[x-placement^="bottom"] .arrow::before {\n      bottom: 0;\n      border-width: 0 0.4rem 0.4rem;\n      border-bottom-color: #000; }\n\n.bs-tooltip-left, .bs-tooltip-auto[x-placement^="left"] {\n  padding: 0 0.4rem; }\n  .bs-tooltip-left .arrow, .bs-tooltip-auto[x-placement^="left"] .arrow {\n    right: 0;\n    width: 0.4rem;\n    height: 0.8rem; }\n    .bs-tooltip-left .arrow::before, .bs-tooltip-auto[x-placement^="left"] .arrow::before {\n      left: 0;\n      border-width: 0.4rem 0 0.4rem 0.4rem;\n      border-left-color: #000; }\n\n.tooltip-inner {\n  max-width: 200px;\n  padding: 0.25rem 0.5rem;\n  color: #fff;\n  text-align: center;\n  background-color: #000;\n  border-radius: 0.25rem; }\n\n/* required styles */\n.leaflet-pane,\n.leaflet-tile,\n.leaflet-marker-icon,\n.leaflet-marker-shadow,\n.leaflet-tile-container,\n.leaflet-pane > svg,\n.leaflet-pane > canvas,\n.leaflet-zoom-box,\n.leaflet-image-layer,\n.leaflet-layer {\n  position: absolute;\n  left: 0;\n  top: 0; }\n\n.leaflet-container {\n  overflow: hidden; }\n\n.leaflet-tile,\n.leaflet-marker-icon,\n.leaflet-marker-shadow {\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n      user-select: none;\n  -webkit-user-drag: none; }\n\n/* Safari renders non-retina tile on retina better with this, but Chrome is worse */\n.leaflet-safari .leaflet-tile {\n  image-rendering: -webkit-optimize-contrast; }\n\n/* hack that prevents hw layers "stretching" when loading new tiles */\n.leaflet-safari .leaflet-tile-container {\n  width: 1600px;\n  height: 1600px;\n  -webkit-transform-origin: 0 0; }\n\n.leaflet-marker-icon,\n.leaflet-marker-shadow {\n  display: block; }\n\n/* .leaflet-container svg: reset svg max-width decleration shipped in Joomla! (joomla.org) 3.x */\n/* .leaflet-container img: map is broken in FF if you have max-width: 100% on tiles */\n.leaflet-container .leaflet-overlay-pane svg,\n.leaflet-container .leaflet-marker-pane img,\n.leaflet-container .leaflet-shadow-pane img,\n.leaflet-container .leaflet-tile-pane img,\n.leaflet-container img.leaflet-image-layer {\n  max-width: none !important;\n  max-height: none !important; }\n\n.leaflet-container.leaflet-touch-zoom {\n  touch-action: pan-x pan-y; }\n\n.leaflet-container.leaflet-touch-drag {\n  /* Fallback for FF which doesn\'t support pinch-zoom */\n  touch-action: none;\n  touch-action: pinch-zoom; }\n\n.leaflet-container.leaflet-touch-drag.leaflet-touch-zoom {\n  touch-action: none; }\n\n.leaflet-container {\n  -webkit-tap-highlight-color: transparent; }\n\n.leaflet-container a {\n  -webkit-tap-highlight-color: rgba(51, 181, 229, 0.4); }\n\n.leaflet-tile {\n  -webkit-filter: inherit;\n          filter: inherit;\n  visibility: hidden; }\n\n.leaflet-tile-loaded {\n  visibility: inherit; }\n\n.leaflet-zoom-box {\n  width: 0;\n  height: 0;\n  box-sizing: border-box;\n  z-index: 800; }\n\n/* workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=888319 */\n.leaflet-overlay-pane svg {\n  -moz-user-select: none; }\n\n.leaflet-pane {\n  z-index: 400; }\n\n.leaflet-tile-pane {\n  z-index: 200; }\n\n.leaflet-overlay-pane {\n  z-index: 400; }\n\n.leaflet-shadow-pane {\n  z-index: 500; }\n\n.leaflet-marker-pane {\n  z-index: 600; }\n\n.leaflet-tooltip-pane {\n  z-index: 650; }\n\n.leaflet-popup-pane {\n  z-index: 700; }\n\n.leaflet-map-pane canvas {\n  z-index: 100; }\n\n.leaflet-map-pane svg {\n  z-index: 200; }\n\n.leaflet-vml-shape {\n  width: 1px;\n  height: 1px; }\n\n.lvml {\n  behavior: url(#default#VML);\n  display: inline-block;\n  position: absolute; }\n\n/* control positioning */\n.leaflet-control {\n  position: relative;\n  z-index: 800;\n  pointer-events: visiblePainted;\n  /* IE 9-10 doesn\'t have auto */\n  pointer-events: auto; }\n\n.leaflet-top,\n.leaflet-bottom {\n  position: absolute;\n  z-index: 1000;\n  pointer-events: none; }\n\n.leaflet-top {\n  top: 0; }\n\n.leaflet-right {\n  right: 0; }\n\n.leaflet-bottom {\n  bottom: 0; }\n\n.leaflet-left {\n  left: 0; }\n\n.leaflet-control {\n  float: left;\n  clear: both; }\n\n.leaflet-right .leaflet-control {\n  float: right; }\n\n.leaflet-top .leaflet-control {\n  margin-top: 10px; }\n\n.leaflet-bottom .leaflet-control {\n  margin-bottom: 10px; }\n\n.leaflet-left .leaflet-control {\n  margin-left: 10px; }\n\n.leaflet-right .leaflet-control {\n  margin-right: 10px; }\n\n/* zoom and fade animations */\n.leaflet-fade-anim .leaflet-tile {\n  will-change: opacity; }\n\n.leaflet-fade-anim .leaflet-popup {\n  opacity: 0;\n  transition: opacity 0.2s linear; }\n\n.leaflet-fade-anim .leaflet-map-pane .leaflet-popup {\n  opacity: 1; }\n\n.leaflet-zoom-animated {\n  -webkit-transform-origin: 0 0;\n  transform-origin: 0 0; }\n\n.leaflet-zoom-anim .leaflet-zoom-animated {\n  will-change: transform; }\n\n.leaflet-zoom-anim .leaflet-zoom-animated {\n  transition: -webkit-transform 0.25s cubic-bezier(0, 0, 0.25, 1);\n  transition: transform 0.25s cubic-bezier(0, 0, 0.25, 1);\n  transition: transform 0.25s cubic-bezier(0, 0, 0.25, 1), -webkit-transform 0.25s cubic-bezier(0, 0, 0.25, 1); }\n\n.leaflet-zoom-anim .leaflet-tile,\n.leaflet-pan-anim .leaflet-tile {\n  transition: none; }\n\n.leaflet-zoom-anim .leaflet-zoom-hide {\n  visibility: hidden; }\n\n/* cursors */\n.leaflet-interactive {\n  cursor: pointer; }\n\n.leaflet-grab {\n  cursor: -webkit-grab;\n  cursor: -moz-grab; }\n\n.leaflet-crosshair,\n.leaflet-crosshair .leaflet-interactive {\n  cursor: crosshair; }\n\n.leaflet-popup-pane,\n.leaflet-control {\n  cursor: auto; }\n\n.leaflet-dragging .leaflet-grab,\n.leaflet-dragging .leaflet-grab .leaflet-interactive,\n.leaflet-dragging .leaflet-marker-draggable {\n  cursor: move;\n  cursor: -webkit-grabbing;\n  cursor: -moz-grabbing; }\n\n/* marker & overlays interactivity */\n.leaflet-marker-icon,\n.leaflet-marker-shadow,\n.leaflet-image-layer,\n.leaflet-pane > svg path,\n.leaflet-tile-container {\n  pointer-events: none; }\n\n.leaflet-marker-icon.leaflet-interactive,\n.leaflet-image-layer.leaflet-interactive,\n.leaflet-pane > svg path.leaflet-interactive {\n  pointer-events: visiblePainted;\n  /* IE 9-10 doesn\'t have auto */\n  pointer-events: auto; }\n\n/* visual tweaks */\n.leaflet-container {\n  background: #ddd;\n  outline: 0; }\n\n.leaflet-container a {\n  color: #0078A8; }\n\n.leaflet-container a.leaflet-active {\n  outline: 2px solid orange; }\n\n.leaflet-zoom-box {\n  border: 2px dotted #38f;\n  background: rgba(255, 255, 255, 0.5); }\n\n/* general typography */\n.leaflet-container {\n  font: 12px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif; }\n\n/* general toolbar styles */\n.leaflet-bar {\n  box-shadow: 0 1px 5px rgba(0, 0, 0, 0.65);\n  border-radius: 4px; }\n\n.leaflet-bar a,\n.leaflet-bar a:hover {\n  background-color: #fff;\n  border-bottom: 1px solid #ccc;\n  width: 26px;\n  height: 26px;\n  line-height: 26px;\n  display: block;\n  text-align: center;\n  text-decoration: none;\n  color: black; }\n\n.leaflet-bar a,\n.leaflet-control-layers-toggle {\n  background-position: 50% 50%;\n  background-repeat: no-repeat;\n  display: block; }\n\n.leaflet-bar a:hover {\n  background-color: #f4f4f4; }\n\n.leaflet-bar a:first-child {\n  border-top-left-radius: 4px;\n  border-top-right-radius: 4px; }\n\n.leaflet-bar a:last-child {\n  border-bottom-left-radius: 4px;\n  border-bottom-right-radius: 4px;\n  border-bottom: none; }\n\n.leaflet-bar a.leaflet-disabled {\n  cursor: default;\n  background-color: #f4f4f4;\n  color: #bbb; }\n\n.leaflet-touch .leaflet-bar a {\n  width: 30px;\n  height: 30px;\n  line-height: 30px; }\n\n.leaflet-touch .leaflet-bar a:first-child {\n  border-top-left-radius: 2px;\n  border-top-right-radius: 2px; }\n\n.leaflet-touch .leaflet-bar a:last-child {\n  border-bottom-left-radius: 2px;\n  border-bottom-right-radius: 2px; }\n\n/* zoom control */\n.leaflet-control-zoom-in,\n.leaflet-control-zoom-out {\n  font: bold 18px \'Lucida Console\', Monaco, monospace;\n  text-indent: 1px; }\n\n.leaflet-touch .leaflet-control-zoom-in, .leaflet-touch .leaflet-control-zoom-out {\n  font-size: 22px; }\n\n/* layers control */\n.leaflet-control-layers {\n  box-shadow: 0 1px 5px rgba(0, 0, 0, 0.4);\n  background: #fff;\n  border-radius: 5px; }\n\n.leaflet-control-layers-toggle {\n  background-image: url('+i(n(16))+");\n  width: 36px;\n  height: 36px; }\n\n.leaflet-retina .leaflet-control-layers-toggle {\n  background-image: url("+i(n(17))+");\n  background-size: 26px 26px; }\n\n.leaflet-touch .leaflet-control-layers-toggle {\n  width: 44px;\n  height: 44px; }\n\n.leaflet-control-layers .leaflet-control-layers-list,\n.leaflet-control-layers-expanded .leaflet-control-layers-toggle {\n  display: none; }\n\n.leaflet-control-layers-expanded .leaflet-control-layers-list {\n  display: block;\n  position: relative; }\n\n.leaflet-control-layers-expanded {\n  padding: 6px 10px 6px 6px;\n  color: #333;\n  background: #fff; }\n\n.leaflet-control-layers-scrollbar {\n  overflow-y: scroll;\n  overflow-x: hidden;\n  padding-right: 5px; }\n\n.leaflet-control-layers-selector {\n  margin-top: 2px;\n  position: relative;\n  top: 1px; }\n\n.leaflet-control-layers label {\n  display: block; }\n\n.leaflet-control-layers-separator {\n  height: 0;\n  border-top: 1px solid #ddd;\n  margin: 5px -10px 5px -6px; }\n\n/* Default icon URLs */\n.leaflet-default-icon-path {\n  background-image: url("+i(n(18))+"); }\n\n/* attribution and scale controls */\n.leaflet-container .leaflet-control-attribution {\n  background: #fff;\n  background: rgba(255, 255, 255, 0.7);\n  margin: 0; }\n\n.leaflet-control-attribution,\n.leaflet-control-scale-line {\n  padding: 0 5px;\n  color: #333; }\n\n.leaflet-control-attribution a {\n  text-decoration: none; }\n\n.leaflet-control-attribution a:hover {\n  text-decoration: underline; }\n\n.leaflet-container .leaflet-control-attribution,\n.leaflet-container .leaflet-control-scale {\n  font-size: 11px; }\n\n.leaflet-left .leaflet-control-scale {\n  margin-left: 5px; }\n\n.leaflet-bottom .leaflet-control-scale {\n  margin-bottom: 5px; }\n\n.leaflet-control-scale-line {\n  border: 2px solid #777;\n  border-top: none;\n  line-height: 1.1;\n  padding: 2px 5px 1px;\n  font-size: 11px;\n  white-space: nowrap;\n  overflow: hidden;\n  box-sizing: border-box;\n  background: #fff;\n  background: rgba(255, 255, 255, 0.5); }\n\n.leaflet-control-scale-line:not(:first-child) {\n  border-top: 2px solid #777;\n  border-bottom: none;\n  margin-top: -2px; }\n\n.leaflet-control-scale-line:not(:first-child):not(:last-child) {\n  border-bottom: 2px solid #777; }\n\n.leaflet-touch .leaflet-control-attribution,\n.leaflet-touch .leaflet-control-layers,\n.leaflet-touch .leaflet-bar {\n  box-shadow: none; }\n\n.leaflet-touch .leaflet-control-layers,\n.leaflet-touch .leaflet-bar {\n  border: 2px solid rgba(0, 0, 0, 0.2);\n  background-clip: padding-box; }\n\n/* popup */\n.leaflet-popup {\n  position: absolute;\n  text-align: center;\n  margin-bottom: 20px; }\n\n.leaflet-popup-content-wrapper {\n  padding: 1px;\n  text-align: left;\n  border-radius: 12px; }\n\n.leaflet-popup-content {\n  margin: 13px 19px;\n  line-height: 1.4; }\n\n.leaflet-popup-content p {\n  margin: 18px 0; }\n\n.leaflet-popup-tip-container {\n  width: 40px;\n  height: 20px;\n  position: absolute;\n  left: 50%;\n  margin-left: -20px;\n  overflow: hidden;\n  pointer-events: none; }\n\n.leaflet-popup-tip {\n  width: 17px;\n  height: 17px;\n  padding: 1px;\n  margin: -10px auto 0;\n  -webkit-transform: rotate(45deg);\n  transform: rotate(45deg); }\n\n.leaflet-popup-content-wrapper,\n.leaflet-popup-tip {\n  background: white;\n  color: #333;\n  box-shadow: 0 3px 14px rgba(0, 0, 0, 0.4); }\n\n.leaflet-container a.leaflet-popup-close-button {\n  position: absolute;\n  top: 0;\n  right: 0;\n  padding: 4px 4px 0 0;\n  border: none;\n  text-align: center;\n  width: 18px;\n  height: 14px;\n  font: 16px/14px Tahoma, Verdana, sans-serif;\n  color: #c3c3c3;\n  text-decoration: none;\n  font-weight: bold;\n  background: transparent; }\n\n.leaflet-container a.leaflet-popup-close-button:hover {\n  color: #999; }\n\n.leaflet-popup-scrolled {\n  overflow: auto;\n  border-bottom: 1px solid #ddd;\n  border-top: 1px solid #ddd; }\n\n.leaflet-oldie .leaflet-popup-content-wrapper {\n  zoom: 1; }\n\n.leaflet-oldie .leaflet-popup-tip {\n  width: 24px;\n  margin: 0 auto;\n  -ms-filter: \"progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)\";\n  filter: progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678); }\n\n.leaflet-oldie .leaflet-popup-tip-container {\n  margin-top: -1px; }\n\n.leaflet-oldie .leaflet-control-zoom,\n.leaflet-oldie .leaflet-control-layers,\n.leaflet-oldie .leaflet-popup-content-wrapper,\n.leaflet-oldie .leaflet-popup-tip {\n  border: 1px solid #999; }\n\n/* div icon */\n.leaflet-div-icon {\n  background: #fff;\n  border: 1px solid #666; }\n\n/* Tooltip */\n/* Base styles for the element that has a tooltip */\n.leaflet-tooltip {\n  position: absolute;\n  padding: 6px;\n  background-color: #fff;\n  border: 1px solid #fff;\n  border-radius: 3px;\n  color: #222;\n  white-space: nowrap;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  pointer-events: none;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.4); }\n\n.leaflet-tooltip.leaflet-clickable {\n  cursor: pointer;\n  pointer-events: auto; }\n\n.leaflet-tooltip-top:before,\n.leaflet-tooltip-bottom:before,\n.leaflet-tooltip-left:before,\n.leaflet-tooltip-right:before {\n  position: absolute;\n  pointer-events: none;\n  border: 6px solid transparent;\n  background: transparent;\n  content: \"\"; }\n\n/* Directions */\n.leaflet-tooltip-bottom {\n  margin-top: 6px; }\n\n.leaflet-tooltip-top {\n  margin-top: -6px; }\n\n.leaflet-tooltip-bottom:before,\n.leaflet-tooltip-top:before {\n  left: 50%;\n  margin-left: -6px; }\n\n.leaflet-tooltip-top:before {\n  bottom: 0;\n  margin-bottom: -12px;\n  border-top-color: #fff; }\n\n.leaflet-tooltip-bottom:before {\n  top: 0;\n  margin-top: -12px;\n  margin-left: -6px;\n  border-bottom-color: #fff; }\n\n.leaflet-tooltip-left {\n  margin-left: -6px; }\n\n.leaflet-tooltip-right {\n  margin-left: 6px; }\n\n.leaflet-tooltip-left:before,\n.leaflet-tooltip-right:before {\n  top: 50%;\n  margin-top: -6px; }\n\n.leaflet-tooltip-left:before {\n  right: 0;\n  margin-right: -12px;\n  border-left-color: #fff; }\n\n.leaflet-tooltip-right:before {\n  left: 0;\n  margin-left: -12px;\n  border-right-color: #fff; }\n\n.leaflet-sidebar {\n  position: absolute;\n  height: 100%;\n  box-sizing: border-box;\n  padding: 10px;\n  z-index: 2000; }\n\n.leaflet-sidebar.left {\n  left: -500px;\n  transition: left 0.5s, width 0.5s;\n  padding-right: 0; }\n\n.leaflet-sidebar.left.visible {\n  left: 0; }\n\n.leaflet-sidebar.right {\n  right: -500px;\n  transition: right 0.5s, width 0.5s;\n  padding-left: 0; }\n\n.leaflet-sidebar.right.visible {\n  right: 0; }\n\n.leaflet-sidebar > .leaflet-control {\n  height: 100%;\n  width: 100%;\n  overflow: auto;\n  -webkit-overflow-scrolling: touch;\n  box-sizing: border-box;\n  padding: 8px 24px;\n  font-size: 1.1em;\n  background: white;\n  box-shadow: 0 1px 7px rgba(0, 0, 0, 0.65);\n  border-radius: 4px; }\n\n.leaflet-touch .leaflet-sidebar > .leaflet-control {\n  box-shadow: none;\n  border: 2px solid rgba(0, 0, 0, 0.2);\n  background-clip: padding-box; }\n\n@media (max-width: 767px) {\n  .leaflet-sidebar {\n    width: 100%;\n    padding: 0; }\n  .leaflet-sidebar.left.visible ~ .leaflet-left {\n    left: 100%; }\n  .leaflet-sidebar.right.visible ~ .leaflet-right {\n    right: 100%; }\n  .leaflet-sidebar.left {\n    left: -100%; }\n  .leaflet-sidebar.left.visible {\n    left: 0; }\n  .leaflet-sidebar.right {\n    right: -100%; }\n  .leaflet-sidebar.right.visible {\n    right: 0; }\n  .leaflet-sidebar > .leaflet-control {\n    box-shadow: none;\n    border-radius: 0; }\n  .leaflet-touch .leaflet-sidebar > .leaflet-control {\n    border: 0; } }\n\n@media (min-width: 768px) and (max-width: 991px) {\n  .leaflet-sidebar {\n    width: 305px; }\n  .leaflet-sidebar.left.visible ~ .leaflet-left {\n    left: 305px; }\n  .leaflet-sidebar.right.visible ~ .leaflet-right {\n    right: 305px; } }\n\n@media (min-width: 992px) and (max-width: 1199px) {\n  .leaflet-sidebar {\n    width: 390px; }\n  .leaflet-sidebar.left.visible ~ .leaflet-left {\n    left: 390px; }\n  .leaflet-sidebar.right.visible ~ .leaflet-right {\n    right: 390px; } }\n\n@media (min-width: 1200px) {\n  .leaflet-sidebar {\n    width: 460px; }\n  .leaflet-sidebar.left.visible ~ .leaflet-left {\n    left: 460px; }\n  .leaflet-sidebar.right.visible ~ .leaflet-right {\n    right: 460px; } }\n\n.leaflet-sidebar .close {\n  position: absolute;\n  right: 20px;\n  top: 20px;\n  width: 31px;\n  height: 31px;\n  color: #333;\n  font-size: 4em;\n  line-height: 1em;\n  text-align: center;\n  background: white;\n  border-radius: 16px;\n  cursor: pointer;\n  z-index: 900; }\n\n.leaflet-left {\n  transition: left 0.5s; }\n\n.leaflet-right {\n  transition: right 0.5s; }\n\n.leaflet-control-locate a {\n  font-size: 1.4em;\n  color: #444;\n  cursor: pointer; }\n\n.leaflet-control-locate.active a {\n  color: #2074B6; }\n\n.leaflet-control-locate.active.following a {\n  color: #FC8428; }\n@font-face {\n  font-family: 'fontello';\n  /*\r\n\r\n  src: url('../font/fontello.eot?70026594');\r\n  src: url('../font/fontello.eot?70026594#iefix') format('embedded-opentype'),\r\n       url('../font/fontello.woff2?70026594') format('woff2'),\r\n       url('../font/fontello.woff?70026594') format('woff'),\r\n       url('../font/fontello.ttf?70026594') format('truetype'),\r\n       url('../font/fontello.svg?70026594#fontello') format('svg');\r\n*/\n  src: url("+i(n(19))+');\n  src: url("/fontello/font/fontello.eot?70026594#iefix") format("embedded-opentype"), url('+i(n(20))+') format("woff2"), url('+i(n(21))+') format("woff"), url('+i(n(22))+') format("truetype"), url('+i(n(23))+"#fontello) format(\"svg\");\n  font-weight: normal;\n  font-style: normal; }\n\n/* Chrome hack: SVG is rendered more smooth in Windozze. 100% magic, uncomment if you need it. */\n/* Note, that will break hinting! In other OS-es font will be not as sharp as it could be */\n/*\r\n@media screen and (-webkit-min-device-pixel-ratio:0) {\r\n  @font-face {\r\n    font-family: 'fontello';\r\n    src: url('../font/fontello.svg?70026594#fontello') format('svg');\r\n  }\r\n}\r\n*/\n[class^=\"icon-\"]:before, [class*=\" icon-\"]:before {\n  font-family: \"fontello\";\n  font-style: normal;\n  font-weight: normal;\n  speak: none;\n  display: inline-block;\n  text-decoration: inherit;\n  width: 1em;\n  margin-right: .2em;\n  text-align: center;\n  /* opacity: .8; */\n  /* For safety - reset parent styles, that can break glyph codes*/\n  -webkit-font-feature-settings: normal;\n          font-feature-settings: normal;\n  font-variant: normal;\n  text-transform: none;\n  /* fix buttons height, for twitter bootstrap */\n  line-height: 1em;\n  /* Animation center compensation - margins should be symmetric */\n  /* remove if not needed */\n  margin-left: .2em;\n  /* you can be more comfortable with increased icons size */\n  /* font-size: 120%; */\n  /* Font smoothing. That was taken from TWBS */\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  /* Uncomment for 3D effect */\n  /* text-shadow: 1px 1px 1px rgba(127, 127, 127, 0.3); */ }\n\n.icon-camera:before {\n  content: '\\E800'; }\n\n/* '' */\n.icon-ok:before {\n  content: '\\E801'; }\n\n/* '' */\n.icon-emo-unhappy:before {\n  content: '\\E802'; }\n\n/* '' */\n.icon-plus:before {\n  content: '\\E803'; }\n\n/* '' */\n.icon-pencil:before {\n  content: '\\E804'; }\n\n/* '' */\n.icon-cog:before {\n  content: '\\E805'; }\n\n/* '' */\n.icon-cancel:before {\n  content: '\\E806'; }\n\n/* '' */\n.icon-upload-cloud-1:before {\n  content: '\\E807'; }\n\n/* '' */\n.icon-download:before {\n  content: '\\E808'; }\n\n/* '' */\n.icon-download-outline:before {\n  content: '\\E809'; }\n\n/* '' */\n.icon-rss:before {\n  content: '\\F09E'; }\n\n/* '' */\n.icon-download-cloud:before {\n  content: '\\F0ED'; }\n\n/* '' */\n.icon-upload-cloud:before {\n  content: '\\F0EE'; }\n\n/* '' */\n.icon-direction:before {\n  content: '\\F124'; }\n\n/* '' */\n.icon-trash:before {\n  content: '\\F1F8'; }\n\n/* '' */\n.icon-map-o:before {\n  content: '\\F278'; }\n\n/* '' */\n.icon-user-circle-o:before {\n  content: '\\F2BE'; }\n\n/* '' */\n#mapid {\n  height: 800px; }\n\n/*\r\n.custom-control,\r\n.custom-control2 {\r\n    width: 150px;\r\n    height: 30px;\r\n    font-size: 1.5em;\r\n    margin: auto;\r\n    text-align: center;\r\n    background-color: brown;\r\n    color: white;\r\n}\r\n\r\n.custom-control::before,\r\n.custom-control2::before {\r\n    content: 'Settings';\r\n}\r\n\r\n*/\n/*\r\n.custom-control:hover,\r\n.custom-control2:hover\r\n {\r\n    background-color: #ea3737;\r\n}\r\n\r\n*/\n#fields-section tr:nth-child(even) {\n  background-color: #f2f2f2; }\n\n#fields-section tr {\n  line-height: 0.2em; }\n\n#submit-form {\n  /* float: right; */ }\n\n#task-completed input {\n  width: 1em;\n  height: 1em;\n  position: relative; }\n\nlabel#task-completed {\n  font-size: 1.5em;\n  margin-left: 1em; }\n\nbody {\n  padding: 0;\n  margin: 0; }\n\nhtml,\nbody,\n#map {\n  height: 100%;\n  width: 100%; }\n\n.leaflet-sidebar.left {\n  transition: left 0.2s, width 0.2s !important; }\n\nh1.sidebar-heading {\n  text-align: center;\n  margin-bottom: 2em;\n  font-size: 1.2em; }\n\n.leaflet-tooltip.leaflet-clickable {\n  padding-top: 1px;\n  padding-bottom: 1px;\n  border-radius: 8px; }\n\nbutton.btn.btn-primary.open-project-button {\n  margin: 0.5em; }\n\nh2.sidebar-sub-heading {\n  font-size: 1.2em;\n  background-color: #ababab;\n  color: white;\n  padding: 0.3em; }\n\n.leaflet-bar a.save-tiles-button,\n.leaflet-bar a.remove-tiles-button {\n  width: 9em; }\n\n.leaflet-bar a.save-tiles-button {\n  background-color: #17a2b8;\n  color: white;\n  width: 9em; }\n\n.leaflet-bar a.remove-tiles-button {\n  color: darkred;\n  width: 9em; }\n\n.watermark {\n  background-color: none;\n  width: 10em; }\n\n/* ----------------- animated cog ---- */\n\n@-webkit-keyframes spin {\n  from {\n    -webkit-transform: rotate(0deg); }\n  to {\n    -webkit-transform: rotate(360deg); } }\n\n@keyframes spin {\n  from {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg); }\n  to {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg); } }\n\n.icon-cog-spin:before {\n  -webkit-animation-name: spin;\n  -webkit-animation-duration: 2000ms;\n  -webkit-animation-iteration-count: infinite;\n  -webkit-animation-timing-function: linear;\n  -moz-animation-name: spin;\n  -moz-animation-duration: 2000ms;\n  -moz-animation-iteration-count: infinite;\n  -moz-animation-timing-function: linear;\n  -ms-animation-name: spin;\n  -ms-animation-duration: 2000ms;\n  -ms-animation-iteration-count: infinite;\n  -ms-animation-timing-function: linear;\n  animation-name: spin;\n  animation-duration: 2000ms;\n  animation-iteration-count: infinite;\n  animation-timing-function: linear; }\n\n.icon-cog:before {\n  font-size: 1.5em; }\n\n.left-spacing {\n  margin-left: 0.2em; }\n\n.dropdown {\n  position: relative;\n  display: inline-block; }\n\n.dropdown-button {\n  box-shadow: 8px 8px 7px 0px rgba(0, 0, 0, 0.5);\n  margin-top: 0.4em;\n  margin-left: 2em; }\n\n.dropdown-content {\n  display: none;\n  position: absolute; }\n\n.dropdown:hover .dropdown-content {\n  display: block;\n  z-indez: 50000; }\n\n.info-window-button {\n  padding: 3px 15px 3px 15px;\n  font-size: 1.6em;\n  border-radius: 5px; }\n",""])},function(t,e){t.exports=function(t){return"string"!=typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),/["'() \t\n]/.test(t)?'"'+t.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':t)}},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",i=t[3];if(!i)return n;if(e&&"function"==typeof btoa){var o=(a=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),r=i.sources.map(function(t){return"/*# sourceURL="+i.sourceRoot+t+" */"});return[n].concat(r).concat([o]).join("\n")}var a;return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},o=0;o<this.length;o++){var r=this[o][0];"number"==typeof r&&(i[r]=!0)}for(o=0;o<t.length;o++){var a=t[o];"number"==typeof a[0]&&i[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(t,e,n){t.exports=n.p+"images/layers.png"},function(t,e,n){t.exports=n.p+"images/layers-2x.png"},function(t,e,n){t.exports=n.p+"images/marker-icon.png"},function(t,e,n){t.exports=n.p+"fontello/font/fontello.eot"},function(t,e,n){t.exports=n.p+"fontello/font/fontello.woff2"},function(t,e,n){t.exports=n.p+"fontello/font/fontello.woff"},function(t,e,n){t.exports=n.p+"fontello/font/fontello.ttf"},function(t,e,n){t.exports=n.p+"fontello/font/fontello.svg"},function(t,e,n){var i,o,r={},a=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=i.apply(this,arguments)),o}),s=function(t){var e={};return function(t){if("function"==typeof t)return t();if(void 0===e[t]){var n=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),l=null,u=0,c=[],h=n(25);function d(t,e){for(var n=0;n<t.length;n++){var i=t[n],o=r[i.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](i.parts[a]);for(;a<i.parts.length;a++)o.parts.push(_(i.parts[a],e))}else{var s=[];for(a=0;a<i.parts.length;a++)s.push(_(i.parts[a],e));r[i.id]={id:i.id,refs:1,parts:s}}}}function f(t,e){for(var n=[],i={},o=0;o<t.length;o++){var r=t[o],a=e.base?r[0]+e.base:r[0],s={css:r[1],media:r[2],sourceMap:r[3]};i[a]?i[a].parts.push(s):n.push(i[a]={id:a,parts:[s]})}return n}function p(t,e){var n=s(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=c[c.length-1];if("top"===t.insertAt)i?i.nextSibling?n.insertBefore(e,i.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),c.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=s(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,o)}}function m(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=c.indexOf(t);e>=0&&c.splice(e,1)}function v(t){var e=document.createElement("style");return void 0===t.attrs.type&&(t.attrs.type="text/css"),g(e,t.attrs),p(t,e),e}function g(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function _(t,e){var n,i,o,r;if(e.transform&&t.css){if(!(r=e.transform(t.css)))return function(){};t.css=r}if(e.singleton){var a=u++;n=l||(l=v(e)),i=w.bind(null,n,a,!1),o=w.bind(null,n,a,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",g(e,t.attrs),p(t,e),e}(e),i=function(t,e,n){var i=n.css,o=n.sourceMap,r=void 0===e.convertToAbsoluteUrls&&o;(e.convertToAbsoluteUrls||r)&&(i=h(i));o&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([i],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,e),o=function(){m(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(e),i=function(t,e){var n=e.css,i=e.media;i&&t.setAttribute("media",i);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),o=function(){m(n)});return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else o()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=a()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=f(t,e);return d(n,e),function(t){for(var i=[],o=0;o<n.length;o++){var a=n[o];(s=r[a.id]).refs--,i.push(s)}t&&d(f(t,e),e);for(o=0;o<i.length;o++){var s;if(0===(s=i[o]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete r[s.id]}}}};var y,b=(y=[],function(t,e){return y[t]=e,y.filter(Boolean).join("\n")});function w(t,e,n,i){var o=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=b(e,o);else{var r=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(r,a[e]):t.appendChild(r)}}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,i=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var o,r=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r)?t:(o=0===r.indexOf("//")?r:0===r.indexOf("/")?n+r:i+r.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},function(t,e,n){"use strict";var i,o,r;o=[n(27),n(28)],void 0===(r="function"==typeof(i=function(t,e){})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){"use strict";var i,o,r;window,o=[n(1)],void 0===(r="function"==typeof(i=function(t){t.TileLayer.Offline=t.TileLayer.extend({initialize:function(e,n,i){this._url=e,this._tilesDb=n,(i=t.Util.setOptions(this,i)).detectRetina&&t.Browser.retina&&i.maxZoom>0&&(i.tileSize=Math.floor(i.tileSize/2),i.zoomReverse?(i.zoomOffset--,i.minZoom++):(i.zoomOffset++,i.maxZoom--),i.minZoom=Math.max(0,i.minZoom)),"string"==typeof i.subdomains&&(i.subdomains=i.subdomains.split("")),t.Browser.android||this.on("tileunload",this._onTileRemove)},createTile:function(e,n){var i=document.createElement("img");return t.DomEvent.on(i,"load",t.bind(this._tileOnLoad,this,n,i)),t.DomEvent.on(i,"error",t.bind(this._tileOnError,this,n,i)),this.options.crossOrigin&&(i.crossOrigin=""),i.alt="",i.setAttribute("role","presentation"),this.getTileUrl(e).then(function(t){i.src=t}).catch(function(t){throw t}),i},getTileUrl:function(e){var n=t.TileLayer.prototype.getTileUrl.call(this,e),i=this._getStorageKey(n),o=this._tilesDb.getItem(i).then(function(t){return t&&"object"==typeof t?URL.createObjectURL(t):n}).catch(function(t){throw t});return o},getTileUrls:function(e,n){var i=[],o=this._url;this.setUrl(this._url.replace("{z}",n),!0);for(var r=t.bounds(e.min.divideBy(this.getTileSize().x).floor(),e.max.divideBy(this.getTileSize().x).floor()),a=r.min.x;a<=r.max.x;a++)for(var s=r.min.y;s<=r.max.y;s++){var l=new t.Point(a,s),u=t.TileLayer.prototype.getTileUrl.call(this,l);i.push({key:this._getStorageKey(u),url:u})}return this.setUrl(o,!0),i},_getStorageKey:function(t){var e=null;if(t.indexOf("{s}")){var n=new RegExp("["+this.options.subdomains.join("|")+"].");e=t.replace(n,this.options.subdomains[0]+".")}return e||t}}),t.tileLayer.offline=function(e,n,i){return new t.TileLayer.Offline(e,n,i)}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){"use strict";var i,o,r;window,o=[n(1)],void 0===(r="function"==typeof(i=function(t){t.Control.Offline=t.Control.extend({options:{position:"topleft",saveButtonHtml:"S",saveButtonTitle:"Save tiles",removeButtonHtml:"R",removeButtonTitle:"Remove tiles",minZoom:0,maxZoom:19,confirmSavingCallback:null,confirmRemovalCallback:null},initialize:function(e,n,i){this._baseLayer=e,this._tilesDb=n,t.Util.setOptions(this,i)},onAdd:function(e){var n=t.DomUtil.create("div","leaflet-control-offline leaflet-bar");return this._createButton(this.options.saveButtonHtml,this.options.saveButtonTitle,"save-tiles-button",n,this._saveTiles),this._createButton(this.options.removeButtonHtml,this.options.removeButtonTitle,"remove-tiles-button",n,this._removeTiles),n},_createButton:function(e,n,i,o,r){var a=t.DomUtil.create("a",i,o);return a.innerHTML=e,a.href="#",a.title=n,t.DomEvent.disableClickPropagation(a),t.DomEvent.on(a,"click",t.DomEvent.stop),t.DomEvent.on(a,"click",r,this),t.DomEvent.on(a,"click",this._refocusOnMap,this),a},_saveTiles:function(){var e=this,n=null,i=[],o=[],r=this._map.getZoom(),a=this._map.getBounds();if(r<this.options.minZoom)e._baseLayer.fire("offline:below-min-zoom-error");else{for(var s=r;s<=this.options.maxZoom;s++)i.push(s);for(var l=0;l<i.length;l++)n=t.bounds(this._map.project(a.getNorthWest(),i[l]),this._map.project(a.getSouthEast(),i[l])),o=o.concat(this._baseLayer.getTileUrls(n,i[l]));var u=function(){e._baseLayer.fire("offline:save-start",{nTilesToSave:o.length}),e._tilesDb.saveTiles(o).then(function(){e._baseLayer.fire("offline:save-end")}).catch(function(t){e._baseLayer.fire("offline:save-error",{error:t})})};this.options.confirmSavingCallback?this.options.confirmSavingCallback(o.length,u):u()}},_removeTiles:function(){var t=this,e=function(){t._baseLayer.fire("offline:remove-start"),t._tilesDb.clear().then(function(){t._baseLayer.fire("offline:remove-end")}).catch(function(e){t._baseLayer.fire("offline:remove-error",{error:e})})};t.options.confirmRemovalCallback?t.options.confirmRemovalCallback(e):e()}}),t.control.offline=function(e,n,i){return new t.Control.Offline(e,n,i)}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){t.exports=n.p+"ORCL-logo-cropped.png"},function(t,e,n){var i=n(31);t.exports=function(t){"use strict";if(!(t instanceof L.GeoJSON))throw new Error("must be L.GeoJSON");var e=[];t.eachLayer(function(t){e=e.concat(function(t,e){for(var n=[],i=0;i<t.length;i++)n.push({lon:t[i][0],lat:t[i][1],layer:e});return n}(function(t){var e=0,n=0,i=0,o=[];if("object"==typeof t[0]&&"object"==typeof t[0][0]&&"object"==typeof t[0][0][0]){for(;e<t.length;e++)for(;n<t[e].length;n++)for(;i<t[e][n].length;i++)o.push(t[e][n][i]);return o}if("object"==typeof t[0]&&"object"==typeof t[0][0]){for(;e<t.length;e++)for(;n<t[e].length;n++)o.push(t[e][n]);return o}return"object"==typeof t[0]?t:[t]}(t.feature.geometry.coordinates),t))});var n=i(e);return n.nearest=function(t,e,i){return t instanceof L.LatLng&&(t=[t.lng,t.lat]),n(t[1],t[0],e,i)},n.nearestLayer=function(t,e,i){return t instanceof L.LatLng&&(t=[t.lng,t.lat]),function(t){for(var e=[],n={},i=0;i<t.length;i++)null==n[L.stamp(t[i].layer)]&&(e.push(t[i]),n[L.stamp(t[i].layer)]=!0);return e}(n(t[1],t[0],e,i))},n}},function(t,e,n){var i=n(32);t.exports=function(t){var e=i.build(t);return function(t,n,o,r){return i.lookup(t,n,e,o,r)}}},function(t,e,n){var i=n(33),o=Math.PI/180,r=1/12742018;function a(t,e){t*=o,e*=o;var n=Math.cos(t);return[n*Math.cos(e),Math.sin(t),n*Math.sin(e)]}function s(t){var e,n;t.hasOwnProperty("lat")?e=t.lat:t.hasOwnProperty("latitude")?e=t.latitude:t.hasOwnProperty("location")&&Array.isArray(t.location)&&2===t.location.length&&(e=t.location[0]),t.hasOwnProperty("lon")?n=t.lon:t.hasOwnProperty("longitude")?n=t.longitude:t.hasOwnProperty("lng")?n=t.lng:t.hasOwnProperty("long")?n=t.long:t.hasOwnProperty("location")&&Array.isArray(t.location)&&2===t.location.length&&(n=t.location[1]),this.object=t,this.position=a(e,n)}e.build=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=new s(t[e]);return i.build(n)},e.lookup=function(t,e,n,o,s){for(var l=i.lookup(a(t,e),n,o,s>0?2*Math.sin(s*r):void 0),u=l.length;u--;)l[u]=l[u].object;return l}},function(t,e,n){var i=n(34);function o(t,e,n,i){this.axis=t,this.split=e,this.left=n,this.right=i}function r(t,e){for(var n,i=Math.min(t.length,e.length),o=0;i--;)o+=(n=e[i]-t[i])*n;return o}function a(t,e){return t.dist-e.dist}e.build=function(t){return function t(e,n){if(0===e.length)return null;if(1===e.length)return e[0];var i=n%e[0].position.length;e.sort(function(t,e){return t.position[i]-e.position[i]});var r=Math.floor(.5*e.length);return++n,new o(i,e[r].position[i],t(e.slice(0,r),n),t(e.slice(r),n))}(t,0)},e.lookup=function(t,e,n,s){s>0||(s=Number.POSITIVE_INFINITY);var l=[];if(null===e||n<=0)return l;for(var u,c,h=[e,0];h.length;)if(u=h.pop(),e=h.pop(),!(u>s||l.length===n&&l[l.length-1].dist<u*u)){for(;e instanceof o;)t[e.axis]<e.split?(h.push(e.right,e.split-t[e.axis]),e=e.left):(h.push(e.left,t[e.axis]-e.split),e=e.right);(u=r(t,e.position))<=s*s&&i.insert({object:e,dist:u},l,a),l.length>n&&l.pop()}for(c=l.length;c--;)l[c]=l[c].object;return l}},function(t,e){function n(t,e){return t-e}e.search=function(t,e,i){i||(i=n);for(var o,r,a=0,s=e.length-1;a<=s;)if((r=i(e[o=a+s>>>1],t))<0)a=o+1;else{if(!(r>0))return o;s=o-1}return-(a+1)},e.insert=function(t,n,i){var o=e.search(t,n,i);o<0&&(o=-(o+1)),n.splice(o,0,t)}},function(t,e,n){t.exports=n.p+"fontello/font/fontello.ttf"},function(t,e){L.Control.Sidebar=L.Control.extend({includes:L.Evented.prototype||L.Mixin.Events,options:{closeButton:!0,position:"left",autoPan:!0},initialize:function(t,e){L.setOptions(this,e);var n=this._contentContainer=L.DomUtil.get(t);n.parentNode.removeChild(n);var i="leaflet-",o=this._container=L.DomUtil.create("div",i+"sidebar "+this.options.position);(L.DomUtil.addClass(n,i+"control"),o.appendChild(n),this.options.closeButton)&&((this._closeButton=L.DomUtil.create("a","close",o)).innerHTML="&times;")},addTo:function(t){var e=this._container,n=this._contentContainer;if(this.options.closeButton){var i=this._closeButton;L.DomEvent.on(i,"click",this.hide,this)}L.DomEvent.on(e,"transitionend",this._handleTransitionEvent,this).on(e,"webkitTransitionEnd",this._handleTransitionEvent,this);var o=t._controlContainer;o.insertBefore(e,o.firstChild),this._map=t;var r=L.DomEvent.stopPropagation,a=L.DomEvent._fakeStop||r;return L.DomEvent.on(n,"contextmenu",r).on(n,"click",a).on(n,"mousedown",r).on(n,"touchstart",r).on(n,"dblclick",a).on(n,"mousewheel",r).on(n,"MozMousePixelScroll",r),this},removeFrom:function(t){this.hide();var e=this._container,n=this._contentContainer;t._controlContainer.removeChild(e),this._map=null;var i=L.DomEvent.stopPropagation,o=L.DomEvent._fakeStop||i;if(L.DomEvent.off(n,"contextmenu",i).off(n,"click",o).off(n,"mousedown",i).off(n,"touchstart",i).off(n,"dblclick",o).off(n,"mousewheel",i).off(n,"MozMousePixelScroll",i),L.DomEvent.off(e,"transitionend",this._handleTransitionEvent,this).off(e,"webkitTransitionEnd",this._handleTransitionEvent,this),this._closeButton&&this._close){var r=this._closeButton;L.DomEvent.off(r,"click",this.hide,this)}return this},isVisible:function(){return L.DomUtil.hasClass(this._container,"visible")},show:function(){this.isVisible()||(L.DomUtil.addClass(this._container,"visible"),this.options.autoPan&&this._map.panBy([-this.getOffset()/2,0],{duration:.5}),this.fire("show"))},hide:function(t){this.isVisible()&&(L.DomUtil.removeClass(this._container,"visible"),this.options.autoPan&&this._map.panBy([this.getOffset()/2,0],{duration:.5}),this.fire("hide")),t&&L.DomEvent.stopPropagation(t)},toggle:function(){this.isVisible()?this.hide():this.show()},getContainer:function(){return this._contentContainer},getCloseButton:function(){return this._closeButton},setContent:function(t){var e=this.getContainer();if("string"==typeof t)e.innerHTML=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(t)}return this},getOffset:function(){return"right"===this.options.position?-this._container.offsetWidth:this._container.offsetWidth},_handleTransitionEvent:function(t){"left"!=t.propertyName&&"right"!=t.propertyName||this.fire(this.isVisible()?"shown":"hidden")}}),L.control.sidebar=function(t,e){return new L.Control.Sidebar(t,e)}},function(t,e,n){var i,o,r,a,s;function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
/*! Version: 0.62.0
Copyright (c) 2016 Dominik Moritz */a=function(t){var e=function(e,n,i){(i=i.split(" ")).forEach(function(i){t.DomUtil[e].call(this,n,i)})},n=function(t,n){e("addClass",t,n)},i=function(t,n){e("removeClass",t,n)},o=t.Control.extend({options:{position:"topleft",layer:void 0,setView:"untilPan",keepCurrentZoomLevel:!1,flyTo:!1,clickBehavior:{inView:"stop",outOfView:"setView"},returnToPrevBounds:!1,cacheLocation:!0,drawCircle:!0,drawMarker:!0,markerClass:t.CircleMarker,circleStyle:{color:"#136AEC",fillColor:"#136AEC",fillOpacity:.15,weight:2,opacity:.5},markerStyle:{color:"#136AEC",fillColor:"#2A93EE",fillOpacity:.7,weight:2,opacity:.9,radius:5},followCircleStyle:{},followMarkerStyle:{},icon:"fa fa-map-marker",iconLoading:"fa fa-spinner fa-spin",iconElementTag:"span",circlePadding:[0,0],metric:!0,createButtonCallback:function(e,n){var i=t.DomUtil.create("a","leaflet-bar-part leaflet-bar-part-single",e);return i.title=n.strings.title,{link:i,icon:t.DomUtil.create(n.iconElementTag,n.icon,i)}},onLocationError:function(t,e){alert(t.message)},onLocationOutsideMapBounds:function(t){t.stop(),alert(t.options.strings.outsideMapBoundsMsg)},showPopup:!0,strings:{title:"Show me where I am",metersUnit:"meters",feetUnit:"feet",popup:"You are within {distance} {unit} from this point",outsideMapBoundsMsg:"You seem located outside the boundaries of the map"},locateOptions:{maxZoom:1/0,watch:!0,setView:!1}},initialize:function(e){for(var n in e)"object"==l(this.options[n])?t.extend(this.options[n],e[n]):this.options[n]=e[n];this.options.followMarkerStyle=t.extend({},this.options.markerStyle,this.options.followMarkerStyle),this.options.followCircleStyle=t.extend({},this.options.circleStyle,this.options.followCircleStyle)},onAdd:function(e){var n=t.DomUtil.create("div","leaflet-control-locate leaflet-bar leaflet-control");this._layer=this.options.layer||new t.LayerGroup,this._layer.addTo(e),this._event=void 0,this._prevBounds=null;var i=this.options.createButtonCallback(n,this.options);return this._link=i.link,this._icon=i.icon,t.DomEvent.on(this._link,"click",t.DomEvent.stopPropagation).on(this._link,"click",t.DomEvent.preventDefault).on(this._link,"click",this._onClick,this).on(this._link,"dblclick",t.DomEvent.stopPropagation),this._resetVariables(),this._map.on("unload",this._unload,this),n},_onClick:function(){if(this._justClicked=!0,this._userPanned=!1,this._active&&!this._event)this.stop();else if(this._active&&void 0!==this._event)switch(this._map.getBounds().contains(this._event.latlng)?this.options.clickBehavior.inView:this.options.clickBehavior.outOfView){case"setView":this.setView();break;case"stop":this.stop(),this.options.returnToPrevBounds&&(this.options.flyTo?this._map.flyToBounds:this._map.fitBounds).bind(this._map)(this._prevBounds)}else this.options.returnToPrevBounds&&(this._prevBounds=this._map.getBounds()),this.start();this._updateContainerStyle()},start:function(){this._activate(),this._event&&(this._drawMarker(this._map),this.options.setView&&this.setView()),this._updateContainerStyle()},stop:function(){this._deactivate(),this._cleanClasses(),this._resetVariables(),this._removeMarker()},_activate:function(){this._active||(this._map.locate(this.options.locateOptions),this._active=!0,this._map.on("locationfound",this._onLocationFound,this),this._map.on("locationerror",this._onLocationError,this),this._map.on("dragstart",this._onDrag,this))},_deactivate:function(){this._map.stopLocate(),this._active=!1,this.options.cacheLocation||(this._event=void 0),this._map.off("locationfound",this._onLocationFound,this),this._map.off("locationerror",this._onLocationError,this),this._map.off("dragstart",this._onDrag,this)},setView:function(){if(this._drawMarker(),this._isOutsideMapBounds())this._event=void 0,this.options.onLocationOutsideMapBounds(this);else if(this.options.keepCurrentZoomLevel)(t=this.options.flyTo?this._map.flyTo:this._map.panTo).bind(this._map)([this._event.latitude,this._event.longitude]);else{var t=this.options.flyTo?this._map.flyToBounds:this._map.fitBounds;t.bind(this._map)(this._event.bounds,{padding:this.options.circlePadding,maxZoom:this.options.locateOptions.maxZoom})}},_drawMarker:function(){void 0===this._event.accuracy&&(this._event.accuracy=0);var e,n,i=this._event.accuracy,o=this._event.latlng;if(this.options.drawCircle){var r=this._isFollowing()?this.options.followCircleStyle:this.options.circleStyle;this._circle?this._circle.setLatLng(o).setRadius(i).setStyle(r):this._circle=t.circle(o,i,r).addTo(this._layer)}if(this.options.metric?(e=i.toFixed(0),n=this.options.strings.metersUnit):(e=(3.2808399*i).toFixed(0),n=this.options.strings.feetUnit),this.options.drawMarker){var a=this._isFollowing()?this.options.followMarkerStyle:this.options.markerStyle;this._marker?(this._marker.setLatLng(o),this._marker.setStyle&&this._marker.setStyle(a)):this._marker=new this.options.markerClass(o,a).addTo(this._layer)}var s=this.options.strings.popup;this.options.showPopup&&s&&this._marker&&this._marker.bindPopup(t.Util.template(s,{distance:e,unit:n}))._popup.setLatLng(o)},_removeMarker:function(){this._layer.clearLayers(),this._marker=void 0,this._circle=void 0},_unload:function(){this.stop(),this._map.off("unload",this._unload,this)},_onLocationError:function(t){3==t.code&&this.options.locateOptions.watch||(this.stop(),this.options.onLocationError(t,this))},_onLocationFound:function(t){if((!this._event||this._event.latlng.lat!==t.latlng.lat||this._event.latlng.lng!==t.latlng.lng||this._event.accuracy!==t.accuracy)&&this._active){switch(this._event=t,this._drawMarker(),this._updateContainerStyle(),this.options.setView){case"once":this._justClicked&&this.setView();break;case"untilPan":this._userPanned||this.setView();break;case"always":this.setView()}this._justClicked=!1}},_onDrag:function(){this._event&&(this._userPanned=!0,this._updateContainerStyle(),this._drawMarker())},_isFollowing:function(){return!!this._active&&("always"===this.options.setView||("untilPan"===this.options.setView?!this._userPanned:void 0))},_isOutsideMapBounds:function(){return void 0!==this._event&&this._map.options.maxBounds&&!this._map.options.maxBounds.contains(this._event.latlng)},_updateContainerStyle:function(){this._container&&(this._active&&!this._event?this._setClasses("requesting"):this._isFollowing()?this._setClasses("following"):this._active?this._setClasses("active"):this._cleanClasses())},_setClasses:function(t){"requesting"==t?(i(this._container,"active following"),n(this._container,"requesting"),i(this._icon,this.options.icon),n(this._icon,this.options.iconLoading)):"active"==t?(i(this._container,"requesting following"),n(this._container,"active"),i(this._icon,this.options.iconLoading),n(this._icon,this.options.icon)):"following"==t&&(i(this._container,"requesting"),n(this._container,"active following"),i(this._icon,this.options.iconLoading),n(this._icon,this.options.icon))},_cleanClasses:function(){t.DomUtil.removeClass(this._container,"requesting"),t.DomUtil.removeClass(this._container,"active"),t.DomUtil.removeClass(this._container,"following"),i(this._icon,this.options.iconLoading),n(this._icon,this.options.icon)},_resetVariables:function(){this._active=!1,this._justClicked=!1,this._userPanned=!1}});return t.control.locate=function(e){return new t.Control.Locate(e)},o},s=window,o=[n(1)],void 0!==(r="function"==typeof(i=a)?i.apply(e,o):i)&&(t.exports=r),void 0!==s&&s.L&&(s.L.Control.Locate=a(L))},function(t,e,n){"use strict";(function(t){var e=n(0),i=n.n(e);(function(){var t,e=e||{},n=this;function o(t){return"string"==typeof t}function r(t){return"boolean"==typeof t}function a(){}function s(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function l(t){return null===t}function u(t){return"array"==s(t)}function c(t){var e=s(t);return"array"==e||"object"==e&&"number"==typeof t.length}function h(t){return"function"==s(t)}function d(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var f="closure_uid_"+(1e9*Math.random()>>>0),p=0;function m(t,e,n){return t.call.apply(t.bind,arguments)}function v(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function g(t,e,n){return(g=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?m:v).apply(null,arguments)}function _(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var y=Date.now||function(){return+new Date};function b(t,e){function n(){}n.prototype=e.prototype,t.nb=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ed=function(t,n,i){for(var o=Array(arguments.length-2),r=2;r<arguments.length;r++)o[r-2]=arguments[r];return e.prototype[n].apply(t,o)}}function w(t){t.prototype.then=t.prototype.then,t.prototype.$goog_Thenable=!0}function E(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function S(t){if(Error.captureStackTrace)Error.captureStackTrace(this,S);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function C(t,e){for(var n="",i=(t=t.split("%s")).length-1,o=0;o<i;o++)n+=t[o]+(o<e.length?e[o]:"%s");S.call(this,n+t[i])}function x(t,e){throw new C("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function T(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function k(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function I(){this.b=this.a=null}b(S,Error),S.prototype.name="CustomError",b(C,S),C.prototype.name="AssertionError",T.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var P=new T(function(){return new A},function(t){t.reset()});function L(){var t=ft,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function A(){this.next=this.b=this.a=null}I.prototype.add=function(t,e){var n=P.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},A.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},A.prototype.reset=function(){this.next=this.b=this.a=null};var O=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(o(t))return o(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},N=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var i=t.length,r=o(t)?t.split(""):t,a=0;a<i;a++)a in r&&e.call(n,r[a],a,t)};var R=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,i=Array(n),r=o(t)?t.split(""):t,a=0;a<n;a++)a in r&&(i[a]=e.call(void 0,r[a],a,t));return i},D=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,i=o(t)?t.split(""):t,r=0;r<n;r++)if(r in i&&e.call(void 0,i[r],r,t))return!0;return!1};function M(t,e){return 0<=O(t,e)}function F(t,e){var n;return(n=0<=(e=O(t,e)))&&Array.prototype.splice.call(t,e,1),n}function j(t,e){!function(t,e){var n=t.length,i=o(t)?t.split(""):t;for(--n;0<=n;--n)n in i&&e.call(void 0,i[n],n,t)}(t,function(n,i){e.call(void 0,n,i,t)&&1==Array.prototype.splice.call(t,i,1).length&&0})}function B(t){return Array.prototype.concat.apply([],arguments)}function z(t){var e=t.length;if(0<e){for(var n=Array(e),i=0;i<e;i++)n[i]=t[i];return n}return[]}function U(t,e){for(var n=t.split("%s"),i="",o=Array.prototype.slice.call(arguments,1);o.length&&1<n.length;)i+=n.shift()+o.shift();return i+n.join("%s")}var W=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function V(t){return X.test(t)?(-1!=t.indexOf("&")&&(t=t.replace(q,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(Z,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(K,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(G,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(Q,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(Y,"&#0;")),t):t}var H,q=/&/g,Z=/</g,K=/>/g,G=/"/g,Q=/'/g,Y=/\x00/g,X=/[\x00&<>"']/;function J(t,e){return-1!=t.indexOf(e)}function $(t,e){return t<e?-1:t>e?1:0}t:{var tt=n.navigator;if(tt){var et=tt.userAgent;if(et){H=et;break t}}H=""}function nt(t){return J(H,t)}function it(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ot(t){for(var e in t)return!1;return!0}function rt(t){var e,n={};for(e in t)n[e]=t[e];return n}var at,st,lt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ut(t,e){for(var n,i,o=1;o<arguments.length;o++){for(n in i=arguments[o])t[n]=i[n];for(var r=0;r<lt.length;r++)n=lt[r],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function ct(t){n.setTimeout(function(){throw t},0)}function ht(t,e){st||function(){if(n.Promise&&n.Promise.resolve){var t=n.Promise.resolve(void 0);st=function(){t.then(pt)}}else st=function(){var t=pt;!h(n.setImmediate)||n.Window&&n.Window.prototype&&!nt("Edge")&&n.Window.prototype.setImmediate==n.setImmediate?(at||(at=function(){var t=n.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!nt("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(""),t.close();var n="callImmediate"+Math.random(),i="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=g(function(t){"*"!=i&&t.origin!=i||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,i)}}}),void 0!==t&&!nt("Trident")&&!nt("MSIE")){var e=new t,i={},o=i;return e.port1.onmessage=function(){if(void 0!==i.next){var t=(i=i.next).vb;i.vb=null,t()}},function(t){o.next={vb:t},o=o.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){n.setTimeout(t,0)}}()),at(t)):n.setImmediate(t)}}(),dt||(st(),dt=!0),ft.add(t,e)}var dt=!1,ft=new I;function pt(){for(var t;t=L();){try{t.a.call(t.b)}catch(t){ct(t)}k(P,t)}dt=!1}function mt(t,e){if(this.a=vt,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=a)try{var n=this;t.call(e,function(t){kt(n,gt,t)},function(t){if(!(t instanceof Rt))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}kt(n,_t,t)})}catch(t){kt(this,_t,t)}}var vt=0,gt=2,_t=3;function yt(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}yt.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var bt=new T(function(){return new yt},function(t){t.reset()});function wt(t,e,n){var i=bt.get();return i.g=t,i.b=e,i.f=n,i}function Et(t){if(t instanceof mt)return t;var e=new mt(a);return kt(e,gt,t),e}function St(t){return new mt(function(e,n){n(t)})}function Ct(t,e,n){It(t,e,n,null)||ht(_(e,t))}function xt(t,e){t.b||t.a!=gt&&t.a!=_t||Pt(t),t.f?t.f.next=e:t.b=e,t.f=e}function Tt(t,e,n,i){var o=wt(null,null,null);return o.a=new mt(function(t,r){o.g=e?function(n){try{var o=e.call(i,n);t(o)}catch(t){r(t)}}:t,o.b=n?function(e){try{var o=n.call(i,e);void 0===o&&e instanceof Rt?r(e):t(o)}catch(t){r(t)}}:r}),o.a.c=t,xt(t,o),o.a}function kt(t,e,n){t.a==vt&&(t===n&&(e=_t,n=new TypeError("Promise cannot resolve to itself")),t.a=1,It(n,t.Nc,t.Oc,t)||(t.i=n,t.a=e,t.c=null,Pt(t),e!=_t||n instanceof Rt||function(t,e){t.g=!0,ht(function(){t.g&&Nt.call(null,e)})}(t,n)))}function It(t,e,n,i){if(t instanceof mt)return xt(t,wt(e||a,n||null,i)),!0;if(E(t))return t.then(e,n,i),!0;if(d(t))try{var o=t.then;if(h(o))return function(t,e,n,i,o){function r(t){a||(a=!0,i.call(o,t))}var a=!1;try{e.call(t,function(t){a||(a=!0,n.call(o,t))},r)}catch(t){r(t)}}(t,o,e,n,i),!0}catch(t){return n.call(i,t),!0}return!1}function Pt(t){t.h||(t.h=!0,ht(t.Wb,t))}function Lt(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function At(t,e,n,i){if(n==_t&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Ot(e,n,i);else try{e.c?e.g.call(e.f):Ot(e,n,i)}catch(t){Nt.call(null,t)}k(bt,e)}function Ot(t,e,n){e==gt?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}mt.prototype.then=function(t,e,n){return Tt(this,h(t)?t:null,h(e)?e:null,n)},w(mt),(t=mt.prototype).ia=function(t,e){return(t=wt(t,t,e)).c=!0,xt(this,t),this},t.s=function(t,e){return Tt(this,null,t,e)},t.cancel=function(t){this.a==vt&&ht(function(){!function t(e,n){if(e.a==vt)if(e.c){var i=e.c;if(i.b){for(var o=0,r=null,a=null,s=i.b;s&&(s.c||(o++,s.a==e&&(r=s),!(r&&1<o)));s=s.next)r||(a=s);r&&(i.a==vt&&1==o?t(i,n):(a?((o=a).next==i.f&&(i.f=o),o.next=o.next.next):Lt(i),At(i,r,_t,n)))}e.c=null}else kt(e,_t,n)}(this,new Rt(t))},this)},t.Nc=function(t){this.a=vt,kt(this,gt,t)},t.Oc=function(t){this.a=vt,kt(this,_t,t)},t.Wb=function(){for(var t;t=Lt(this);)At(this,t,this.a,this.i);this.h=!1};var Nt=ct;function Rt(t){S.call(this,t)}function Dt(){0!=Mt&&(Ft[this[f]||(this[f]=++p)]=this),this.pa=this.pa,this.ja=this.ja}b(Rt,S),Rt.prototype.name="cancel";var Mt=0,Ft={};function jt(t){if(!t.pa&&(t.pa=!0,t.ua(),0!=Mt)){var e=t[f]||(t[f]=++p);if(0!=Mt&&t.ja&&0<t.ja.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Ft[e]}}function Bt(t){return Bt[" "](t),t}Dt.prototype.pa=!1,Dt.prototype.ua=function(){if(this.ja)for(;this.ja.length;)this.ja.shift()()},Bt[" "]=a;var zt,Ut,Wt=nt("Opera"),Vt=nt("Trident")||nt("MSIE"),Ht=nt("Edge"),qt=Ht||Vt,Zt=nt("Gecko")&&!(J(H.toLowerCase(),"webkit")&&!nt("Edge"))&&!(nt("Trident")||nt("MSIE"))&&!nt("Edge"),Kt=J(H.toLowerCase(),"webkit")&&!nt("Edge");function Gt(){var t=n.document;return t?t.documentMode:void 0}t:{var Qt="",Yt=(Ut=H,Zt?/rv:([^\);]+)(\)|;)/.exec(Ut):Ht?/Edge\/([\d\.]+)/.exec(Ut):Vt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ut):Kt?/WebKit\/(\S+)/.exec(Ut):Wt?/(?:Version)[ \/]?(\S+)/.exec(Ut):void 0);if(Yt&&(Qt=Yt?Yt[1]:""),Vt){var Xt=Gt();if(null!=Xt&&Xt>parseFloat(Qt)){zt=String(Xt);break t}}zt=Qt}var Jt,$t={};function te(t){return function(t,e){var n=$t;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(){for(var e=0,n=W(String(zt)).split("."),i=W(String(t)).split("."),o=Math.max(n.length,i.length),r=0;0==e&&r<o;r++){var a=n[r]||"",s=i[r]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=$(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||$(0==a[2].length,0==s[2].length)||$(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e})}var ee=n.document;Jt=ee&&Vt?Gt()||("CSS1Compat"==ee.compatMode?parseInt(zt,10):5):void 0;var ne=Object.freeze||function(t){return t},ie=!Vt||9<=Number(Jt),oe=Vt&&!te("9"),re=function(){if(!n.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});return n.addEventListener("test",a,e),n.removeEventListener("test",a,e),t}();function ae(t,e){this.type=t,this.b=this.target=e,this.Ib=!0}function se(t,e){if(ae.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,i=t.changedTouches?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Zt){t:{try{Bt(e.nodeName);var r=!0;break t}catch(t){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,null===i?(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=o(t.pointerType)?t.pointerType:le[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}ae.prototype.preventDefault=function(){this.Ib=!1},b(se,ae);var le=ne({2:"touch",3:"pen",4:"mouse"});se.prototype.preventDefault=function(){se.nb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,oe)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},se.prototype.f=function(){return this.a};var ue="closure_listenable_"+(1e6*Math.random()|0),ce=0;function he(t,e,n,i,o){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.La=o,this.key=++ce,this.na=this.Ia=!1}function de(t){t.na=!0,t.listener=null,t.proxy=null,t.src=null,t.La=null}function fe(t){this.src=t,this.a={},this.b=0}function pe(t,e){var n=e.type;n in t.a&&F(t.a[n],e)&&(de(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function me(t,e,n,i){for(var o=0;o<t.length;++o){var r=t[o];if(!r.na&&r.listener==e&&r.capture==!!n&&r.La==i)return o}return-1}fe.prototype.add=function(t,e,n,i,o){var r=t.toString();(t=this.a[r])||(t=this.a[r]=[],this.b++);var a=me(t,e,i,o);return-1<a?(e=t[a],n||(e.Ia=!1)):((e=new he(e,this.src,r,!!i,o)).Ia=n,t.push(e)),e};var ve="closure_lm_"+(1e6*Math.random()|0),ge={};function _e(t,e,n,i,o){if(i&&i.once)be(t,e,n,i,o);else if(u(e))for(var r=0;r<e.length;r++)_e(t,e[r],n,i,o);else n=Pe(n),t&&t[ue]?Ae(t,e,n,d(i)?!!i.capture:!!i,o):ye(t,e,n,!1,i,o)}function ye(t,e,n,i,o,r){if(!e)throw Error("Invalid event type");var a=d(o)?!!o.capture:!!o,s=ke(t);if(s||(t[ve]=s=new fe(t)),!(n=s.add(e,n,i,a,r)).proxy){if(i=function(){var t=Te,e=ie?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)re||(o=a),void 0===o&&(o=!1),t.addEventListener(e.toString(),i,o);else if(t.attachEvent)t.attachEvent(Se(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}0}}function be(t,e,n,i,o){if(u(e))for(var r=0;r<e.length;r++)be(t,e[r],n,i,o);else n=Pe(n),t&&t[ue]?Oe(t,e,n,d(i)?!!i.capture:!!i,o):ye(t,e,n,!0,i,o)}function we(t,e,n,i,o){if(u(e))for(var r=0;r<e.length;r++)we(t,e[r],n,i,o);else i=d(i)?!!i.capture:!!i,n=Pe(n),t&&t[ue]?(t=t.m,(e=String(e).toString())in t.a&&(-1<(n=me(r=t.a[e],n,i,o))&&(de(r[n]),Array.prototype.splice.call(r,n,1),0==r.length&&(delete t.a[e],t.b--)))):t&&(t=ke(t))&&(e=t.a[e.toString()],t=-1,e&&(t=me(e,n,i,o)),(n=-1<t?e[t]:null)&&Ee(n))}function Ee(t){if("number"!=typeof t&&t&&!t.na){var e=t.src;if(e&&e[ue])pe(e.m,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(Se(n),i):e.addListener&&e.removeListener&&e.removeListener(i),0,(n=ke(e))?(pe(n,t),0==n.b&&(n.src=null,e[ve]=null)):de(t)}}}function Se(t){return t in ge?ge[t]:ge[t]="on"+t}function Ce(t,e,n,i){var o=!0;if((t=ke(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var r=e[t];r&&r.capture==n&&!r.na&&(r=xe(r,i),o=o&&!1!==r)}return o}function xe(t,e){var n=t.listener,i=t.La||t.src;return t.Ia&&Ee(t),n.call(i,e)}function Te(t,e){if(t.na)return!0;if(!ie){if(!e)t:{e=["window","event"];for(var i=n,o=0;o<e.length;o++)if(null==(i=i[e[o]])){e=null;break t}e=i}if(e=new se(o=e,this),i=!0,!(0>o.keyCode||null!=o.returnValue)){t:{var r=!1;if(0==o.keyCode)try{o.keyCode=-1;break t}catch(t){r=!0}(r||null==o.returnValue)&&(o.returnValue=!0)}for(o=[],r=e.b;r;r=r.parentNode)o.push(r);for(t=t.type,r=o.length-1;0<=r;r--){e.b=o[r];var a=Ce(o[r],t,!0,e);i=i&&a}for(r=0;r<o.length;r++)e.b=o[r],a=Ce(o[r],t,!1,e),i=i&&a}return i}return xe(t,new se(e,this))}function ke(t){return(t=t[ve])instanceof fe?t:null}var Ie="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pe(t){return h(t)?t:(t[Ie]||(t[Ie]=function(e){return t.handleEvent(e)}),t[Ie])}function Le(){Dt.call(this),this.m=new fe(this),this.Pb=this,this.Ua=null}function Ae(t,e,n,i,o){t.m.add(String(e),n,!1,i,o)}function Oe(t,e,n,i,o){t.m.add(String(e),n,!0,i,o)}function Ne(t,e,n,i){if(!(e=t.m.a[String(e)]))return!0;e=e.concat();for(var o=!0,r=0;r<e.length;++r){var a=e[r];if(a&&!a.na&&a.capture==n){var s=a.listener,l=a.La||a.src;a.Ia&&pe(t.m,a),o=!1!==s.call(l,i)&&o}}return o&&0!=i.Ib}function Re(t,e,i){if(h(t))i&&(t=g(t,i));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=g(t.handleEvent,t)}return 2147483647<Number(e)?-1:n.setTimeout(t,e||0)}function De(t){var e=null;return new mt(function(n,i){-1==(e=Re(function(){n(void 0)},t))&&i(Error("Failed to schedule timer."))}).s(function(t){throw n.clearTimeout(e),t})}function Me(t){if(t.S&&"function"==typeof t.S)return t.S();if(o(t))return t.split("");if(c(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}function Fe(t){if(t.U&&"function"==typeof t.U)return t.U();if(!t.S||"function"!=typeof t.S){if(c(t)||o(t)){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var i in e=[],n=0,t)e[n++]=i;return e}}function je(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(t)if(t instanceof je)for(n=t.U(),i=0;i<n.length;i++)this.set(n[i],t.get(n[i]));else for(i in t)this.set(i,t[i])}function Be(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var i=t.a[e];ze(t.b,i)&&(t.a[n++]=i),e++}t.a.length=n}if(t.c!=t.a.length){var o={};for(n=e=0;e<t.a.length;)ze(o,i=t.a[e])||(t.a[n++]=i,o[i]=1),e++;t.a.length=n}}function ze(t,e){return Object.prototype.hasOwnProperty.call(t,e)}b(Le,Dt),Le.prototype[ue]=!0,Le.prototype.addEventListener=function(t,e,n,i){_e(this,t,e,n,i)},Le.prototype.removeEventListener=function(t,e,n,i){we(this,t,e,n,i)},Le.prototype.dispatchEvent=function(t){var e,n=this.Ua;if(n)for(e=[];n;n=n.Ua)e.push(n);n=this.Pb;var i=t.type||t;if(o(t))t=new ae(t,n);else if(t instanceof ae)t.target=t.target||n;else{var r=t;ut(t=new ae(i,n),r)}if(r=!0,e)for(var a=e.length-1;0<=a;a--){var s=t.b=e[a];r=Ne(s,i,!0,t)&&r}if(r=Ne(s=t.b=n,i,!0,t)&&r,r=Ne(s,i,!1,t)&&r,e)for(a=0;a<e.length;a++)r=Ne(s=t.b=e[a],i,!1,t)&&r;return r},Le.prototype.ua=function(){if(Le.nb.ua.call(this),this.m){var t,e=this.m;for(t in e.a){for(var n=e.a[t],i=0;i<n.length;i++)0,de(n[i]);delete e.a[t],e.b--}}this.Ua=null},(t=je.prototype).S=function(){Be(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.U=function(){return Be(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return ze(this.b,t)?this.b[t]:e},t.set=function(t,e){ze(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.U(),i=0;i<n.length;i++){var o=n[i],r=this.get(o);t.call(e,r,o,this)}};var Ue=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function We(t,e){if(this.b=this.m=this.c="",this.i=null,this.h=this.g="",this.f=!1,t instanceof We){this.f=void 0!==e?e:t.f,Ve(this,t.c),this.m=t.m,this.b=t.b,He(this,t.i),this.g=t.g,e=t.a;var n=new rn;n.c=e.c,e.a&&(n.a=new je(e.a),n.b=e.b),qe(this,n),this.h=t.h}else t&&(n=String(t).match(Ue))?(this.f=!!e,Ve(this,n[1]||"",!0),this.m=Ye(n[2]||""),this.b=Ye(n[3]||"",!0),He(this,n[4]),this.g=Ye(n[5]||"",!0),qe(this,n[6]||"",!0),this.h=Ye(n[7]||"")):(this.f=!!e,this.a=new rn(null,this.f))}function Ve(t,e,n){t.c=n?Ye(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function He(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.i=e}else t.i=null}function qe(t,e,n){e instanceof rn?(t.a=e,function(t,e){e&&!t.f&&(an(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(ln(this,e),cn(this,n,t))},t)),t.f=e}(t.a,t.f)):(n||(e=Xe(e,nn)),t.a=new rn(e,t.f))}function Ze(t,e,n){t.a.set(e,n)}function Ke(t,e){return t.a.get(e)}function Ge(t){return t instanceof We?new We(t):new We(t,void 0)}function Qe(t,e){var n=new We(null,void 0);return Ve(n,"https"),t&&(n.b=t),e&&(n.g=e),n}function Ye(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Xe(t,e,n){return o(t)?(t=encodeURI(t).replace(e,Je),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Je(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}We.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Xe(e,$e,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.m)&&t.push(Xe(e,$e,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&t.push(":",String(n))),(n=this.g)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(Xe(n,"/"==n.charAt(0)?en:tn,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Xe(n,on)),t.join("")};var $e=/[#\/\?@]/g,tn=/[#\?:]/g,en=/[#\?]/g,nn=/[#\?@]/g,on=/#/g;function rn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function an(t){t.a||(t.a=new je,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),o=null;if(0<=i){var r=t[n].substring(0,i);o=t[n].substring(i+1)}else r=t[n];e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function sn(t){var e=Fe(t);if(void 0===e)throw Error("Keys are undefined");var n=new rn(null,void 0);t=Me(t);for(var i=0;i<e.length;i++){var o=e[i],r=t[i];u(r)?cn(n,o,r):n.add(o,r)}return n}function ln(t,e){an(t),e=hn(t,e),ze(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,ze((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Be(t)))}function un(t,e){return an(t),e=hn(t,e),ze(t.a.b,e)}function cn(t,e,n){ln(t,e),0<n.length&&(t.c=null,t.a.set(hn(t,e),z(n)),t.b+=n.length)}function hn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(t=rn.prototype).add=function(t,e){an(this),this.c=null,t=hn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){an(this),this.a.forEach(function(n,i){N(n,function(n){t.call(e,n,i,this)},this)},this)},t.U=function(){an(this);for(var t=this.a.S(),e=this.a.U(),n=[],i=0;i<e.length;i++)for(var o=t[i],r=0;r<o.length;r++)n.push(e[i]);return n},t.S=function(t){an(this);var e=[];if(o(t))un(this,t)&&(e=B(e,this.a.get(hn(this,t))));else{t=this.a.S();for(var n=0;n<t.length;n++)e=B(e,t[n])}return e},t.set=function(t,e){return an(this),this.c=null,un(this,t=hn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return 0<(t=t?this.S(t):[]).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.U(),n=0;n<e.length;n++){var i=e[n],o=encodeURIComponent(String(i));i=this.S(i);for(var r=0;r<i.length;r++){var a=o;""!==i[r]&&(a+="="+encodeURIComponent(String(i[r]))),t.push(a)}}return this.c=t.join("&")};var dn=!Vt||9<=Number(Jt);function fn(){this.a="",this.b=mn}function pn(t){return t instanceof fn&&t.constructor===fn&&t.b===mn?t.a:(x("expected object of type Const, got '"+t+"'"),"type_error:Const")}fn.prototype.ma=!0,fn.prototype.la=function(){return this.a},fn.prototype.toString=function(){return"Const{"+this.a+"}"};var mn={};function vn(t){var e=new fn;return e.a=t,e}function gn(){this.a="",this.b=En}function _n(t){return t instanceof gn&&t.constructor===gn&&t.b===En?t.a:(x("expected object of type TrustedResourceUrl, got '"+t+"' of type "+s(t)),"type_error:TrustedResourceUrl")}function yn(t,e){var n=pn(t);if(!wn.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=new gn;return e.a=t,e}(t=n.replace(bn,function(t,i){if(!Object.prototype.hasOwnProperty.call(e,i))throw Error('Found marker, "'+i+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[i])instanceof fn?pn(t):encodeURIComponent(String(t))}))}vn(""),gn.prototype.ma=!0,gn.prototype.la=function(){return this.a},gn.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var bn=/%{(\w+)}/g,wn=/^(?:https:)?\/\/[0-9a-z.:[\]-]+\/|^\/[^\/\\]|^about:blank#/i,En={};function Sn(){this.a="",this.b=kn}function Cn(t){return t instanceof Sn&&t.constructor===Sn&&t.b===kn?t.a:(x("expected object of type SafeUrl, got '"+t+"' of type "+s(t)),"type_error:SafeUrl")}Sn.prototype.ma=!0,Sn.prototype.la=function(){return this.a},Sn.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var xn=/^(?:(?:https?|mailto|ftp):|[^:\/?#]*(?:[\/?#]|$))/i;function Tn(t){return t instanceof Sn?t:(t=t.ma?t.la():String(t),xn.test(t)||(t="about:invalid#zClosurez"),In(t))}var kn={};function In(t){var e=new Sn;return e.a=t,e}function Pn(){this.a="",this.b=Ln}In("about:blank"),Pn.prototype.ma=!0,Pn.prototype.la=function(){return this.a},Pn.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Ln={};function An(t){var e=new Pn;return e.a=t,e}function On(t){var e=document;return o(t)?e.getElementById(t):t}function Nn(t,e){it(e,function(e,n){e&&e.ma&&(e=e.la()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:Rn.hasOwnProperty(n)?t.setAttribute(Rn[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e})}An("<!DOCTYPE html>"),An(""),An("<br>");var Rn={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Dn(t,e,n){var i=arguments,r=document,a=String(i[0]),s=i[1];if(!dn&&s&&(s.name||s.type)){if(a=["<",a],s.name&&a.push(' name="',V(s.name),'"'),s.type){a.push(' type="',V(s.type),'"');var l={};ut(l,s),delete l.type,s=l}a.push(">"),a=a.join("")}return a=r.createElement(a),s&&(o(s)?a.className=s:u(s)?a.className=s.join(" "):Nn(a,s)),2<i.length&&function(t,e,n){function i(n){n&&e.appendChild(o(n)?t.createTextNode(n):n)}for(var r=2;r<n.length;r++){var a=n[r];!c(a)||d(a)&&0<a.nodeType?i(a):N(Mn(a)?z(a):a,i)}}(r,a,i),a}function Mn(t){if(t&&"number"==typeof t.length){if(d(t))return"function"==typeof t.item||"string"==typeof t.item;if(h(t))return"function"==typeof t.item}return!1}function Fn(t){var e=[];return function t(e,n,i){if(null==n)i.push("null");else{if("object"==typeof n){if(u(n)){var o=n;n=o.length,i.push("[");for(var r="",a=0;a<n;a++)i.push(r),t(e,o[a],i),r=",";return void i.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(o in i.push("{"),r="",n)Object.prototype.hasOwnProperty.call(n,o)&&("function"!=typeof(a=n[o])&&(i.push(r),Un(o,i),i.push(":"),t(e,a,i),r=","));return void i.push("}")}n=n.valueOf()}switch(typeof n){case"string":Un(n,i);break;case"number":i.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":i.push(String(n));break;case"function":i.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new jn,t,e),e.join("")}function jn(){}var Bn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},zn=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Un(t,e){e.push('"',t.replace(zn,function(t){var e=Bn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Bn[t]=e),e}),'"')}function Wn(){var t=ai();return Vt&&!!Jt&&11==Jt||/Edge\/\d+/.test(t)}function Vn(){return n.window&&n.window.location.href||self&&self.location&&self.location.href||""}function Hn(t,e){e=e||n.window;var i="about:blank";t&&(i=Cn(Tn(t))),e.location.href=i}function qn(t){return!!((t=(t||ai()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function Zn(t){t=t||n.window;try{t.close()}catch(t){}}function Kn(t,e,n){var i=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var o=(window.screen.availHeight-n)/2,r=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<o?o:0,left:0<r?r:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=ai().toLowerCase(),i&&(e.target=i,J(n,"crios/")&&(e.target="_blank")),ii(ai())==ei&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),i=window,e=n instanceof Sn?n:Tn(void 0!==n.href?n.href:String(n)),n=t.target||n.target,o=[],t)switch(a){case"width":case"height":case"top":case"left":o.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:o.push(a+"="+(t[a]?1:0))}var a=o.join(",");if((nt("iPhone")&&!nt("iPod")&&!nt("iPad")||nt("iPad")||nt("iPod"))&&i.navigator&&i.navigator.standalone&&n&&"_self"!=n?(a=i.document.createElement("A"),e instanceof Sn||e instanceof Sn||(e=e.ma?e.la():String(e),xn.test(e)||(e="about:invalid#zClosurez"),e=In(e)),a.href=Cn(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,i,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=i.open("",n,a),t=Cn(e),a&&(qt&&J(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,vn("b/12014412, meta tag with sanitized URL"),t=An(t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+V(t)+'">'),a.document.write(function(t){return t instanceof Pn&&t.constructor===Pn&&t.b===Ln?t.a:(x("expected object of type SafeHtml, got '"+t+"' of type "+s(t)),"type_error:SafeHtml")}(t)),a.document.close())):(a=i.open(Cn(e),n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}var Gn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;function Qn(){var t=null;return new mt(function(e){"complete"==n.document.readyState?e():(t=function(){e()},be(window,"load",t))}).s(function(e){throw we(window,"load",t),e})}function Yn(t){return t=t||ai(),!("file:"!==hi()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Xn(){var t=n.window;try{return!(!t||t==t.top)}catch(t){return!1}}function Jn(){return"object"!=typeof n.window&&"function"==typeof n.importScripts}function $n(){return i.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":i.a.INTERNAL.hasOwnProperty("node")?"Node":Jn()?"Worker":"Browser"}function ti(){var t=$n();return"ReactNative"===t||"Node"===t}var ei="Firefox",ni="Chrome";function ii(t){var e=t.toLowerCase();return J(e,"opera/")||J(e,"opr/")||J(e,"opios/")?"Opera":J(e,"iemobile")?"IEMobile":J(e,"msie")||J(e,"trident/")?"IE":J(e,"edge/")?"Edge":J(e,"firefox/")?ei:J(e,"silk/")?"Silk":J(e,"blackberry")?"Blackberry":J(e,"webos")?"Webos":!J(e,"safari/")||J(e,"chrome/")||J(e,"crios/")||J(e,"android")?!J(e,"chrome/")&&!J(e,"crios/")||J(e,"edge/")?J(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":ni:"Safari"}var oi={Uc:"FirebaseCore-web",Wc:"FirebaseUI-web"};function ri(t,e){e=e||[];var n,i=[],o={};for(n in oi)o[oi[n]]=!0;for(n=0;n<e.length;n++)void 0!==o[e[n]]&&(delete o[e[n]],i.push(e[n]));return i.sort(),(e=i).length||(e=["FirebaseCore-web"]),"Browser"===(i=$n())?i=ii(o=ai()):"Worker"===i&&(i=ii(o=ai())+"-"+i),i+"/JsCore/"+t+"/"+e.join(",")}function ai(){return n.navigator&&n.navigator.userAgent||""}function si(t,e){t=t.split("."),e=e||n;for(var i=0;i<t.length&&"object"==typeof e&&null!=e;i++)e=e[t[i]];return i!=t.length&&(e=void 0),e}function li(){try{var t=n.localStorage,e=vi();if(t)return t.setItem(e,"1"),t.removeItem(e),!Wn()||!!n.indexedDB}catch(t){return Jn()&&!!n.indexedDB}return!1}function ui(){return(ci()||"chrome-extension:"===hi()||Yn())&&!ti()&&li()&&!Jn()}function ci(){return"http:"===hi()||"https:"===hi()}function hi(){return n.location&&n.location.protocol||null}function di(t){return!qn(t=t||ai())&&ii(t)!=ei}function fi(t){return void 0===t?null:Fn(t)}function pi(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function mi(t){if(null!==t)return JSON.parse(t)}function vi(t){return t||Math.floor(1e9*Math.random()).toString()}function gi(t){return"Safari"!=ii(t=t||ai())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function _i(){var t=n.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var i=0;i<t.CP.length;i++)t.CP[i]=null}function yi(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=ai(),e=$n(),this.b=qn(t)||"ReactNative"===e}function bi(){var t=n.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function wi(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Ei(){return!(!si("fireauth.oauthhelper",n)&&!si("fireauth.iframe",n))}yi.prototype.get=function(){var t=n.navigator;return!t||"boolean"!=typeof t.onLine||!ci()&&"chrome-extension:"!==hi()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Si,Ci={};function xi(t){Ci[t]||(Ci[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Ti={};Object.defineProperty(Ti,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Ti,"abcd",{configurable:!0,enumerable:!0,value:2}),Si=2==Ti.abcd}catch(Ut){Si=!1}function ki(t,e,n){Si?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Ii(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&ki(t,n,e[n])}function Pi(t){var e={};return Ii(e,t),e}function Li(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)ki(e,n,Li(t[n]));return e}function Ai(t){var e={},n=t[Ni],i=t[Ri];if(!(t=t[Di])||t!=Oi&&!n)throw Error("Invalid provider user info!");e[Fi]=i||null,e[Mi]=n||null,ki(this,Bi,t),ki(this,ji,Li(e))}var Oi="EMAIL_SIGNIN",Ni="email",Ri="newEmail",Di="requestType",Mi="email",Fi="fromEmail",ji="data",Bi="operation";function zi(t,e){this.code=Wi+t,this.message=e||Vi[t]||""}function Ui(t){var e=t&&t.code;return e?new zi(e.substring(Wi.length),t.message):null}b(zi,Error),zi.prototype.D=function(){return{code:this.code,message:this.message}},zi.prototype.toJSON=function(){return this.D()};var Wi="auth/",Vi={"argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function Hi(t){var e=t[Gi];if(void 0===e)throw new zi("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new zi("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[qi];if(n&&"object"==typeof n){e=n[Xi];var i=n[Qi];if(n=n[Yi],"string"==typeof e&&e.length){if(this.a=e,void 0!==i&&"boolean"!=typeof i)throw new zi("argument-error",Qi+" property must be a boolean when specified.");if(this.g=!!i,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new zi("argument-error",Yi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new zi("argument-error",Xi+" property must be a non empty string when specified.");if(void 0!==i||void 0!==n)throw new zi("missing-android-pkg-name")}}else if(void 0!==n)throw new zi("argument-error",qi+" property must be a non null object when specified.");if(this.f=null,(e=t[Ki])&&"object"==typeof e){if("string"==typeof(e=e[Ji])&&e.length)this.f=e;else if(void 0!==e)throw new zi("argument-error",Ji+" property must be a non empty string when specified.")}else if(void 0!==e)throw new zi("argument-error",Ki+" property must be a non null object when specified.");if(void 0!==(t=t[Zi])&&"boolean"!=typeof t)throw new zi("argument-error",Zi+" property must be a boolean when specified.");this.c=!!t}var qi="android",Zi="handleCodeInApp",Ki="iOS",Gi="url",Qi="installApp",Yi="minimumVersion",Xi="packageName",Ji="bundleId";function $i(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e)null===e[n]&&delete e[n];return e}var to=null,eo=null;function no(t){var e="";return function(t,e){function n(e){for(;i<t.length;){var n=t.charAt(i++),o=eo[n];if(null!=o)return o;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!to){to={},eo={};for(var t=0;65>t;t++)to[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t),eo[to[t]]=t,62<=t&&(eo["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(t)]=t)}}();for(var i=0;;){var o=n(-1),r=n(0),a=n(64),s=n(64);if(64===s&&-1===o)break;e(o<<2|r>>4),64!=a&&(e(r<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,function(t){e+=String.fromCharCode(t)}),e}function io(t){this.c=t.sub,y(),this.a=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.b=!!t.is_anonymous||"anonymous"==this.a}function oo(t){return(t=ro(t))&&t.sub&&t.iss&&t.aud&&t.exp?new io(t):null}function ro(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(no(t))}catch(t){}return null}io.prototype.f=function(){return this.b};var ao="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),so=["client_id","response_type","scope","redirect_uri","state"],lo={Vc:{Ma:"locale",Ba:500,Aa:600,Na:"facebook.com",gb:so},Xc:{Ma:null,Ba:500,Aa:620,Na:"github.com",gb:so},Yc:{Ma:"hl",Ba:515,Aa:680,Na:"google.com",gb:so},dd:{Ma:"lang",Ba:485,Aa:705,Na:"twitter.com",gb:ao}};function uo(t){for(var e in lo)if(lo[e].Na==t)return lo[e];return null}function co(t){var e={};e["facebook.com"]=vo,e["google.com"]=_o,e["github.com"]=go,e["twitter.com"]=yo;var n=t&&t[fo];try{if(n)return e[n]?new e[n](t):new mo(t);if(void 0!==t[ho])return new po(t)}catch(t){}return null}var ho="idToken",fo="providerId";function po(t){var e=t[fo];if(!e&&t[ho]){var n=oo(t[ho]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),ki(this,"providerId",e),ki(this,"isNewUser",n)}function mo(t){po.call(this,t),ki(this,"profile",Li((t=mi(t.rawUserInfo||"{}"))||{}))}function vo(t){if(mo.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function go(t){if(mo.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");ki(this,"username",this.profile&&this.profile.login||null)}function _o(t){if(mo.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function yo(t){if(mo.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");ki(this,"username",t.screenName||null)}function bo(t){this.a=Ge(t)}function wo(t){var e=Ge(t),n=Ke(e,"link"),i=Ke(Ge(n),"link");return e=Ke(e,"deep_link_id"),Ke(Ge(e),"link")||e||i||n||t}function Eo(t,e){return t.then(function(t){if(t[ea]){var n=oo(t[ea]);if(!n||e!=n.c)throw new zi("user-mismatch");return t}throw new zi("user-mismatch")}).s(function(t){throw t&&t.code&&t.code==Wi+"user-not-found"?new zi("user-mismatch"):t})}function So(t,e,n){if(e.idToken||e.accessToken)e.idToken&&ki(this,"idToken",e.idToken),e.accessToken&&ki(this,"accessToken",e.accessToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new zi("internal-error","failed to construct a credential");ki(this,"accessToken",e.oauthToken),ki(this,"secret",e.oauthTokenSecret)}ki(this,"providerId",t),ki(this,"signInMethod",n)}function Co(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,{postBody:sn(e).toString(),requestUri:"http://localhost"}}function xo(t,e){this.Cc=e||[],Ii(this,{providerId:t,isOAuthProvider:!0}),this.xb={},this.bb=(uo(t)||{}).Ma||null,this.Za=null}function To(t){xo.call(this,t,so),this.a=[]}function ko(){To.call(this,"facebook.com")}function Io(t){if(!t)throw new zi("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new ko).credential(null,e)}function Po(){To.call(this,"github.com")}function Lo(t){if(!t)throw new zi("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new Po).credential(null,e)}function Ao(){To.call(this,"google.com"),this.ta("profile")}function Oo(t,e){var n=t;return d(t)&&(n=t.idToken,e=t.accessToken),(new Ao).credential(n,e)}function No(){xo.call(this,"twitter.com",ao)}function Ro(t,e){var n=t;if(d(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new zi("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new So("twitter.com",n,"twitter.com")}function Do(t,e,n){this.a=t,this.b=e,ki(this,"providerId","password"),ki(this,"signInMethod",n===Mo.EMAIL_LINK_SIGN_IN_METHOD?Mo.EMAIL_LINK_SIGN_IN_METHOD:Mo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Mo(){Ii(this,{providerId:"password",isOAuthProvider:!1})}function Fo(t,e){if(!(e=jo(e)))throw new zi("argument-error","Invalid email link!");return new Do(t,e,Mo.EMAIL_LINK_SIGN_IN_METHOD)}function jo(t){var e=Ke((t=new bo(t=wo(t))).a,"oobCode")||null;return"signIn"===(Ke(t.a,"mode")||null)&&e?e:null}function Bo(t){if(!(t.Sa&&t.Ra||t.Fa&&t.$))throw new zi("internal-error");this.a=t,ki(this,"providerId","phone"),ki(this,"signInMethod","phone")}function zo(t){return t.a.Fa&&t.a.$?{temporaryProof:t.a.Fa,phoneNumber:t.a.$}:{sessionInfo:t.a.Sa,code:t.a.Ra}}function Uo(t){try{this.a=t||i.a.auth()}catch(t){throw new zi("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Ii(this,{providerId:"phone",isOAuthProvider:!1})}function Wo(t,e){if(!t)throw new zi("missing-verification-id");if(!e)throw new zi("missing-verification-code");return new Bo({Sa:t,Ra:e})}function Vo(t){if(t.temporaryProof&&t.phoneNumber)return new Bo({Fa:t.temporaryProof,$:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,i=t&&t.oauthTokenSecret;t=t&&t.oauthIdToken;try{switch(e){case"google.com":return Oo(t,n);case"facebook.com":return Io(n);case"github.com":return Lo(n);case"twitter.com":return Ro(n,i);default:return new To(e).credential(t,n)}}catch(t){return null}}function Ho(t){if(!t.isOAuthProvider)throw new zi("invalid-oauth-provider")}function qo(t,e,n,i,o){if(this.b=t,this.c=e||null,this.f=n||null,this.g=i||null,this.a=o||null,!this.f&&!this.a)throw new zi("invalid-auth-event");if(this.f&&this.a)throw new zi("invalid-auth-event");if(this.f&&!this.g)throw new zi("invalid-auth-event")}function Zo(t){return(t=t||{}).type?new qo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&Ui(t.error)):null}function Ko(){this.b=null,this.a=[]}b(mo,po),b(vo,mo),b(go,mo),b(_o,mo),b(yo,mo),So.prototype.ya=function(t){return _a(t,Co(this))},So.prototype.c=function(t,e){var n=Co(this);return n.idToken=e,ya(t,n)},So.prototype.f=function(t,e){return Eo(ba(t,Co(this)),e)},So.prototype.D=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),t},xo.prototype.Da=function(t){return this.xb=rt(t),this},b(To,xo),To.prototype.ta=function(t){return M(this.a,t)||this.a.push(t),this},To.prototype.Cb=function(){return z(this.a)},To.prototype.credential=function(t,e){if(!t&&!e)throw new zi("argument-error","credential failed: must provide the ID token and/or the access token.");return new So(this.providerId,{idToken:t||null,accessToken:e||null},this.providerId)},b(ko,To),ki(ko,"PROVIDER_ID","facebook.com"),ki(ko,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),b(Po,To),ki(Po,"PROVIDER_ID","github.com"),ki(Po,"GITHUB_SIGN_IN_METHOD","github.com"),b(Ao,To),ki(Ao,"PROVIDER_ID","google.com"),ki(Ao,"GOOGLE_SIGN_IN_METHOD","google.com"),b(No,xo),ki(No,"PROVIDER_ID","twitter.com"),ki(No,"TWITTER_SIGN_IN_METHOD","twitter.com"),Do.prototype.ya=function(t){return this.signInMethod==Mo.EMAIL_LINK_SIGN_IN_METHOD?Qa(t,Ia,{email:this.a,oobCode:this.b}):Qa(t,qa,{email:this.a,password:this.b})},Do.prototype.c=function(t,e){return this.signInMethod==Mo.EMAIL_LINK_SIGN_IN_METHOD?Qa(t,Pa,{idToken:e,email:this.a,oobCode:this.b}):Qa(t,Ba,{idToken:e,email:this.a,password:this.b})},Do.prototype.f=function(t,e){return Eo(this.ya(t),e)},Do.prototype.D=function(){return{email:this.a,password:this.b,signInMethod:this.signInMethod}},Ii(Mo,{PROVIDER_ID:"password"}),Ii(Mo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Ii(Mo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Bo.prototype.ya=function(t){return t.Ta(zo(this))},Bo.prototype.c=function(t,e){var n=zo(this);return n.idToken=e,Qa(t,Ka,n)},Bo.prototype.f=function(t,e){var n=zo(this);return n.operation="REAUTH",Eo(t=Qa(t,Ga,n),e)},Bo.prototype.D=function(){var t={providerId:"phone"};return this.a.Sa&&(t.verificationId=this.a.Sa),this.a.Ra&&(t.verificationCode=this.a.Ra),this.a.Fa&&(t.temporaryProof=this.a.Fa),this.a.$&&(t.phoneNumber=this.a.$),t},Uo.prototype.Ta=function(t,e){var n=this.a.b;return Et(e.verify()).then(function(i){if(!o(i))throw new zi("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":return function(t,e){return Qa(t,Fa,e)}(n,{phoneNumber:t,recaptchaToken:i}).then(function(t){return"function"==typeof e.reset&&e.reset(),t},function(t){throw"function"==typeof e.reset&&e.reset(),t});default:throw new zi("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Ii(Uo,{PROVIDER_ID:"phone"}),Ii(Uo,{PHONE_SIGN_IN_METHOD:"phone"}),qo.prototype.D=function(){return{type:this.b,eventId:this.c,urlResponse:this.f,sessionId:this.g,error:this.a&&this.a.D()}};var Go=null;function Qo(t){var e="unauthorized-domain",n=void 0,i=Ge(t);t=i.b,"chrome-extension"==(i=i.c)?n=U("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==i||"https"==i?n=U("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",zi.call(this,e,n)}function Yo(t,e,n){zi.call(this,t,n),(t=e||{}).yb&&ki(this,"email",t.yb),t.$&&ki(this,"phoneNumber",t.$),t.credential&&ki(this,"credential",t.credential)}function Xo(t){if(t.code){var e=t.code||"";0==e.indexOf(Wi)&&(e=e.substring(Wi.length));var n={credential:Vo(t)};if(t.email)n.yb=t.email;else{if(!t.phoneNumber)return new zi(e,t.message||void 0);n.$=t.phoneNumber}return new Yo(e,n,t.message)}return null}Ko.prototype.subscribe=function(t){var e=this;this.a.push(t),this.b||(this.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=si("universalLinks.subscribe",n))&&t(null,this.b))},Ko.prototype.unsubscribe=function(t){j(this.a,function(e){return e==t})},b(Qo,zi),b(Yo,zi),Yo.prototype.D=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber);var e=this.credential&&this.credential.D();return e&&ut(t,e),t},Yo.prototype.toJSON=function(){return this.D()};var Jo,$o=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/;function tr(){}function er(t){return t.c||(t.c=t.b())}function nr(){}function ir(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var i=e[n];try{return new ActiveXObject(i),t.f=i}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function or(){}function rr(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseText="",this.status=-1,this.statusText="",this.a.onload=g(this.dc,this),this.a.onerror=g(this.Db,this),this.a.onprogress=g(this.ec,this),this.a.ontimeout=g(this.hc,this)}function ar(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function sr(t,e,n){this.reset(t,e,n,void 0,void 0)}tr.prototype.c=null,b(nr,tr),nr.prototype.a=function(){var t=ir(this);return t?new ActiveXObject(t):new XMLHttpRequest},nr.prototype.b=function(){var t={};return ir(this)&&(t[0]=!0,t[1]=!0),t},Jo=new nr,b(or,tr),or.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new rr;throw Error("Unsupported browser")},or.prototype.b=function(){return{}},(t=rr.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.dc=function(){this.status=200,this.responseText=this.a.responseText,ar(this,4)},t.Db=function(){this.status=500,this.responseText="",ar(this,4)},t.hc=function(){this.Db()},t.ec=function(){this.status=200,ar(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},sr.prototype.a=null;function lr(t){this.f=t,this.b=this.c=this.a=null}function ur(t,e){this.name=t,this.value=e}sr.prototype.reset=function(t,e,n,i,o){"number"==typeof o||0,i||y(),delete this.a},ur.prototype.toString=function(){return this.name};var cr=new ur("SEVERE",1e3),hr=new ur("WARNING",900),dr=new ur("CONFIG",700),fr=new ur("FINE",500);lr.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(x("Root logger has no level set."),null)}(this).value)for(h(e)&&(e=e()),t=new sr(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var pr={},mr=null;function vr(t){var e;if(mr||(mr=new lr(""),pr[""]=mr,mr.c=dr),!(e=pr[t])){e=new lr(t);var n=t.lastIndexOf("."),i=t.substr(n+1);(n=vr(t.substr(0,n))).b||(n.b={}),n.b[i]=e,e.a=n,pr[t]=e}return e}function gr(t,e){t&&t.log(fr,e,void 0)}function _r(t){this.f=t}function yr(t){Le.call(this),this.i=t,this.readyState=br,this.status=0,this.responseText=this.statusText="",this.onreadystatechange=null,this.g=new Headers,this.b=null,this.h="GET",this.c="",this.a=!1,this.f=vr("goog.net.FetchXmlHttp")}b(_r,tr),_r.prototype.a=function(){return new yr(this.f)},_r.prototype.b=function(t){return function(){return t}}({}),b(yr,Le);var br=0;function wr(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Er(t){Le.call(this),this.headers=new je,this.C=t||null,this.c=!1,this.w=this.a=null,this.h=this.N=this.l="",this.f=this.I=this.i=this.G=!1,this.g=0,this.u=null,this.o=Sr,this.v=this.O=!1}(t=yr.prototype).open=function(t,e){if(this.readyState!=br)throw this.abort(),Error("Error reopening a connection");this.h=t,this.c=e,this.readyState=1,wr(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.g,method:this.h,credentials:void 0,cache:void 0};t&&(e.body=t),this.i.fetch(new Request(this.c,e)).then(this.gc.bind(this),this.Eb.bind(this))},t.abort=function(){this.responseText="",this.g=new Headers,this.status=0,1<=this.readyState&&this.a&&4!=this.readyState&&(this.readyState=4,this.a=!1,wr(this)),this.readyState=br},t.gc=function(t){this.a&&(this.b||(this.b=t.headers,this.readyState=2,wr(this)),this.a&&(this.readyState=3,wr(this),this.a&&t.text().then(this.fc.bind(this,t),this.Eb.bind(this))))},t.fc=function(t,e){this.a&&(this.status=t.status,this.statusText=t.statusText,this.responseText=e,this.readyState=4,wr(this))},t.Eb=function(t){var e=this.f;e&&e.log(hr,"Failed to fetch url "+this.c,t instanceof Error?t:Error(t)),this.a&&(this.readyState=4,wr(this))},t.setRequestHeader=function(t,e){this.g.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.f)&&t.log(hr,"Attempting to get response header but no headers have been received for url: "+this.c,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.f;return t&&t.log(hr,"Attempting to get all response headers but no headers have been received for url: "+this.c,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},b(Er,Le);var Sr="";Er.prototype.b=vr("goog.net.XhrIo");var Cr=/^https?$/i,xr=["POST","PUT"];function Tr(t,e,i,r,a){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);i=i?i.toUpperCase():"GET",t.l=e,t.h="",t.N=i,t.G=!1,t.c=!0,t.a=t.C?t.C.a():Jo.a(),t.w=t.C?er(t.C):er(Jo),t.a.onreadystatechange=g(t.Hb,t);try{gr(t.b,Dr(t,"Opening Xhr")),t.I=!0,t.a.open(i,String(e),!0),t.I=!1}catch(e){return gr(t.b,Dr(t,"Error opening Xhr: "+e.message)),void Ir(t,e)}e=r||"";var s=new je(t.headers);a&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(c(t)||o(t))N(t,e,void 0);else for(var n=Fe(t),i=Me(t),r=i.length,a=0;a<r;a++)e.call(void 0,i[a],n&&n[a],t)}(a,function(t,e){s.set(e,t)}),a=function(t){t:{for(var e=kr,n=t.length,i=o(t)?t.split(""):t,r=0;r<n;r++)if(r in i&&e.call(void 0,i[r],r,t)){e=r;break t}e=-1}return 0>e?null:o(t)?t.charAt(e):t[e]}(s.U()),r=n.FormData&&e instanceof n.FormData,!M(xr,i)||a||r||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.o&&(t.a.responseType=t.o),"withCredentials"in t.a&&t.a.withCredentials!==t.O&&(t.a.withCredentials=t.O);try{Or(t),0<t.g&&(t.v=function(t){return Vt&&te(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),gr(t.b,Dr(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.v)),t.v?(t.a.timeout=t.g,t.a.ontimeout=g(t.Ga,t)):t.u=Re(t.Ga,t.g,t)),gr(t.b,Dr(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){gr(t.b,Dr(t,"Send error: "+e.message)),Ir(t,e)}}function kr(t){return"content-type"==t.toLowerCase()}function Ir(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Pr(t),Ar(t)}function Pr(t){t.G||(t.G=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Lr(t){if(t.c&&void 0!==e)if(t.w[1]&&4==Nr(t)&&2==Rr(t))gr(t.b,Dr(t,"Local request error detected and ignored"));else if(t.i&&4==Nr(t))Re(t.Hb,0,t);else if(t.dispatchEvent("readystatechange"),4==Nr(t)){gr(t.b,Dr(t,"Request complete")),t.c=!1;try{var i,o=Rr(t);t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(i=r)){var a;if(a=0===o){var s=String(t.l).match(Ue)[1]||null;if(!s&&n.self&&n.self.location){var l=n.self.location.protocol;s=l.substr(0,l.length-1)}a=!Cr.test(s?s.toLowerCase():"")}i=a}if(i)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var u=2<Nr(t)?t.a.statusText:""}catch(e){gr(t.b,"Can not get status: "+e.message),u=""}t.h=u+" ["+Rr(t)+"]",Pr(t)}}finally{Ar(t)}}}function Ar(t,e){if(t.a){Or(t);var n=t.a,i=t.w[0]?a:null;t.a=null,t.w=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=i}catch(e){(t=t.b)&&t.log(cr,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Or(t){t.a&&t.v&&(t.a.ontimeout=null),t.u&&(n.clearTimeout(t.u),t.u=null)}function Nr(t){return t.a?t.a.readyState:0}function Rr(t){try{return 2<Nr(t)?t.a.status:-1}catch(t){return-1}}function Dr(t,e){return e+" ["+t.N+" "+t.l+" "+Rr(t)+"]"}function Mr(t,e){this.g=[],this.v=t,this.u=e||null,this.f=this.a=!1,this.c=void 0,this.l=this.w=this.i=!1,this.h=0,this.b=null,this.m=0}function Fr(t,e,n){t.a=!0,t.c=n,t.f=!e,Ur(t)}function jr(t){if(t.a){if(!t.l)throw new Wr(t);t.l=!1}}function Br(t,e,n,i){t.g.push([e,n,i]),t.a&&Ur(t)}function zr(t){return D(t.g,function(t){return h(t[1])})}function Ur(t){if(t.h&&t.a&&zr(t)){var e=t.h,i=qr[e];i&&(n.clearTimeout(i.a),delete qr[e]),t.h=0}t.b&&(t.b.m--,delete t.b),e=t.c;for(var o=i=!1;t.g.length&&!t.i;){var r=t.g.shift(),a=r[0],s=r[1];if(r=r[2],a=t.f?s:a)try{var l=a.call(r||t.u,e);void 0!==l&&(t.f=t.f&&(l==e||l instanceof Error),t.c=e=l),(E(e)||"function"==typeof n.Promise&&e instanceof n.Promise)&&(o=!0,t.i=!0)}catch(n){e=n,t.f=!0,zr(t)||(i=!0)}}t.c=e,o&&(l=g(t.o,t,!0),o=g(t.o,t,!1),e instanceof Mr?(Br(e,l,o),e.w=!0):e.then(l,o)),i&&(e=new Hr(e),qr[e.a]=e,t.h=e.a)}function Wr(){S.call(this)}function Vr(){S.call(this)}function Hr(t){this.a=n.setTimeout(g(this.c,this),0),this.b=t}(t=Er.prototype).Ga=function(){void 0!==e&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",gr(this.b,Dr(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(gr(this.b,Dr(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ar(this))},t.ua=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Ar(this,!0)),Er.nb.ua.call(this)},t.Hb=function(){this.pa||(this.I||this.i||this.f?Lr(this):this.vc())},t.vc=function(){Lr(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.o){case Sr:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(cr,"Response type "+this.o+" is not supported on this browser",void 0),null}catch(t){return gr(this.b,"Can not get response: "+t.message),null}},Mr.prototype.cancel=function(t){if(this.a)this.c instanceof Mr&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.m--,0>=e.m&&e.cancel())}this.v?this.v.call(this.u,this):this.l=!0,this.a||(t=new Vr(this),jr(this),Fr(this,!1,t))}},Mr.prototype.o=function(t,e){this.i=!1,Fr(this,t,e)},Mr.prototype.C=function(){jr(this),Fr(this,!0,null)},Mr.prototype.then=function(t,e,n){var i,o,r=new mt(function(t,e){i=t,o=e});return Br(this,i,function(t){t instanceof Vr?r.cancel():o(t)}),r.then(t,e,n)},w(Mr),b(Wr,S),Wr.prototype.message="Deferred has already fired",Wr.prototype.name="AlreadyCalledError",b(Vr,S),Vr.prototype.message="Deferred was canceled",Vr.prototype.name="CanceledError",Hr.prototype.c=function(){throw delete qr[this.a],this.b};var qr={};function Zr(t){var e={},n=e.document||document,i=_n(t),o=document.createElement("SCRIPT"),r={Jb:o,Ga:void 0},a=new Mr(Kr,r),s=null,l=null!=e.timeout?e.timeout:5e3;return 0<l&&(s=window.setTimeout(function(){Gr(o,!0);var t=new Xr(Yr,"Timeout reached for loading script "+i);jr(a),Fr(a,!1,t)},l),r.Ga=s),o.onload=o.onreadystatechange=function(){o.readyState&&"loaded"!=o.readyState&&"complete"!=o.readyState||(Gr(o,e.fd||!1,s),a.C())},o.onerror=function(){Gr(o,!0,s);var t=new Xr(Qr,"Error while loading script "+i);jr(a),Fr(a,!1,t)},ut(r=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),Nn(o,r),o.src=_n(t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(o),a}function Kr(){if(this&&this.Jb){var t=this.Jb;t&&"SCRIPT"==t.tagName&&Gr(t,!0,this.Ga)}}function Gr(t,e,i){null!=i&&n.clearTimeout(i),t.onload=a,t.onerror=a,t.onreadystatechange=a,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Qr=0,Yr=1;function Xr(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),S.call(this,n),this.code=t}function Jr(t){this.f=t}function $r(t,e,o){if(this.b=t,t=e||{},this.i=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||na,this.f=rt(t.secureTokenHeaders||ia),this.g=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.h=t.firebaseTimeout||oa,this.a=rt(t.firebaseHeaders||ra),o&&(this.a["X-Client-Version"]=o,this.f["X-Client-Version"]=o),o="Node"==$n(),!(o=n.XMLHttpRequest||o&&i.a.INTERNAL.node&&i.a.INTERNAL.node.XMLHttpRequest)&&!Jn())throw new zi("internal-error","The XMLHttpRequest compatibility library was not found.");this.c=void 0,Jn()?this.c=new _r(self):ti()?this.c=new Jr(o):this.c=new or}b(Xr,S),b(Jr,tr),Jr.prototype.a=function(){return new this.f},Jr.prototype.b=function(){return{}};var ta,ea="idToken",na=new yi(3e4,6e4),ia={"Content-Type":"application/x-www-form-urlencoded"},oa=new yi(3e4,6e4),ra={"Content-Type":"application/json"};function aa(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function sa(t,e){e?(t.a["X-Client-Version"]=e,t.f["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.f["X-Client-Version"])}function la(t,e,i,o,r,a,s){(function(){var t=ai();return!((t=ii(t)!=ni?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Vt&&Jt&&!(9<Jt))})()||Jn()?t=g(t.o,t):(ta||(ta=new mt(function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{n[ca]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))};var i=yn(ua,{onload:ca});!function(t,e){Br(t,null,e,void 0)}(Zr(i),function(){e(Error("CORS_UNSUPPORTED"))})}}(t,e)})),t=g(t.l,t)),t(e,i,o,r,a,s)}$r.prototype.o=function(t,e,i,o,r,a){if(Jn()&&(void 0===n.fetch||void 0===n.Headers||void 0===n.Request))throw new zi("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new Er(this.c);if(a){s.g=Math.max(0,a);var l=setTimeout(function(){s.dispatchEvent("timeout")},a)}Ae(s,"complete",function(){l&&clearTimeout(l);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return gr(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)}),Oe(s,"ready",function(){l&&clearTimeout(l),jt(this)}),Oe(s,"timeout",function(){l&&clearTimeout(l),jt(this),e&&e(null)}),Tr(s,t,i,o,r)};var ua=vn("https://apis.google.com/js/client.js?onload=%{onload}"),ca="__fcb"+Math.floor(1e6*Math.random()).toString();function ha(t){if(!$o.test(t.email))throw new zi("invalid-email")}function da(t){"email"in t&&ha(t)}function fa(t){if(!t[ea])throw new zi("internal-error")}function pa(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new zi("internal-error")}else{if(!t.sessionInfo)throw new zi("missing-verification-id");if(!t.code)throw new zi("missing-verification-code")}}$r.prototype.l=function(t,e,n,i,o){var r=this;ta.then(function(){window.gapi.client.setApiKey(r.b);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:i,headers:o,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})}).s(function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},$r.prototype.Pa=function(){return Qa(this,za,{})},$r.prototype.ob=function(t,e){return Qa(this,ja,{idToken:t,email:e})},$r.prototype.pb=function(t,e){return Qa(this,Ba,{idToken:t,password:e})};var ma={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function va(t){if(!t.requestUri||!t.sessionId&&!t.postBody)throw new zi("internal-error")}function ga(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Xo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Xo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Xo(t)):t.errorMessage&&(e=Ya(t.errorMessage)),e)throw e;if(!t[ea])throw new zi("internal-error")}function _a(t,e){return e.returnIdpCredential=!0,Qa(t,Ua,e)}function ya(t,e){return e.returnIdpCredential=!0,Qa(t,Va,e)}function ba(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Qa(t,Wa,e)}function wa(t){if(!t.oobCode)throw new zi("invalid-action-code")}(t=$r.prototype).qb=function(t,e){var n={idToken:t},i=[];return it(ma,function(t,o){var r=e[o];null===r?i.push(t):o in e&&(n[o]=r)}),i.length&&(n.deleteAttribute=i),Qa(this,ja,n)},t.jb=function(t,e){return ut(t={requestType:"PASSWORD_RESET",email:t},e),Qa(this,Na,t)},t.kb=function(t,e){return ut(t={requestType:"EMAIL_SIGNIN",email:t},e),Qa(this,Aa,t)},t.ib=function(t,e){return ut(t={requestType:"VERIFY_EMAIL",idToken:t},e),Qa(this,Oa,t)},t.Ta=function(t){return Qa(this,Za,t)},t.Ya=function(t,e){return Qa(this,Ma,{oobCode:t,newPassword:e})},t.Ja=function(t){return Qa(this,Sa,{oobCode:t})},t.Va=function(t){return Qa(this,Ea,{oobCode:t})};var Ea={endpoint:"setAccountInfo",B:wa,da:"email"},Sa={endpoint:"resetPassword",B:wa,J:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e)throw new zi("internal-error")}},Ca={endpoint:"signupNewUser",B:function(t){if(ha(t),!t.password)throw new zi("weak-password")},J:fa,R:!0},xa={endpoint:"createAuthUri"},Ta={endpoint:"deleteAccount",T:["idToken"]},ka={endpoint:"setAccountInfo",T:["idToken","deleteProvider"],B:function(t){if(!u(t.deleteProvider))throw new zi("internal-error")}},Ia={endpoint:"emailLinkSignin",T:["email","oobCode"],B:ha,J:fa,R:!0},Pa={endpoint:"emailLinkSignin",T:["idToken","email","oobCode"],B:ha,J:fa,R:!0},La={endpoint:"getAccountInfo"},Aa={endpoint:"getOobConfirmationCode",T:["requestType"],B:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new zi("internal-error");ha(t)},da:"email"},Oa={endpoint:"getOobConfirmationCode",T:["idToken","requestType"],B:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new zi("internal-error")},da:"email"},Na={endpoint:"getOobConfirmationCode",T:["requestType"],B:function(t){if("PASSWORD_RESET"!=t.requestType)throw new zi("internal-error");ha(t)},da:"email"},Ra={tb:!0,endpoint:"getProjectConfig",Gb:"GET"},Da={tb:!0,endpoint:"getRecaptchaParam",Gb:"GET",J:function(t){if(!t.recaptchaSiteKey)throw new zi("internal-error")}},Ma={endpoint:"resetPassword",B:wa,da:"email"},Fa={endpoint:"sendVerificationCode",T:["phoneNumber","recaptchaToken"],da:"sessionInfo"},ja={endpoint:"setAccountInfo",T:["idToken"],B:da,R:!0},Ba={endpoint:"setAccountInfo",T:["idToken"],B:function(t){if(da(t),!t.password)throw new zi("weak-password")},J:fa,R:!0},za={endpoint:"signupNewUser",J:fa,R:!0},Ua={endpoint:"verifyAssertion",B:va,J:ga,R:!0},Wa={endpoint:"verifyAssertion",B:va,J:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new zi("user-not-found");if(t.errorMessage)throw Ya(t.errorMessage);if(!t[ea])throw new zi("internal-error")},R:!0},Va={endpoint:"verifyAssertion",B:function(t){if(va(t),!t.idToken)throw new zi("internal-error")},J:ga,R:!0},Ha={endpoint:"verifyCustomToken",B:function(t){if(!t.token)throw new zi("invalid-custom-token")},J:fa,R:!0},qa={endpoint:"verifyPassword",B:function(t){if(ha(t),!t.password)throw new zi("wrong-password")},J:fa,R:!0},Za={endpoint:"verifyPhoneNumber",B:pa,J:fa},Ka={endpoint:"verifyPhoneNumber",B:function(t){if(!t.idToken)throw new zi("internal-error");pa(t)},J:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Xo(t);fa(t)}},Ga={Vb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",B:pa,J:fa};function Qa(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var i=t[e[n]];if(null==i||""===i)return!1}return!0}(n,e.T))return St(new zi("internal-error"));var i,o=e.Gb||"POST";return Et(n).then(e.B).then(function(){return e.R&&(n.returnSecureToken=!0),function(t,e,n,i,o,r){var a=Ge(t.g+e);Ze(a,"key",t.b),r&&Ze(a,"cb",y().toString());var s="GET"==n;if(s)for(var l in i)i.hasOwnProperty(l)&&Ze(a,l,i[l]);return new mt(function(e,r){la(t,a.toString(),function(t){t?t.error?r(Xa(t,o||{})):e(t):r(new zi("network-request-failed"))},n,s?void 0:Fn(pi(i)),t.a,t.h.get())})}(t,e.endpoint,o,n,e.Vb,e.tb||!1)}).then(function(t){return i=t}).then(e.J).then(function(){if(!e.da)return i;if(!(e.da in i))throw new zi("internal-error");return i[e.da]})}function Ya(t){return Xa({error:{errors:[{message:t}],code:400,message:t}})}function Xa(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",i={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=i[n]?new zi(i[n]):null)return n;for(var o in n=t.error&&t.error.message||"",ut(i={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*(.*)$/))&&1<e.length?e[1]:void 0,i)if(0===n.indexOf(o))return new zi(i[o],e);return!e&&t&&(e=fi(t)),new zi("internal-error",e)}var Ja,$a={$c:{$a:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",hb:"https://securetoken.googleapis.com/v1/token",id:"p"},bd:{$a:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",hb:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},cd:{$a:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",hb:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function ts(t){for(var e in $a)if($a[e].id===t)return{firebaseEndpoint:(t=$a[e]).$a,secureTokenEndpoint:t.hb};return null}function es(t){this.b=t,this.a=null,this.eb=function(t){return(as||(as=new mt(function(t,e){function i(){_i(),si("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){_i(),e(Error("Network Error"))},timeout:os.get()})}if(si("gapi.iframes.Iframe"))t();else if(si("gapi.load"))i();else{var o="__iframefcb"+Math.floor(1e6*Math.random()).toString();n[o]=function(){si("gapi.load")?i():e(Error("Network Error"))},Et(Zr(o=yn(is,{onload:o}))).s(function(){e(Error("Network Error"))})}}).s(function(t){throw as=null,t}))).then(function(){return new mt(function(e,n){si("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:si("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(i){function o(){clearTimeout(r),e()}t.a=i,t.a.restyle({setHideOnLeave:!1});var r=setTimeout(function(){n(Error("Network Error"))},rs.get());i.ping(o).then(o,function(){n(Error("Network Error"))})})})})}(this)}Ja=ts("__EID__")?"__EID__":void 0;var ns,is=vn("https://apis.google.com/js/api.js?onload=%{onload}"),os=new yi(3e4,6e4),rs=new yi(5e3,15e3),as=null;function ss(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=Qe(this.i,"/__/auth/iframe"),Ze(this.a,"apiKey",this.g),Ze(this.a,"appName",this.h),this.b=null,this.c=[]}function ls(t,e,n,i,o){this.o=t,this.l=e,this.c=n,this.m=i,this.h=this.g=this.i=null,this.a=o,this.f=null}function us(t){try{return i.a.app(t).auth().xa()}catch(t){return[]}}function cs(t,e,n,i,o){this.l=t,this.f=e,this.b=n,this.c=i||null,this.h=o||null,this.o=this.u=this.v=null,this.g=[],this.m=this.a=null}function hs(t){var e=Vn();return function(t){return Qa(t,Ra,{}).then(function(t){return t.authorizedDomains||[]})}(t).then(function(t){t:{var n=Ge(e),i=n.c;n=n.b;for(var o=0;o<t.length;o++){var r=t[o],a=n,s=i;if(0==r.indexOf("chrome-extension://")?a=Ge(r).b==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:Gn.test(r)?a=a==r:(r=r.split(".").join("\\."),a=new RegExp("^(.+\\."+r+"|"+r+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Qo(Vn())})}function ds(t){return t.m?t.m:(t.m=Qn().then(function(){if(!t.u){var e=t.c,n=t.h,i=us(t.b),o=new ss(t.l,t.f,t.b);o.f=e,o.b=n,o.c=z(i||[]),t.u=o.toString()}t.i=new es(t.u),function(t){if(!t.i)throw Error("IfcHandler must be initialized!");!function(t,e){t.eb.then(function(){t.a.register("authEvent",e,si("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(t.i,function(e){var n={};if(e&&e.authEvent){var i=!1;for(e=Zo(e.authEvent),n=0;n<t.g.length;n++)i=t.g[n](e)||i;return(n={}).status=i?"ACK":"ERROR",Et(n)}return n.status="ERROR",Et(n)})}(t)}),t.m)}function fs(t){return t.o||(t.v=t.c?ri(t.c,us(t.b)):null,t.o=new $r(t.f,ts(t.h),t.v)),t.o}function ps(t,e,n,i,o,r,a,s,l,u){return(t=new ls(t,e,n,i,o)).i=r,t.g=a,t.h=s,t.b=rt(l||null),t.f=u,t.toString()}function ms(t){if(this.a=t||i.a.INTERNAL.reactNative&&i.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new zi("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function vs(){if(!ys())throw new zi("web-storage-unsupported");this.f={},this.a=[],this.b=0,this.g=n.indexedDB,this.type="indexedDB"}function gs(t){return new mt(function(e,n){var i=t.g.open("firebaseLocalStorageDb",1);i.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},i.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},i.onsuccess=function(i){(i=i.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(i):function(t){return new mt(function(e,n){var i=t.g.deleteDatabase("firebaseLocalStorageDb");i.onsuccess=function(){e()},i.onerror=function(t){n(Error(t.target.error))}})}(t).then(function(){return gs(t)}).then(function(t){e(t)}).s(function(t){n(t)})}})}function _s(t){return t.h||(t.h=gs(t)),t.h}function ys(){try{return!!n.indexedDB}catch(t){return!1}}function bs(t){return t.objectStore("firebaseLocalStorage")}function ws(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Es(t){return new mt(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(Error(t.target.errorCode))}})}function Ss(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Et().then(function(){if(ys()){var t=vi(),i="__sak"+t;return ns||(ns=new vs),(n=ns).set(i,t).then(function(){return n.get(i)}).then(function(e){if(e!==t)throw Error("indexedDB not supported!");return n.P(i)}).then(function(){return n}).s(function(){return e.c})}return e.c}).then(function(t){return e.type=t.type,t.Y(function(t){N(e.a,function(e){e(t)})}),t})}function Cs(){this.a={},this.type="inMemory"}function xs(){if(!function(){var t="Node"==$n();if(!(t=Ts()||t&&i.a.INTERNAL.node&&i.a.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==$n())throw new zi("internal-error","The LocalStorage compatibility library was not found.");throw new zi("web-storage-unsupported")}this.a=Ts()||i.a.INTERNAL.node.localStorage,this.type="localStorage"}function Ts(){try{var t=n.localStorage,e=vi();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function ks(){this.type="nullStorage"}function Is(){if(!function(){var t="Node"==$n();if(!(t=Ps()||t&&i.a.INTERNAL.node&&i.a.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==$n())throw new zi("internal-error","The SessionStorage compatibility library was not found.");throw new zi("web-storage-unsupported")}this.a=Ps()||i.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Ps(){try{var t=n.sessionStorage,e=vi();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Ls(){var t={};t.Browser=Ns,t.Node=Rs,t.ReactNative=Ds,t.Worker=Ms,this.a=t[$n()]}ss.prototype.toString=function(){return this.f?Ze(this.a,"v",this.f):ln(this.a.a,"v"),this.b?Ze(this.a,"eid",this.b):ln(this.a.a,"eid"),this.c.length?Ze(this.a,"fw",this.c.join(",")):ln(this.a.a,"fw"),this.a.toString()},ls.prototype.toString=function(){var t=Qe(this.o,"/__/auth/handler");if(Ze(t,"apiKey",this.l),Ze(t,"appName",this.c),Ze(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=i.a.app(this.c).auth().ea()}catch(t){n=null}for(var o in e.Za=n,Ze(t,"providerId",this.a.providerId),n=pi((e=this.a).xb))n[o]=n[o].toString();o=e.Cc,n=rt(n);for(var r=0;r<o.length;r++){var a=o[r];a in n&&delete n[a]}e.bb&&e.Za&&!n[e.bb]&&(n[e.bb]=e.Za),ot(n)||Ze(t,"customParameters",fi(n))}if("function"==typeof this.a.Cb&&((e=this.a.Cb()).length&&Ze(t,"scopes",e.join(","))),this.i?Ze(t,"redirectUrl",this.i):ln(t.a,"redirectUrl"),this.g?Ze(t,"eventId",this.g):ln(t.a,"eventId"),this.h?Ze(t,"v",this.h):ln(t.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Ke(t,s)&&Ze(t,s,this.b[s]);return this.f?Ze(t,"eid",this.f):ln(t.a,"eid"),(s=us(this.c)).length&&Ze(t,"fw",s.join(",")),t.toString()},(t=cs.prototype).Ea=function(t,e,n){var i=new zi("popup-closed-by-user"),o=new zi("web-storage-unsupported"),r=this,a=!1;return this.ga().then(function(){(function(t){var e={type:"webStorageSupport"};return ds(t).then(function(){return function(t,e){return t.eb.then(function(){return new mt(function(n){t.a.send(e.type,e,n,si("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(t.i,e)}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})})(r).then(function(n){n||(t&&Zn(t),e(o),a=!0)})}).s(function(){}).then(function(){if(!a)return function(t){return new mt(function(e){return function n(){De(2e3).then(function(){if(t&&!t.closed)return n();e()})}()})}(t)}).then(function(){if(!a)return De(n).then(function(){e(i)})})},t.Kb=function(){var t=ai();return!di(t)&&!gi(t)},t.Fb=function(){return!1},t.Bb=function(t,e,n,i,o,r,a){if(!t)return St(new zi("popup-blocked"));if(a&&!di())return this.ga().s(function(e){Zn(t),o(e)}),i(),Et();this.a||(this.a=hs(fs(this)));var s=this;return this.a.then(function(){var e=s.ga().s(function(e){throw Zn(t),o(e),e});return i(),e}).then(function(){(Ho(n),a)||Hn(ps(s.l,s.f,s.b,e,n,null,r,s.c,void 0,s.h),t)}).s(function(t){throw"auth/network-request-failed"==t.code&&(s.a=null),t})},t.Ca=function(t,e,n){this.a||(this.a=hs(fs(this)));var i=this;return this.a.then(function(){Ho(e),Hn(ps(i.l,i.f,i.b,t,e,Vn(),n,i.c,void 0,i.h))}).s(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.ga=function(){var t=this;return ds(this).then(function(){return t.i.eb}).s(function(){throw t.a=null,new zi("network-request-failed")})},t.Ob=function(){return!0},t.va=function(t){this.g.push(t)},t.Ka=function(t){j(this.g,function(e){return e==t})},(t=ms.prototype).get=function(t){return Et(this.a.getItem(t)).then(function(t){return t&&mi(t)})},t.set=function(t,e){return Et(this.a.setItem(t,fi(e)))},t.P=function(t){return Et(this.a.removeItem(t))},t.Y=function(){},t.ca=function(){},(t=vs.prototype).set=function(t,e){var n,i=!1,o=this;return _s(this).then(function(e){return Es((e=bs(ws(n=e,!0))).get(t))}).then(function(r){var a=bs(ws(n,!0));return r?(r.value=e,Es(a.put(r))):(o.b++,i=!0,(r={}).fbase_key=t,r.value=e,Es(a.add(r)))}).then(function(){o.f[t]=e}).ia(function(){i&&o.b--})},t.get=function(t){return _s(this).then(function(e){return Es(bs(ws(e,!1)).get(t))}).then(function(t){return t&&t.value})},t.P=function(t){var e=!1,n=this;return _s(this).then(function(i){return e=!0,n.b++,Es(bs(ws(i,!0)).delete(t))}).then(function(){delete n.f[t]}).ia(function(){e&&n.b--})},t.Mc=function(){var t=this;return _s(this).then(function(t){var e=bs(ws(t,!1));return e.getAll?Es(e.getAll()):new mt(function(t,n){var i=[],o=e.openCursor();o.onsuccess=function(e){(e=e.target.result)?(i.push(e.value),e.continue()):t(i)},o.onerror=function(t){n(Error(t.target.errorCode))}})}).then(function(e){var n={},i=[];if(0==t.b){for(i=0;i<e.length;i++)n[e[i].fbase_key]=e[i].value;i=function t(e,n){var i,o=[];for(i in e)i in n?typeof e[i]!=typeof n[i]?o.push(i):"object"==typeof e[i]&&null!=e[i]&&null!=n[i]?0<t(e[i],n[i]).length&&o.push(i):e[i]!==n[i]&&o.push(i):o.push(i);for(i in n)i in e||o.push(i);return o}(t.f,n),t.f=n}return i})},t.Y=function(t){0==this.a.length&&function(t){t.c&&t.c.cancel("STOP_EVENT"),function e(){t.c=De(800).then(g(t.Mc,t)).then(function(e){0<e.length&&N(t.a,function(t){t(e)})}).then(e).s(function(t){"STOP_EVENT"!=t.message&&e()});return t.c}()}(this),this.a.push(t)},t.ca=function(t){j(this.a,function(e){return e==t}),0==this.a.length&&this.c&&this.c.cancel("STOP_EVENT")},(t=Ss.prototype).get=function(t){return this.b.then(function(e){return e.get(t)})},t.set=function(t,e){return this.b.then(function(n){return n.set(t,e)})},t.P=function(t){return this.b.then(function(e){return e.P(t)})},t.Y=function(t){this.a.push(t)},t.ca=function(t){j(this.a,function(e){return e==t})},(t=Cs.prototype).get=function(t){return Et(this.a[t])},t.set=function(t,e){return this.a[t]=e,Et()},t.P=function(t){return delete this.a[t],Et()},t.Y=function(){},t.ca=function(){},(t=xs.prototype).get=function(t){var e=this;return Et().then(function(){return mi(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Et().then(function(){var i=fi(e);null===i?n.P(t):n.a.setItem(t,i)})},t.P=function(t){var e=this;return Et().then(function(){e.a.removeItem(t)})},t.Y=function(t){n.window&&_e(n.window,"storage",t)},t.ca=function(t){n.window&&we(n.window,"storage",t)},(t=ks.prototype).get=function(){return Et(null)},t.set=function(){return Et()},t.P=function(){return Et()},t.Y=function(){},t.ca=function(){},(t=Is.prototype).get=function(t){var e=this;return Et().then(function(){return mi(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Et().then(function(){var i=fi(e);null===i?n.P(t):n.a.setItem(t,i)})},t.P=function(t){var e=this;return Et().then(function(){e.a.removeItem(t)})},t.Y=function(){},t.ca=function(){};var As,Os,Ns={A:xs,Qa:Is},Rs={A:xs,Qa:Is},Ds={A:ms,Qa:ks},Ms={A:xs,Qa:ks},Fs={Zc:"local",NONE:"none",ad:"session"};function js(){var t=!(gi(ai())||!Xn()),e=di(),i=li();this.o=t,this.h=e,this.m=i,this.a={},As||(As=new Ls),t=As;try{this.g=!Wn()&&Ei()||!n.indexedDB?new t.a.A:new Ss(Jn()?new Cs:new t.a.A)}catch(t){this.g=new Cs,this.h=!0}try{this.i=new t.a.Qa}catch(t){this.i=new Cs}this.l=new Cs,this.f=g(this.Nb,this),this.b={}}function Bs(){return Os||(Os=new js),Os}function zs(t,e){switch(e){case"session":return t.i;case"none":return t.l;default:return t.g}}function Us(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Ws(t,e,n){return n=Us(e,n),"local"==e.A&&(t.b[n]=null),zs(t,e.A).P(n)}function Vs(t){t.c&&(clearInterval(t.c),t.c=null)}function Hs(t){this.a=t,this.b=Bs()}(t=js.prototype).get=function(t,e){return zs(this,t.A).get(Us(t,e))},t.set=function(t,e,n){var i=Us(t,n),o=this,r=zs(this,t.A);return r.set(i,e).then(function(){return r.get(i)}).then(function(e){"local"==t.A&&(o.b[i]=e)})},t.addListener=function(t,e,i){t=Us(t,e),this.m&&(this.b[t]=n.localStorage.getItem(t)),ot(this.a)&&(zs(this,"local").Y(this.f),this.h||(Wn()||!Ei())&&n.indexedDB||!this.m||function(t){Vs(t),t.c=setInterval(function(){for(var e in t.a){var i=n.localStorage.getItem(e),o=t.b[e];i!=o&&(t.b[e]=i,i=new se({type:"storage",key:e,target:window,oldValue:o,newValue:i,a:!0}),t.Nb(i))}},1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(i)},t.removeListener=function(t,e,n){t=Us(t,e),this.a[t]&&(j(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),ot(this.a)&&(zs(this,"local").ca(this.f),Vs(this))},t.Nb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var i in this.a){var o=this.b[i];void 0===o&&(o=null);var r=n.localStorage.getItem(i);r!==o&&(this.b[i]=r,this.Wa(i))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?zs(this,"local").ca(this.f):Vs(this),this.o)if(i=n.localStorage.getItem(e),(o=t.a.newValue)!==i)null!==o?n.localStorage.setItem(e,o):n.localStorage.removeItem(e);else if(this.b[e]===o&&void 0===t.a.a)return;var a=this;i=function(){void 0===t.a.a&&a.b[e]===n.localStorage.getItem(e)||(a.b[e]=n.localStorage.getItem(e),a.Wa(e))},Vt&&Jt&&10==Jt&&n.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(i,10):i()}}else N(t,g(this.Wa,this))},t.Wa=function(t){this.a[t]&&N(this.a[t],function(t){t()})};var qs,Zs={name:"authEvent",A:"local"};function Ks(){this.a=Bs()}function Gs(t,e){this.b=-1,this.b=Qs,this.f=n.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.m=n.Int32Array?new Int32Array(64):Array(64),void 0!==qs||(qs=n.Int32Array?new Int32Array(nl):nl),this.reset()}b(Gs,function(){this.b=-1});for(var Qs=64,Ys=Qs-1,Xs=[],Js=0;Js<Ys;Js++)Xs[Js]=0;var $s=B(128,Xs);function tl(t){for(var e=t.f,n=t.m,i=0,o=0;o<e.length;)n[i++]=e[o]<<24|e[o+1]<<16|e[o+2]<<8|e[o+3],o=4*i;for(e=16;64>e;e++){o=0|n[e-15],i=0|n[e-2];var r=(0|n[e-16])+((o>>>7|o<<25)^(o>>>18|o<<14)^o>>>3)|0,a=(0|n[e-7])+((i>>>17|i<<15)^(i>>>19|i<<13)^i>>>10)|0;n[e]=r+a|0}i=0|t.a[0],o=0|t.a[1];var s=0|t.a[2],l=0|t.a[3],u=0|t.a[4],c=0|t.a[5],h=0|t.a[6];for(r=0|t.a[7],e=0;64>e;e++){var d=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&o^i&s^o&s)|0;a=(r=r+((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))|0)+((a=(a=u&c^~u&h)+(0|qs[e])|0)+(0|n[e])|0)|0,r=h,h=c,c=u,u=l+a|0,l=s,s=o,o=i,i=a+d|0}t.a[0]=t.a[0]+i|0,t.a[1]=t.a[1]+o|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+l|0,t.a[4]=t.a[4]+u|0,t.a[5]=t.a[5]+c|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+r|0}function el(t,e,n){void 0===n&&(n=e.length);var i=0,r=t.c;if(o(e))for(;i<n;)t.f[r++]=e.charCodeAt(i++),r==t.b&&(tl(t),r=0);else{if(!c(e))throw Error("message must be string or array");for(;i<n;){var a=e[i++];if(!("number"==typeof a&&0<=a&&255>=a&&a==(0|a)))throw Error("message must be a byte array");t.f[r++]=a,r==t.b&&(tl(t),r=0)}}t.c=r,t.g+=n}Gs.prototype.reset=function(){this.g=this.c=0,this.a=n.Int32Array?new Int32Array(this.h):z(this.h)};var nl=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function il(){Gs.call(this,8,ol)}b(il,Gs);var ol=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function rl(t,e,n,i,o){this.l=t,this.i=e,this.m=n,this.o=i||null,this.u=o||null,this.h=e+":"+n,this.v=new Ks,this.g=new Hs(this.h),this.f=null,this.b=[],this.a=this.c=null}function al(t){return new zi("invalid-cordova-configuration",t)}function sl(t){var e=new il;el(e,t),t=[];var n=8*e.g;56>e.c?el(e,$s,56-e.c):el(e,$s,e.b-(e.c-56));for(var i=63;56<=i;i--)e.f[i]=255&n,n/=256;for(tl(e),i=n=0;i<e.i;i++)for(var o=24;0<=o;o-=8)t[n++]=e.a[i]>>o&255;return function(t){return R(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(t)}function ll(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function ul(t){return t.f||(t.f=t.ga().then(function(){return new mt(function(e){t.va(function n(i){return e(i),t.Ka(n),!1}),function(t){function e(e){o=!0,r&&r.cancel(),cl(t).then(function(n){var o=i;if(n&&e&&e.url){var r=null;-1!=(o=wo(e.url)).indexOf("/__/auth/callback")&&(r=(r="object"==typeof(r=mi(Ke(r=Ge(o),"firebaseError")||null))?Ui(r):null)?new qo(n.b,n.c,null,null,r):new qo(n.b,n.c,o,n.g)),o=r||i}ll(t,o)})}var i=new qo("unknown",null,null,null,new zi("no-auth-event")),o=!1,r=De(500).then(function(){return cl(t).then(function(){o||ll(t,i)})}),a=n.handleOpenURL;n.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(si("BuildInfo.packageName",n).toLowerCase()+"://")&&e({url:t}),"function"==typeof a)try{a(t)}catch(t){console.error(t)}},Go||(Go=new Ko),Go.subscribe(e)}(t)})})),t.f}function cl(t){var e=null;return function(t){return t.b.get(Zs,t.a).then(function(t){return Zo(t)})}(t.g).then(function(n){return e=n,Ws((n=t.g).b,Zs,n.a)}).then(function(){return e})}function hl(t){this.a=t,this.b=Bs()}(t=rl.prototype).ga=function(){return this.za?this.za:this.za=(Yn(void 0)?Qn().then(function(){return new mt(function(t,e){var i=n.document,o=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);i.addEventListener("deviceready",function(){clearTimeout(o),t()},!1)})}):St(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof si("universalLinks.subscribe",n))throw al("cordova-universal-links-plugin is not installed");if(void 0===si("BuildInfo.packageName",n))throw al("cordova-plugin-buildinfo is not installed");if("function"!=typeof si("cordova.plugins.browsertab.openUrl",n))throw al("cordova-plugin-browsertab is not installed");if("function"!=typeof si("cordova.InAppBrowser.open",n))throw al("cordova-plugin-inappbrowser is not installed")},function(){throw new zi("cordova-not-ready")})},t.Ea=function(t,e){return e(new zi("operation-not-supported-in-this-environment")),Et()},t.Bb=function(){return St(new zi("operation-not-supported-in-this-environment"))},t.Ob=function(){return!1},t.Kb=function(){return!0},t.Fb=function(){return!0},t.Ca=function(t,e,i){if(this.c)return St(new zi("redirect-operation-pending"));var o=this,r=n.document,a=null,s=null,l=null,u=null;return this.c=Et().then(function(){return Ho(e),ul(o)}).then(function(){return function(t,e,i,o){var r=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new qo(e,o,null,r,new zi("no-auth-event")),s=si("BuildInfo.packageName",n);if("string"!=typeof s)throw new zi("invalid-cordova-configuration");var l=si("BuildInfo.displayName",n),u={};if(ai().toLowerCase().match(/iphone|ipad|ipod/))u.ibi=s;else{if(!ai().toLowerCase().match(/android/))return St(new zi("operation-not-supported-in-this-environment"));u.apn=s}l&&(u.appDisplayName=l),r=sl(r),u.sessionId=r;var c=ps(t.l,t.i,t.m,e,i,null,o,t.o,u,t.u);return t.ga().then(function(){var e=t.h;return t.v.a.set(Zs,a.D(),e)}).then(function(){var e=si("cordova.plugins.browsertab.isAvailable",n);if("function"!=typeof e)throw new zi("invalid-cordova-configuration");var i=null;e(function(e){if(e){if("function"!=typeof(i=si("cordova.plugins.browsertab.openUrl",n)))throw new zi("invalid-cordova-configuration");i(c)}else{if("function"!=typeof(i=si("cordova.InAppBrowser.open",n)))throw new zi("invalid-cordova-configuration");e=!(!(e=ai()).match(/(iPad|iPhone|iPod).*OS 7_\d/i)&&!e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)),t.a=i(c,e?"_blank":"_system","location=yes")}})})}(o,t,e,i)}).then(function(){return new mt(function(t,e){s=function(){var e=si("cordova.plugins.browsertab.close",n);return t(),"function"==typeof e&&e(),o.a&&"function"==typeof o.a.close&&(o.a.close(),o.a=null),!1},o.va(s),l=function(){a||(a=De(2e3).then(function(){e(new zi("redirect-cancelled-by-user"))}))},u=function(){bi()&&l()},r.addEventListener("resume",l,!1),ai().toLowerCase().match(/android/)||r.addEventListener("visibilitychange",u,!1)}).s(function(t){return cl(o).then(function(){throw t})})}).ia(function(){l&&r.removeEventListener("resume",l,!1),u&&r.removeEventListener("visibilitychange",u,!1),a&&a.cancel(),s&&o.Ka(s),o.c=null})},t.va=function(t){this.b.push(t),ul(this).s(function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new qo("unknown",null,null,null,new zi("no-auth-event")),t(e))})},t.Ka=function(t){j(this.b,function(e){return e==t})};var dl={name:"pendingRedirect",A:"session"};function fl(t){return Ws(t.b,dl,t.a)}function pl(t,e,n){this.u=t,this.m=e,this.l=n,this.h=[],this.f=!1,this.i=g(this.ab,this),this.b=new Cl,this.o=new Il,this.g=new hl(this.m+":"+this.l),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.o,this.c.linkViaPopup=this.o,this.c.reauthViaPopup=this.o,this.a=ml(this.u,this.m,this.l,Ja)}function ml(t,e,n,o){var r=i.a.SDK_VERSION||null;return Yn()?new rl(t,e,n,r,o):new cs(t,e,n,r,o)}function vl(t){t.f||(t.f=!0,t.a.va(t.i));var e=t.a;return t.a.ga().s(function(n){throw t.a==e&&t.reset(),n})}function gl(t){t.a.Kb()&&vl(t).s(function(e){var n=new qo("unknown",null,null,null,new zi("operation-not-supported-in-this-environment"));wl(e)&&t.ab(n)}),t.a.Fb()||xl(t.b)}(t=pl.prototype).reset=function(){this.f=!1,this.a.Ka(this.i),this.a=ml(this.u,this.m,this.l)},t.Xa=function(){this.b.Xa()},t.subscribe=function(t){if(M(this.h,t)||this.h.push(t),!this.f){var e=this;(function(t){return t.b.get(dl,t.a).then(function(t){return"pending"==t})})(this.g).then(function(t){t?fl(e.g).then(function(){vl(e).s(function(t){var n=new qo("unknown",null,null,null,new zi("operation-not-supported-in-this-environment"));wl(t)&&e.ab(n)})}):gl(e)}).s(function(){gl(e)})}},t.unsubscribe=function(t){j(this.h,function(e){return e==t})},t.ab=function(t){if(!t)throw new zi("invalid-auth-event");for(var e=!1,n=0;n<this.h.length;n++){var i=this.h[n];if(i.ub(t.b,t.c)){(e=this.c[t.b])&&e.h(t,i),e=!0;break}}return xl(this.b),e};var _l=new yi(2e3,1e4),yl=new yi(3e4,6e4);function bl(t,e,n,i,o,r){return t.a.Bb(e,n,i,function(){t.f||(t.f=!0,t.a.va(t.i))},function(){t.reset()},o,r)}function wl(t){return!(!t||"auth/cordova-not-ready"!=t.code)}pl.prototype.fa=function(){return this.b.fa()},pl.prototype.Ca=function(t,e,n){var i,o=this;return function(t){return t.b.set(dl,"pending",t.a)}(this.g).then(function(){return o.a.Ca(t,e,n).s(function(t){if(wl(t))throw new zi("operation-not-supported-in-this-environment");return i=t,fl(o.g).then(function(){throw i})}).then(function(){return o.a.Ob()?new mt(function(){}):fl(o.g).then(function(){return o.fa()}).then(function(){}).s(function(){})})})},pl.prototype.Ea=function(t,e,n,i){return this.a.Ea(n,function(n){t.ha(e,null,n,i)},_l.get())};var El={};function Sl(t,e,n){var i=e+":"+n;return El[i]||(El[i]=new pl(t,e,n)),El[i]}function Cl(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function xl(t){t.g||(t.g=!0,kl(t,!1,null,null))}function Tl(t,e){if(t.b=function(){return Et(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function kl(t,e,n,i){e?i?function(t,e){if(t.b=function(){return St(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,i):Tl(t,n):Tl(t,{user:null}),t.f=[],t.c=[]}function Il(){}function Pl(){this.rb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.rb},set:function(t){this.rb=t},enumerable:!1})}function Ll(t,e){this.a=e,ki(this,"verificationId",t)}function Al(t,e,n,i){return new Uo(t).Ta(e,n).then(function(t){return new Ll(t,i)})}function Ol(t){var e=ro(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new zi("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Ii(this,{token:t,expirationTime:wi(1e3*e.exp),authTime:wi(1e3*e.auth_time),issuedAtTime:wi(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,claims:e})}function Nl(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Rl(t){this.f=t,this.b=this.a=null,this.c=0}function Dl(t,e){var n=e[ea],i=e.refreshToken;e=Ml(e.expiresIn),t.b=n,t.c=e,t.a=i}function Ml(t){return y()+1e3*parseInt(t,10)}function Fl(t,e){return function(t,e){return new mt(function(n,i){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?la(t,t.i+"?key="+encodeURIComponent(t.b),function(t){t?t.error?i(Xa(t)):t.access_token&&t.refresh_token?n(t):i(new zi("internal-error")):i(new zi("network-request-failed"))},"POST",sn(e).toString(),t.f,t.m.get()):i(new zi("internal-error"))})}(t.f,e).then(function(e){return t.b=e.access_token,t.c=Ml(e.expires_in),t.a=e.refresh_token,{accessToken:t.b,expirationTime:t.c,refreshToken:t.a}}).s(function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e})}function jl(t,e){this.a=t||null,this.b=e||null,Ii(this,{lastSignInTime:wi(e||null),creationTime:wi(t||null)})}function Bl(t,e,n,i,o,r){Ii(this,{uid:t,displayName:i||null,photoURL:o||null,email:n||null,phoneNumber:r||null,providerId:e})}function zl(t,e){for(var n in ae.call(this,t),e)this[n]=e[n]}function Ul(t,e,n){this.G=[],this.l=t.apiKey,this.o=t.appName,this.u=t.authDomain||null,t=i.a.SDK_VERSION?ri(i.a.SDK_VERSION):null,this.b=new $r(this.l,ts(Ja),t),this.h=new Rl(this.b),Gl(this,e[ea]),Dl(this.h,e),ki(this,"refreshToken",this.h.a),Xl(this,n||{}),Le.call(this),this.I=!1,this.u&&ui()&&(this.a=Sl(this.u,this.l,this.o)),this.N=[],this.i=null,this.w=function(t){return new Nl(function(){return t.F(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var e=t.h.c-y()-3e5;return 0<e?e:0})}(this),this.V=g(this.Ha,this);var o=this;this.ka=null,this.sa=function(t){o.oa(t.g)},this.X=null,this.O=[],this.ra=function(t){Vl(o,t.c)},this.W=null}function Wl(t,e){t.X&&we(t.X,"languageCodeChanged",t.sa),(t.X=e)&&_e(e,"languageCodeChanged",t.sa)}function Vl(t,e){t.O=e,sa(t.b,i.a.SDK_VERSION?ri(i.a.SDK_VERSION,t.O):null)}function Hl(t,e){t.W&&we(t.W,"frameworkChanged",t.ra),(t.W=e)&&_e(e,"frameworkChanged",t.ra)}function ql(t){try{return i.a.app(t.o).auth()}catch(e){throw new zi("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.o+"'!")}}function Zl(t){t.C||t.w.b||(t.w.start(),we(t,"tokenChanged",t.V),_e(t,"tokenChanged",t.V))}function Kl(t){we(t,"tokenChanged",t.V),t.w.stop()}function Gl(t,e){t.qa=e,ki(t,"_lat",e)}function Ql(t){for(var e=[],n=0;n<t.N.length;n++)e.push(t.N[n](t));return function(t){return new mt(function(e){var n=t.length,i=[];if(n)for(var o=function(t,o,r){n--,i[t]=o?{ac:!0,value:r}:{ac:!1,reason:r},0==n&&e(i)},r=0;r<t.length;r++)Ct(t[r],_(o,r,!0),_(o,r,!1));else e(i)})}(e).then(function(){return t})}function Yl(t){t.a&&!t.I&&(t.I=!0,t.a.subscribe(t))}function Xl(t,e){Ii(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,metadata:new jl(e.createdAt,e.lastLoginAt),providerData:[]})}function Jl(){}function $l(t){return Et().then(function(){if(t.C)throw new zi("app-deleted")})}function tu(t){return R(t.providerData,function(t){return t.providerId})}function eu(t,e){e&&(nu(t,e.providerId),t.providerData.push(e))}function nu(t,e){j(t.providerData,function(t){return t.providerId==e})}function iu(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&ki(t,e,n)}function ou(t,e){t!=e&&(Ii(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,providerData:[]}),e.metadata?ki(t,"metadata",function(t){return new jl(t.a,t.b)}(e.metadata)):ki(t,"metadata",new jl),N(e.providerData,function(e){eu(t,e)}),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.h,e.h),ki(t,"refreshToken",t.h.a))}function ru(t){return t.F().then(function(e){var n=t.isAnonymous;return function(t,e){return Qa(t.b,La,{idToken:e}).then(g(t.wc,t))}(t,e).then(function(){return n||iu(t,"isAnonymous",!1),e})})}function au(t,e){e[ea]&&t.qa!=e[ea]&&(Dl(t.h,e),t.dispatchEvent(new zl("tokenChanged")),Gl(t,e[ea]),iu(t,"refreshToken",t.h.a))}function su(t,e){return ru(t).then(function(){if(M(tu(t),e))return Ql(t).then(function(){throw new zi("provider-already-linked")})})}function lu(t,e,n){return Pi({user:t,credential:Vo(e),additionalUserInfo:e=co(e),operationType:n})}function uu(t,e){return au(t,e),t.reload().then(function(){return t})}function cu(t,e,n,o,r){if(!ui())return St(new zi("operation-not-supported-in-this-environment"));if(t.i&&!r)return St(t.i);var a=uo(n.providerId),s=vi(t.uid+":::"),l=null;(!di()||Xn())&&t.u&&n.isOAuthProvider&&(l=ps(t.u,t.l,t.o,e,n,null,s,i.a.SDK_VERSION||null));var u=Kn(l,a&&a.Ba,a&&a.Aa);return o=o().then(function(){if(du(t),!r)return t.F().then(function(){})}).then(function(){return bl(t.a,u,e,n,s,!!l)}).then(function(){return new mt(function(n,i){t.ha(e,null,new zi("cancelled-popup-request"),t.g||null),t.f=n,t.v=i,t.g=s,t.c=t.a.Ea(t,e,u,s)})}).then(function(t){return u&&Zn(u),t?Pi(t):null}).s(function(t){throw u&&Zn(u),t}),fu(t,o,r)}function hu(t,e,n,i,o){if(!ui())return St(new zi("operation-not-supported-in-this-environment"));if(t.i&&!o)return St(t.i);var r=null,a=vi(t.uid+":::");return i=i().then(function(){if(du(t),!o)return t.F().then(function(){})}).then(function(){return t.aa=a,Ql(t)}).then(function(e){return t.ba&&(e=(e=t.ba).b.set(vu,t.D(),e.a)),e}).then(function(){return t.a.Ca(e,n,a)}).s(function(e){if(r=e,t.ba)return gu(t.ba);throw r}).then(function(){if(r)throw r}),fu(t,i,o)}function du(t){if(!t.a||!t.I){if(t.a&&!t.I)throw new zi("internal-error");throw new zi("auth-domain-config-required")}}function fu(t,e,n){var i=function(t,e,n){return t.i&&!n?(e.cancel(),St(t.i)):e.s(function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new zl("userInvalidated")),t.i=e),e})}(t,e,n);return t.G.push(i),i.ia(function(){F(t.G,i)}),i}function pu(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!(t.stsTokenManager&&t.stsTokenManager.accessToken&&t.stsTokenManager.expirationTime))return null;n[ea]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null,n.expiresIn=(t.stsTokenManager.expirationTime-y())/1e3;var i=new Ul(e,n,t);return t.providerData&&N(t.providerData,function(t){t&&eu(i,Pi(t))}),t.redirectEventId&&(i.aa=t.redirectEventId),i}function mu(t){this.a=t,this.b=Bs()}Cl.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Cl.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.b,i=t.c,o=t.a&&"auth/web-storage-unsupported"==t.a.code,r=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!o&&!r),"unknown"!=n||o||r?t.a?(kl(this,!0,null,t.a),Et()):e.wa(n,i)?function(t,e,n){n=n.wa(e.b,e.c);var i=e.f,o=e.g,r=!!e.b.match(/Redirect$/);n(i,o).then(function(e){kl(t,r,e,null)}).s(function(e){kl(t,r,null,e)})}(this,t,e):St(new zi("invalid-auth-event")):(kl(this,!1,null,null),Et())}else St(new zi("invalid-auth-event"))},Cl.prototype.Xa=function(){this.g&&!this.i&&kl(this,!1,null,null)},Cl.prototype.fa=function(){var t=this;return new mt(function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new zi("timeout");t.a&&t.a.cancel(),t.a=De(yl.get()).then(function(){t.b||(t.g=!0,kl(t,!0,null,e))})}(t))})},Il.prototype.h=function(t,e){if(t){var n=t.b,i=t.c;t.a?(e.ha(t.b,null,t.a,t.c),Et()):e.wa(n,i)?function(t,e){var n=t.c,i=t.b;e.wa(i,n)(t.f,t.g).then(function(t){e.ha(i,t,null,n)}).s(function(t){e.ha(i,null,t,n)})}(t,e):St(new zi("invalid-auth-event"))}else St(new zi("invalid-auth-event"))},Ll.prototype.confirm=function(t){return t=Wo(this.verificationId,t),this.a(t)},Nl.prototype.start=function(){this.a=this.c,function t(e,i){e.stop();e.b=De(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(e,i)).then(function(){return t=n.document,e=null,bi()||!t?Et():new mt(function(n){e=function(){bi()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)}).s(function(n){throw t.removeEventListener("visibilitychange",e,!1),n});var t,e}).then(function(){return e.h()}).then(function(){t(e,!0)}).s(function(n){e.i(n)&&t(e,!1)})}(this,!0)},Nl.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Rl.prototype.D=function(){return{apiKey:this.f.b,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},Rl.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?St(new zi("user-token-expired")):t||!this.b||y()>this.c-3e4?this.a?Fl(this,{grant_type:"refresh_token",refresh_token:this.a}):Et(null):Et({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},jl.prototype.D=function(){return{lastLoginAt:this.b,createdAt:this.a}},b(zl,ae),b(Ul,Le),Ul.prototype.oa=function(t){this.ka=t,aa(this.b,t)},Ul.prototype.ea=function(){return this.ka},Ul.prototype.xa=function(){return z(this.O)},Ul.prototype.Ha=function(){this.w.b&&(this.w.stop(),this.w.start())},ki(Ul.prototype,"providerId","firebase"),(t=Ul.prototype).reload=function(){var t=this;return fu(this,$l(this).then(function(){return ru(t).then(function(){return Ql(t)}).then(Jl)}))},t.cc=function(t){return this.F(t).then(function(t){return new Ol(t)})},t.F=function(t){var e=this;return fu(this,$l(this).then(function(){return e.h.getToken(t)}).then(function(t){if(!t)throw new zi("internal-error");return t.accessToken!=e.qa&&(Gl(e,t.accessToken),e.dispatchEvent(new zl("tokenChanged"))),iu(e,"refreshToken",t.refreshToken),t.accessToken}))},t.wc=function(t){if(!(t=t.users)||!t.length)throw new zi("internal-error");Xl(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?R(t,function(t){return new Bl(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]}(t),n=0;n<e.length;n++)eu(this,e[n]);iu(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length))},t.fb=function(t){var e=this,n=null;return fu(this,t.f(this.b,this.uid).then(function(t){return au(e,t),n=lu(e,t,"reauthenticate"),e.i=null,e.reload()}).then(function(){return n}),!0)},t.xc=function(t){return xi("firebase.User.prototype.reauthenticateWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential instead."),this.fb(t).then(function(){})},t.cb=function(t){var e=this,n=null;return fu(this,su(this,t.providerId).then(function(){return e.F()}).then(function(n){return t.c(e.b,n)}).then(function(t){return n=lu(e,t,"link"),uu(e,t)}).then(function(){return n}))},t.oc=function(t){return xi("firebase.User.prototype.linkWithCredential is deprecated. Please use firebase.User.prototype.linkAndRetrieveDataWithCredential instead."),this.cb(t).then(function(t){return t.user})},t.pc=function(t,e){var n=this;return fu(this,su(this,"phone").then(function(){return Al(ql(n),t,e,g(n.cb,n))}))},t.yc=function(t,e){var n=this;return fu(this,Et().then(function(){return Al(ql(n),t,e,g(n.fb,n))}),!0)},t.ob=function(t){var e=this;return fu(this,this.F().then(function(n){return e.b.ob(n,t)}).then(function(t){return au(e,t),e.reload()}))},t.Rc=function(t){var e=this;return fu(this,this.F().then(function(n){return t.c(e.b,n)}).then(function(t){return au(e,t),e.reload()}))},t.pb=function(t){var e=this;return fu(this,this.F().then(function(n){return e.b.pb(n,t)}).then(function(t){return au(e,t),e.reload()}))},t.qb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return $l(this);var e=this;return fu(this,this.F().then(function(n){return e.b.qb(n,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(t){return au(e,t),iu(e,"displayName",t.displayName||null),iu(e,"photoURL",t.photoUrl||null),N(e.providerData,function(t){"password"===t.providerId&&(ki(t,"displayName",e.displayName),ki(t,"photoURL",e.photoURL))}),Ql(e)}).then(Jl))},t.Pc=function(t){var e=this;return fu(this,ru(this).then(function(n){return M(tu(e),t)?function(t,e,n){return Qa(t,ka,{idToken:e,deleteProvider:n})}(e.b,n,[t]).then(function(t){var n={};return N(t.providerUserInfo||[],function(t){n[t.providerId]=!0}),N(tu(e),function(t){n[t]||nu(e,t)}),n[Uo.PROVIDER_ID]||ki(e,"phoneNumber",null),Ql(e)}):Ql(e).then(function(){throw new zi("no-such-provider")})}))},t.delete=function(){var t=this;return fu(this,this.F().then(function(e){return Qa(t.b,Ta,{idToken:e})}).then(function(){t.dispatchEvent(new zl("userDeleted"))})).then(function(){for(var e=0;e<t.G.length;e++)t.G[e].cancel("app-deleted");Wl(t,null),Hl(t,null),t.G=[],t.C=!0,Kl(t),ki(t,"refreshToken",null),t.a&&t.a.unsubscribe(t)})},t.ub=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.aa||null)==e||"reauthViaRedirect"==t&&(this.aa||null)==e)},t.ha=function(t,e,n,i){"linkViaPopup"!=t&&"reauthViaPopup"!=t||i!=(this.g||null)||(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.wa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?g(this.zb,this):"reauthViaPopup"==t&&e==(this.g||null)?g(this.Ab,this):"linkViaRedirect"==t&&(this.aa||null)==e?g(this.zb,this):"reauthViaRedirect"==t&&(this.aa||null)==e?g(this.Ab,this):null},t.qc=function(t){var e=this;return cu(this,"linkViaPopup",t,function(){return su(e,t.providerId).then(function(){return Ql(e)})},!1)},t.zc=function(t){return cu(this,"reauthViaPopup",t,function(){return Et()},!0)},t.rc=function(t){var e=this;return hu(this,"linkViaRedirect",t,function(){return su(e,t.providerId)},!1)},t.Ac=function(t){return hu(this,"reauthViaRedirect",t,function(){return Et()},!0)},t.zb=function(t,e){var n=this;this.c&&(this.c.cancel(),this.c=null);var i=null;return fu(this,this.F().then(function(i){return ya(n.b,{requestUri:t,sessionId:e,idToken:i})}).then(function(t){return i=lu(n,t,"link"),uu(n,t)}).then(function(){return i}))},t.Ab=function(t,e){var n=this;this.c&&(this.c.cancel(),this.c=null);var i=null;return fu(this,Et().then(function(){return Eo(ba(n.b,{requestUri:t,sessionId:e}),n.uid)}).then(function(t){return i=lu(n,t,"reauthenticate"),au(n,t),n.i=null,n.reload()}).then(function(){return i}),!0)},t.ib=function(t){var e=this,n=null;return fu(this,this.F().then(function(e){return n=e,void 0===t||ot(t)?{}:$i(new Hi(t))}).then(function(t){return e.b.ib(n,t)}).then(function(t){if(e.email!=t)return e.reload()}).then(function(){}))},t.toJSON=function(){return this.D()},t.D=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,providerData:[],apiKey:this.l,appName:this.o,authDomain:this.u,stsTokenManager:this.h.D(),redirectEventId:this.aa||null};return this.metadata&&ut(t,this.metadata.D()),N(this.providerData,function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))}),t};var vu={name:"redirectUser",A:"session"};function gu(t){return Ws(t.b,vu,t.a)}function _u(t){this.a=t,this.b=Bs(),this.c=null,this.f=function(t){var e=wu("local"),i=wu("session"),o=wu("none");return function(t,e,i){var o=Us(e,i),r=zs(t,e.A);return t.get(e,i).then(function(a){var s=null;try{s=mi(n.localStorage.getItem(o))}catch(t){}if(s&&!a)return n.localStorage.removeItem(o),t.set(e,s,i);s&&a&&"localStorage"!=r.type&&n.localStorage.removeItem(o)})}(t.b,e,t.a).then(function(){return t.b.get(i,t.a)}).then(function(n){return n?i:t.b.get(o,t.a).then(function(n){return n?o:t.b.get(e,t.a).then(function(n){return n?e:t.b.get(bu,t.a).then(function(t){return t?wu(t):e})})})}).then(function(e){return t.c=e,yu(t,e.A)}).s(function(){t.c||(t.c=e)})}(this),this.b.addListener(wu("local"),this.a,g(this.g,this))}function yu(t,e){var n,i=[];for(n in Fs)Fs[n]!==e&&i.push(Ws(t.b,wu(Fs[n]),t.a));return i.push(Ws(t.b,bu,t.a)),function(t){return new mt(function(e,n){var i=t.length,o=[];if(i)for(var r=function(t,n){i--,o[t]=n,0==i&&e(o)},a=function(t){n(t)},s=0;s<t.length;s++)Ct(t[s],_(r,s),a);else e(o)})}(i)}_u.prototype.g=function(){var t=this,e=wu("local");xu(this,function(){return Et().then(function(){return t.c&&"local"!=t.c.A?t.b.get(e,t.a):null}).then(function(n){if(n)return yu(t,"local").then(function(){t.c=e})})})};var bu={name:"persistence",A:"session"};function wu(t){return{name:"authUser",A:t}}function Eu(t,e){return xu(t,function(){return t.b.set(t.c,e.D(),t.a)})}function Su(t){return xu(t,function(){return Ws(t.b,t.c,t.a)})}function Cu(t,e){return xu(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),pu(t||{})})})}function xu(t,e){return t.f=t.f.then(e,e),t.f}function Tu(t){if(this.l=!1,ki(this,"settings",new Pl),ki(this,"app",t),!Nu(this).options||!Nu(this).options.apiKey)throw new zi("invalid-api-key");t=i.a.SDK_VERSION?ri(i.a.SDK_VERSION):null,this.b=new $r(Nu(this).options&&Nu(this).options.apiKey,ts(Ja),t),this.N=[],this.o=[],this.I=[],this.Rb=i.a.INTERNAL.createSubscribe(g(this.kc,this)),this.O=void 0,this.Sb=i.a.INTERNAL.createSubscribe(g(this.mc,this)),Au(this,null),this.h=new _u(Nu(this).options.apiKey+":"+Nu(this).name),this.w=new mu(Nu(this).options.apiKey+":"+Nu(this).name),this.V=Fu(this,function(t){var e=Nu(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(vu,t.a).then(function(t){return t&&e&&(t.authDomain=e),pu(t||{})})}(t.w,Nu(t).options.authDomain).then(function(e){return(t.C=e)&&(e.ba=t.w),gu(t.w)});return Fu(t,e)}(t).then(function(){return Cu(t.h,e)}).then(function(e){return e?(e.ba=t.w,t.C&&(t.C.aa||null)==(e.aa||null)?e:e.reload().then(function(){return Eu(t.h,e).then(function(){return e})}).s(function(n){return"auth/network-request-failed"==n.code?e:Su(t.h)})):null}).then(function(e){Au(t,e||null)});return Fu(t,n)}(this)),this.i=Fu(this,function(t){return t.V.then(function(){return t.fa()}).s(function(){}).then(function(){if(!t.l)return t.ka()}).s(function(){}).then(function(){if(!t.l){t.X=!0;var e=t.h;e.b.addListener(wu("local"),e.a,t.ka)}})}(this)),this.X=!1,this.ka=g(this.Lc,this),this.Ha=g(this.Z,this),this.qa=g(this.$b,this),this.ra=g(this.ic,this),this.sa=g(this.jc,this),function(t){var e=Nu(t).options.authDomain,n=Nu(t).options.apiKey;e&&ui()&&(t.Qb=t.V.then(function(){if(!t.l){if(t.a=Sl(e,n,Nu(t).name),t.a.subscribe(t),Ru(t)&&Yl(Ru(t)),t.C){Yl(t.C);var i=t.C;i.oa(t.ea()),Wl(i,t),Vl(i=t.C,t.G),Hl(i,t),t.C=null}return t.a}}))}(this),this.INTERNAL={},this.INTERNAL.delete=g(this.delete,this),this.INTERNAL.logFramework=g(this.sc,this),this.u=0,Le.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ea()},set:function(t){this.oa(t)},enumerable:!1}),t.W=null}(this),this.G=[]}function ku(t){ae.call(this,"languageCodeChanged"),this.g=t}function Iu(t){ae.call(this,"frameworkChanged"),this.c=t}function Pu(t){return t.Qb||St(new zi("auth-domain-config-required"))}function Lu(t,e){var n={};return n.apiKey=Nu(t).options.apiKey,n.authDomain=Nu(t).options.authDomain,n.appName=Nu(t).name,t.V.then(function(){return function(t,e,n,i){var o=new Ul(t,e);return n&&(o.ba=n),i&&Vl(o,i),o.reload().then(function(){return o})}(n,e,t.w,t.xa())}).then(function(e){return Ru(t)&&e.uid==Ru(t).uid?(ou(Ru(t),e),t.Z(e)):(Au(t,e),Yl(e),t.Z(e))}).then(function(){Mu(t)})}function Au(t,e){Ru(t)&&(function(t,e){j(t.N,function(t){return t==e})}(Ru(t),t.Ha),we(Ru(t),"tokenChanged",t.qa),we(Ru(t),"userDeleted",t.ra),we(Ru(t),"userInvalidated",t.sa),Kl(Ru(t))),e&&(e.N.push(t.Ha),_e(e,"tokenChanged",t.qa),_e(e,"userDeleted",t.ra),_e(e,"userInvalidated",t.sa),0<t.u&&Zl(e)),ki(t,"currentUser",e),e&&(e.oa(t.ea()),Wl(e,t),Vl(e,t.G),Hl(e,t))}function Ou(t,e){var n=null,i=null;return Fu(t,e.then(function(e){return n=Vo(e),i=co(e),Lu(t,e)}).then(function(){return Pi({user:Ru(t),credential:n,additionalUserInfo:i,operationType:"signIn"})}))}function Nu(t){return t.app}function Ru(t){return t.currentUser}function Du(t){return Ru(t)&&Ru(t)._lat||null}function Mu(t){if(t.X){for(var e=0;e<t.o.length;e++)t.o[e]&&t.o[e](Du(t));if(t.O!==t.getUid()&&t.I.length)for(t.O=t.getUid(),e=0;e<t.I.length;e++)t.I[e]&&t.I[e](Du(t))}}function Fu(t,e){return t.N.push(e),e.ia(function(){F(t.N,e)}),e}function ju(){}function Bu(){this.a={},this.b=1e12}_u.prototype.lb=function(t){var e=null,n=this;return function(t){var e=new zi("invalid-persistence-type"),n=new zi("unsupported-persistence-type");t:{for(i in Fs)if(Fs[i]==t){var i=!0;break t}i=!1}if(!i||"string"!=typeof t)throw e;switch($n()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;default:if(!li()&&"none"!==t)throw n}}(t),xu(this,function(){return t!=n.c.A?n.b.get(n.c,n.a).then(function(i){return e=i,yu(n,t)}).then(function(){if(n.c=wu(t),e)return n.b.set(n.c,e,n.a)}):Et()})},b(Tu,Le),b(ku,ae),b(Iu,ae),(t=Tu.prototype).lb=function(t){return Fu(this,t=this.h.lb(t))},t.oa=function(t){this.W===t||this.l||(this.W=t,aa(this.b,this.W),this.dispatchEvent(new ku(this.ea())))},t.ea=function(){return this.W},t.Sc=function(){var t=n.navigator;this.oa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.sc=function(t){this.G.push(t),sa(this.b,i.a.SDK_VERSION?ri(i.a.SDK_VERSION,this.G):null),this.dispatchEvent(new Iu(this.G))},t.xa=function(){return z(this.G)},t.toJSON=function(){return{apiKey:Nu(this).options.apiKey,authDomain:Nu(this).options.authDomain,appName:Nu(this).name,currentUser:Ru(this)&&Ru(this).D()}},t.ub=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.ha=function(t,e,n,i){"signInViaPopup"==t&&this.g==i&&(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.wa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?g(this.Zb,this):null},t.Zb=function(t,e){var n=this;t={requestUri:t,sessionId:e},this.c&&(this.c.cancel(),this.c=null);var i=null,o=null,r=_a(n.b,t).then(function(t){return i=Vo(t),o=co(t),t});return Fu(this,t=n.V.then(function(){return r}).then(function(t){return Lu(n,t)}).then(function(){return Pi({user:Ru(n),credential:i,additionalUserInfo:o,operationType:"signIn"})}))},t.Jc=function(t){if(!ui())return St(new zi("operation-not-supported-in-this-environment"));var e=this,n=uo(t.providerId),o=vi(),r=null;(!di()||Xn())&&Nu(this).options.authDomain&&t.isOAuthProvider&&(r=ps(Nu(this).options.authDomain,Nu(this).options.apiKey,Nu(this).name,"signInViaPopup",t,null,o,i.a.SDK_VERSION||null));var a=Kn(r,n&&n.Ba,n&&n.Aa);return Fu(this,n=Pu(this).then(function(e){return bl(e,a,"signInViaPopup",t,o,!!r)}).then(function(){return new mt(function(t,n){e.ha("signInViaPopup",null,new zi("cancelled-popup-request"),e.g),e.f=t,e.v=n,e.g=o,e.c=e.a.Ea(e,"signInViaPopup",a,o)})}).then(function(t){return a&&Zn(a),t?Pi(t):null}).s(function(t){throw a&&Zn(a),t}))},t.Kc=function(t){if(!ui())return St(new zi("operation-not-supported-in-this-environment"));var e=this;return Fu(this,Pu(this).then(function(){return xu(t=e.h,function(){return t.b.set(bu,t.c.A,t.a)});var t}).then(function(){return e.a.Ca("signInViaRedirect",t)}))},t.fa=function(){if(!ui())return St(new zi("operation-not-supported-in-this-environment"));var t=this;return Fu(this,Pu(this).then(function(){return t.a.fa()}).then(function(t){return t?Pi(t):null}))},t.Qc=function(t){if(!t)return St(new zi("null-user"));var e=this,n={};n.apiKey=Nu(this).options.apiKey,n.authDomain=Nu(this).options.authDomain,n.appName=Nu(this).name;var i=function(t,e,n,i){e=e||{apiKey:t.l,authDomain:t.u,appName:t.o};var o=t.h,r={};return r[ea]=o.b,r.refreshToken=o.a,r.expiresIn=(o.c-y())/1e3,e=new Ul(e,r),n&&(e.ba=n),i&&Vl(e,i),ou(e,t),e}(t,n,e.w,e.xa());return Fu(this,this.i.then(function(){if(Nu(e).options.apiKey!=t.l)return i.reload()}).then(function(){return Ru(e)&&t.uid==Ru(e).uid?(ou(Ru(e),t),e.Z(t)):(Au(e,i),Yl(i),e.Z(i))}).then(function(){Mu(e)}))},t.mb=function(){var t=this;return Fu(this,this.i.then(function(){return Ru(t)?(Au(t,null),Su(t.h).then(function(){Mu(t)})):Et()}))},t.Lc=function(){var t=this;return Cu(this.h,Nu(this).options.authDomain).then(function(e){if(!t.l){var n;if(n=Ru(t)&&e){n=Ru(t).uid;var i=e.uid;n=null!=n&&""!==n&&null!=i&&""!==i&&n==i}if(n)return ou(Ru(t),e),Ru(t).F();(Ru(t)||e)&&(Au(t,e),e&&(Yl(e),e.ba=t.w),t.a&&t.a.subscribe(t),Mu(t))}})},t.Z=function(t){return Eu(this.h,t)},t.$b=function(){Mu(this),this.Z(Ru(this))},t.ic=function(){this.mb()},t.jc=function(){this.mb()},t.kc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(Ru(e))})},t.mc=function(t){var e=this;!function(t,e){t.I.push(e),Fu(t,t.i.then(function(){!t.l&&M(t.I,e)&&t.O!==t.getUid()&&(t.O=t.getUid(),e(Du(t)))}))}(this,function(){t.next(Ru(e))})},t.uc=function(t,e,n){var o=this;return this.X&&i.a.Promise.resolve().then(function(){h(t)?t(Ru(o)):h(t.next)&&t.next(Ru(o))}),this.Rb(t,e,n)},t.tc=function(t,e,n){var o=this;return this.X&&i.a.Promise.resolve().then(function(){o.O=o.getUid(),h(t)?t(Ru(o)):h(t.next)&&t.next(Ru(o))}),this.Sb(t,e,n)},t.bc=function(t){var e=this;return Fu(this,this.i.then(function(){return Ru(e)?Ru(e).F(t).then(function(t){return{accessToken:t}}):null}))},t.Lb=function(t){var e=this;return this.i.then(function(){return Ou(e,Qa(e.b,Ha,{token:t}))}).then(function(t){var n=t.user;return iu(n,"isAnonymous",!1),e.Z(n),t})},t.Dc=function(t){return xi("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCustomToken is deprecated. Please use firebase.auth.Auth.prototype.signInWithCustomToken instead."),this.Lb(t)},t.Ec=function(t,e){return xi("firebase.auth.Auth.prototype.signInAndRetrieveDataWithEmailAndPassword is deprecated. Please use firebase.auth.Auth.prototype.signInWithEmailAndPassword instead."),this.Mb(t,e)},t.Mb=function(t,e){var n=this;return this.i.then(function(){return Ou(n,Qa(n.b,qa,{email:t,password:e}))})},t.wb=function(t,e){var n=this;return this.i.then(function(){return Ou(n,Qa(n.b,Ca,{email:t,password:e}))})},t.Ub=function(t,e){return xi("firebase.auth.Auth.prototype.createUserAndRetrieveDataWithEmailAndPassword is deprecated. Please use firebase.auth.Auth.prototype.createUserWithEmailAndPassword instead."),this.wb(t,e)},t.Gc=function(t){return xi("firebase.auth.Auth.prototype.signInWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential instead."),this.Oa(t).then(function(t){return t.user})},t.Oa=function(t){var e=this;return this.i.then(function(){return Ou(e,t.ya(e.b))})},t.Pa=function(){var t=this;return this.i.then(function(){var e=Ru(t);if(e&&e.isAnonymous){var n=Pi({providerId:null,isNewUser:!1});return Pi({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return Ou(t,t.b.Pa()).then(function(e){var n=e.user;return iu(n,"isAnonymous",!0),t.Z(n),e})})},t.Fc=function(){return xi("firebase.auth.Auth.prototype.signInAnonymouslyAndRetrieveData is deprecated. Please use firebase.auth.Auth.prototype.signInAnonymously instead."),this.Pa()},t.getUid=function(){return Ru(this)&&Ru(this).uid||null},t.Tb=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&Ru(this)&&Zl(Ru(this))},t.Bc=function(t){var e=this;N(this.o,function(n){n==t&&e.u--}),0>this.u&&(this.u=0),0==this.u&&Ru(this)&&Kl(Ru(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.o.push(t),Fu(this,this.i.then(function(){e.l||M(e.o,t)&&t(Du(e))}))},t.removeAuthTokenListener=function(t){j(this.o,function(e){return e==t})},t.delete=function(){this.l=!0;for(var t=0;t<this.N.length;t++)this.N[t].cancel("app-deleted");return this.N=[],this.h&&(t=this.h).b.removeListener(wu("local"),t.a,this.ka),this.a&&(this.a.unsubscribe(this),this.a.Xa()),i.a.Promise.resolve()},t.Xb=function(t){return xi("firebase.auth.Auth.prototype.fetchProvidersForEmail is deprecated. Please use firebase.auth.Auth.prototype.fetchSignInMethodsForEmail instead."),Fu(this,function(t,e){return Qa(t,xa,{identifier:e,continueUri:ci()?Vn():"http://localhost"}).then(function(t){return t.allProviders||[]})}(this.b,t))},t.Yb=function(t){return Fu(this,function(t,e){return Qa(t,xa,{identifier:e,continueUri:ci()?Vn():"http://localhost"}).then(function(t){return t.signinMethods||[]})}(this.b,t))},t.nc=function(t){return!!jo(t)},t.kb=function(t,e){var n=this;return Fu(this,Et().then(function(){var t=new Hi(e);if(!t.c)throw new zi("argument-error",Zi+" must be true when sending sign in link to email");return $i(t)}).then(function(e){return n.b.kb(t,e)}).then(function(){}))},t.Tc=function(t){return this.Ja(t).then(function(t){return t.data.email})},t.Ya=function(t,e){return Fu(this,this.b.Ya(t,e).then(function(){}))},t.Ja=function(t){return Fu(this,this.b.Ja(t).then(function(t){return new Ai(t)}))},t.Va=function(t){return Fu(this,this.b.Va(t).then(function(){}))},t.jb=function(t,e){var n=this;return Fu(this,Et().then(function(){return void 0===e||ot(e)?{}:$i(new Hi(e))}).then(function(e){return n.b.jb(t,e)}).then(function(){}))},t.Ic=function(t,e){return Fu(this,Al(this,t,e,g(this.Oa,this)))},t.Hc=function(t,e){var n=this;return Fu(this,Et().then(function(){var i=Fo(t,e||Vn());return n.Oa(i)}))},ju.prototype.render=function(){},ju.prototype.reset=function(){},ju.prototype.getResponse=function(){},ju.prototype.execute=function(){};var zu=null;function Uu(t,e){return(e=Wu(e))&&t.a[e]||null}function Wu(t){return(t=void 0===t?1e12:t)?t.toString():null}function Vu(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=On(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():_e(this.f,"click",this.i)}function Hu(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function qu(){}Bu.prototype.render=function(t,e){return this.a[this.b.toString()]=new Vu(t,e),this.b++},Bu.prototype.reset=function(t){var e=Uu(this,t);t=Wu(t),e&&t&&(e.delete(),delete this.a[t])},Bu.prototype.getResponse=function(t){return(t=Uu(this,t))?t.getResponse():null},Bu.prototype.execute=function(t){(t=Uu(this,t))&&t.execute()},Vu.prototype.getResponse=function(){return Hu(this),this.b},Vu.prototype.execute=function(){Hu(this);var t=this;this.a||(this.a=setTimeout(function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout(function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()},6e4)},500))},Vu.prototype.delete=function(){Hu(this),this.g=!0,clearTimeout(this.a),this.a=null,we(this.f,"click",this.i)},qu.prototype.g=function(){return zu||(zu=new Bu),Et(zu)},qu.prototype.c=function(){};var Zu=null;function Ku(){this.b=n.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Gu=vn("https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Qu=new yi(3e4,6e4);Ku.prototype.g=function(t){var e=this;return new mt(function(i,o){var r=setTimeout(function(){o(new zi("network-request-failed"))},Qu.get());!n.grecaptcha||t!==e.f&&!e.b?(n[e.a]=function(){if(n.grecaptcha){e.f=t;var a=n.grecaptcha.render;n.grecaptcha.render=function(t,n){return t=a(t,n),e.b++,t},clearTimeout(r),i(n.grecaptcha)}else clearTimeout(r),o(new zi("internal-error"));delete n[e.a]},Et(Zr(yn(Gu,{onload:e.a,hl:t||""}))).s(function(){clearTimeout(r),o(new zi("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(r),i(n.grecaptcha))})},Ku.prototype.c=function(){this.b--};var Yu=null;function Xu(t,e,i,o,r,a,s){if(ki(this,"type","recaptcha"),this.c=this.f=null,this.C=!1,this.l=e,this.g=null,s?(Zu||(Zu=new qu),s=Zu):(Yu||(Yu=new Ku),s=Yu),this.o=s,this.a=i||{theme:"light",type:"image"},this.h=[],this.a[tc])throw new zi("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[ec],!n.document)throw new zi("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!On(e)||!this.i&&On(e).hasChildNodes())throw new zi("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.u=new $r(t,a||null,r||null),this.v=o||function(){return null};var l=this;this.m=[];var u=this.a[Ju];this.a[Ju]=function(t){if(nc(l,t),"function"==typeof u)u(t);else if("string"==typeof u){var e=si(u,n);"function"==typeof e&&e(t)}};var c=this.a[$u];this.a[$u]=function(){if(nc(l,null),"function"==typeof c)c();else if("string"==typeof c){var t=si(c,n);"function"==typeof t&&t()}}}var Ju="callback",$u="expired-callback",tc="sitekey",ec="size";function nc(t,e){for(var n=0;n<t.m.length;n++)try{t.m[n](e)}catch(t){}}function ic(t,e){return t.h.push(e),e.ia(function(){F(t.h,e)}),e}function oc(t){if(t.C)throw new zi("internal-error","RecaptchaVerifier instance has been destroyed.")}function rc(t,e,n){var o=!1;try{this.b=n||i.a.app()}catch(t){throw new zi("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new zi("invalid-api-key");n=this.b.options.apiKey;var r=this,a=null;try{a=this.b.auth().xa()}catch(t){}try{o=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}a=i.a.SDK_VERSION?ri(i.a.SDK_VERSION,a):null,Xu.call(this,n,t,e,function(){try{var t=r.b.auth().ea()}catch(e){t=null}return t},a,ts(Ja),o)}function ac(t,e,n,i){t:{n=Array.prototype.slice.call(n);for(var o=0,r=!1,a=0;a<e.length;a++)if(e[a].optional)r=!0;else{if(r)throw new zi("internal-error","Argument validator encountered a required argument after an optional argument.");o++}if(r=e.length,n.length<o||r<n.length)i="Expected "+(o==r?1==o?"1 argument":o+" arguments":o+"-"+r+" arguments")+" but got "+n.length+".";else{for(o=0;o<n.length;o++)if(r=e[o].optional&&void 0===n[o],!e[o].M(n[o])&&!r){if(e=e[o],0>o||o>=sc.length)throw new zi("internal-error","Argument validator received an unsupported number of arguments.");n=sc[o],i=(i?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}i=null}}if(i)throw new zi("argument-error",t+" failed: "+i)}(t=Xu.prototype).za=function(){var t=this;return this.f?this.f:this.f=ic(this,Et().then(function(){if(ci()&&!Jn())return Qn();throw new zi("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return t.o.g(t.v())}).then(function(e){return t.g=e,Qa(t.u,Da,{})}).then(function(e){t.a[tc]=e.recaptchaSiteKey}).s(function(e){throw t.f=null,e}))},t.render=function(){oc(this);var t=this;return ic(this,this.za().then(function(){if(null===t.c){var e=t.l;if(!t.i){var n=On(e);e=Dn("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c}))},t.verify=function(){oc(this);var t=this;return ic(this,this.render().then(function(e){return new mt(function(n){var i=t.g.getResponse(e);if(i)n(i);else{var o=function(e){e&&(function(t,e){j(t.m,function(t){return t==e})}(t,o),n(e))};t.m.push(o),t.i&&t.g.execute(t.c)}})}))},t.reset=function(){oc(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){oc(this),this.C=!0,this.o.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=On(this.l);for(var e;e=t.firstChild;)t.removeChild(e)}},b(rc,Xu);var sc="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function lc(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:o}}function uc(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:r}}function cc(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:d}}function hc(t,e){return{name:t||"",K:"a function",optional:!!e,M:h}}function dc(t,e){return{name:t||"",K:"null",optional:!!e,M:l}}function fc(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ya||!n)}}}function pc(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!!(t&&o(t.type)&&h(t.verify))}}}function mc(t,e,n,i){return{name:n||"",K:t.K+" or "+e.K,optional:!!i,M:function(n){return t.M(n)||e.M(n)}}}function vc(t,e){for(var n in e){var i=e[n].name;t[i]=yc(i,t[n],e[n].j)}}function gc(t,e){for(var n in e){var i=e[n].name;if(i!==n){var o=e[n].sb;Object.defineProperty(t,i,{get:function(){return this[n]},set:function(t){ac(i,[o],[t],!0),this[n]=t},enumerable:!0})}}}function _c(t,e,n,i){t[e]=yc(e,n,i)}function yc(t,e,n){function i(){var t=Array.prototype.slice.call(arguments);return ac(r,n,t),e.apply(this,t)}if(!n)return e;var o,r=function(t){return(t=t.split("."))[t.length-1]}(t);for(o in e)i[o]=e[o];for(o in e.prototype)i.prototype[o]=e.prototype[o];return i}vc(Tu.prototype,{Va:{name:"applyActionCode",j:[lc("code")]},Ja:{name:"checkActionCode",j:[lc("code")]},Ya:{name:"confirmPasswordReset",j:[lc("code"),lc("newPassword")]},wb:{name:"createUserWithEmailAndPassword",j:[lc("email"),lc("password")]},Ub:{name:"createUserAndRetrieveDataWithEmailAndPassword",j:[lc("email"),lc("password")]},Xb:{name:"fetchProvidersForEmail",j:[lc("email")]},Yb:{name:"fetchSignInMethodsForEmail",j:[lc("email")]},fa:{name:"getRedirectResult",j:[]},nc:{name:"isSignInWithEmailLink",j:[lc("emailLink")]},tc:{name:"onAuthStateChanged",j:[mc(cc(),hc(),"nextOrObserver"),hc("opt_error",!0),hc("opt_completed",!0)]},uc:{name:"onIdTokenChanged",j:[mc(cc(),hc(),"nextOrObserver"),hc("opt_error",!0),hc("opt_completed",!0)]},jb:{name:"sendPasswordResetEmail",j:[lc("email"),mc(cc("opt_actionCodeSettings",!0),dc(null,!0),"opt_actionCodeSettings",!0)]},kb:{name:"sendSignInLinkToEmail",j:[lc("email"),cc("actionCodeSettings")]},lb:{name:"setPersistence",j:[lc("persistence")]},Oa:{name:"signInAndRetrieveDataWithCredential",j:[fc()]},Pa:{name:"signInAnonymously",j:[]},Fc:{name:"signInAnonymouslyAndRetrieveData",j:[]},Gc:{name:"signInWithCredential",j:[fc()]},Lb:{name:"signInWithCustomToken",j:[lc("token")]},Dc:{name:"signInAndRetrieveDataWithCustomToken",j:[lc("token")]},Mb:{name:"signInWithEmailAndPassword",j:[lc("email"),lc("password")]},Hc:{name:"signInWithEmailLink",j:[lc("email"),lc("emailLink",!0)]},Ec:{name:"signInAndRetrieveDataWithEmailAndPassword",j:[lc("email"),lc("password")]},Ic:{name:"signInWithPhoneNumber",j:[lc("phoneNumber"),pc()]},Jc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Kc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Qc:{name:"updateCurrentUser",j:[mc({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof Ul)}},dc(),"user")]},mb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[lc(null,!0)]},Sc:{name:"useDeviceLanguage",j:[]},Tc:{name:"verifyPasswordResetCode",j:[lc("code")]}}),gc(Tu.prototype,{lc:{name:"languageCode",sb:mc(lc(),dc(),"languageCode")}}),Tu.Persistence=Fs,Tu.Persistence.LOCAL="local",Tu.Persistence.SESSION="session",Tu.Persistence.NONE="none",vc(Ul.prototype,{delete:{name:"delete",j:[]},cc:{name:"getIdTokenResult",j:[uc("opt_forceRefresh",!0)]},F:{name:"getIdToken",j:[uc("opt_forceRefresh",!0)]},cb:{name:"linkAndRetrieveDataWithCredential",j:[fc()]},oc:{name:"linkWithCredential",j:[fc()]},pc:{name:"linkWithPhoneNumber",j:[lc("phoneNumber"),pc()]},qc:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},rc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},fb:{name:"reauthenticateAndRetrieveDataWithCredential",j:[fc()]},xc:{name:"reauthenticateWithCredential",j:[fc()]},yc:{name:"reauthenticateWithPhoneNumber",j:[lc("phoneNumber"),pc()]},zc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Ac:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},ib:{name:"sendEmailVerification",j:[mc(cc("opt_actionCodeSettings",!0),dc(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[lc(null,!0)]},Pc:{name:"unlink",j:[lc("provider")]},ob:{name:"updateEmail",j:[lc("email")]},pb:{name:"updatePassword",j:[lc("password")]},Rc:{name:"updatePhoneNumber",j:[fc("phone")]},qb:{name:"updateProfile",j:[cc("profile")]}}),vc(Bu.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),vc(ju.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),vc(mt.prototype,{ia:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),gc(Pl.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",sb:uc("appVerificationDisabledForTesting")}}),vc(Ll.prototype,{confirm:{name:"confirm",j:[lc("verificationCode")]}}),_c(Mo,"credential",function(t,e){return new Do(t,e)},[lc("email"),lc("password")]),vc(ko.prototype,{ta:{name:"addScope",j:[lc("scope")]},Da:{name:"setCustomParameters",j:[cc("customOAuthParameters")]}}),_c(ko,"credential",Io,[mc(lc(),cc(),"token")]),_c(Mo,"credentialWithLink",Fo,[lc("email"),lc("emailLink")]),vc(Po.prototype,{ta:{name:"addScope",j:[lc("scope")]},Da:{name:"setCustomParameters",j:[cc("customOAuthParameters")]}}),_c(Po,"credential",Lo,[mc(lc(),cc(),"token")]),vc(Ao.prototype,{ta:{name:"addScope",j:[lc("scope")]},Da:{name:"setCustomParameters",j:[cc("customOAuthParameters")]}}),_c(Ao,"credential",Oo,[mc(lc(),mc(cc(),dc()),"idToken"),mc(lc(),dc(),"accessToken",!0)]),vc(No.prototype,{Da:{name:"setCustomParameters",j:[cc("customOAuthParameters")]}}),_c(No,"credential",Ro,[mc(lc(),cc(),"token"),lc("secret",!0)]),vc(To.prototype,{ta:{name:"addScope",j:[lc("scope")]},credential:{name:"credential",j:[mc(lc(),dc(),"idToken",!0),mc(lc(),dc(),"accessToken",!0)]},Da:{name:"setCustomParameters",j:[cc("customOAuthParameters")]}}),_c(Uo,"credential",Wo,[lc("verificationId"),lc("verificationCode")]),vc(Uo.prototype,{Ta:{name:"verifyPhoneNumber",j:[lc("phoneNumber"),pc()]}}),vc(zi.prototype,{toJSON:{name:"toJSON",j:[lc(null,!0)]}}),vc(Yo.prototype,{toJSON:{name:"toJSON",j:[lc(null,!0)]}}),vc(Qo.prototype,{toJSON:{name:"toJSON",j:[lc(null,!0)]}}),vc(rc.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),function(){if(void 0===i.a||!i.a.INTERNAL||!i.a.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={Auth:Tu,Error:zi};_c(t,"EmailAuthProvider",Mo,[]),_c(t,"FacebookAuthProvider",ko,[]),_c(t,"GithubAuthProvider",Po,[]),_c(t,"GoogleAuthProvider",Ao,[]),_c(t,"TwitterAuthProvider",No,[]),_c(t,"OAuthProvider",To,[lc("providerId")]),_c(t,"PhoneAuthProvider",Uo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof Tu)}}]),_c(t,"RecaptchaVerifier",rc,[mc(lc(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),cc("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof i.a.app.App)}}]),i.a.INTERNAL.registerService("auth",function(t,e){return e({INTERNAL:{getUid:g((t=new Tu(t)).getUid,t),getToken:g(t.bc,t),addAuthTokenListener:g(t.Tb,t),removeAuthTokenListener:g(t.Bc,t)}}),t},t,function(t,e){if("create"===t)try{e.auth()}catch(t){}}),i.a.INTERNAL.extendNamespace({User:Ul})}()}).call(void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}).call(this,n(3))},function(t,e,n){"use strict";(function(i){Object.defineProperty(e,"__esModule",{value:!0});var o,r,a=n(6),s=n(40),l=n(41),u=(o=n(0))&&"object"==typeof o&&"default"in o?o.default:o,c=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),a.stringify(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:a.jsonEval(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),h=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return a.contains(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),d=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new c(e)}}catch(t){}return new h},f=d("localStorage"),p=d("sessionStorage"),m=new s.Logger("@firebase/database"),v=(r=1,function(){return r++}),g=function(t){var e=a.stringToByteArray(t),n=new a.Sha1;n.update(e);var i=n.digest();return a.base64.encodeByteArray(i)},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",i=0;i<t.length;i++)Array.isArray(t[i])||t[i]&&"object"==typeof t[i]&&"number"==typeof t[i].length?n+=_.apply(null,t[i]):"object"==typeof t[i]?n+=a.stringify(t[i]):n+=t[i],n+=" ";return n},y=null,b=!0,w=function(t,e){a.assert(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(m.logLevel=s.LogLevel.VERBOSE,y=m.log.bind(m),e&&p.set("logging_enabled",!0)):"function"==typeof t?y=t:(y=null,p.remove("logging_enabled"))},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===b&&(b=!1,null===y&&!0===p.get("logging_enabled")&&w(!0)),y){var n=_.apply(null,t);y(n)}},S=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];E.apply(void 0,[t].concat(e))}},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+_.apply(void 0,t);m.error(n)},x=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+_.apply(void 0,t);throw m.error(n),new Error(n)},T=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+_.apply(void 0,t);m.warn(n)},k=function(t){return"number"==typeof t&&(t!=t||t==Number.POSITIVE_INFINITY||t==Number.NEGATIVE_INFINITY)},I="[MIN_NAME]",P="[MAX_NAME]",L=function(t,e){if(t===e)return 0;if(t===I||e===P)return-1;if(e===I||t===P)return 1;var n=j(t),i=j(e);return null!==n?null!==i?n-i==0?t.length-e.length:n-i:-1:null!==i?1:t<e?-1:1},A=function(t,e){return t===e?0:t<e?-1:1},O=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+a.stringify(e))},N=function(t){if("object"!=typeof t||null===t)return a.stringify(t);var e=[];for(var n in t)e.push(n);e.sort();for(var i="{",o=0;o<e.length;o++)0!==o&&(i+=","),i+=a.stringify(e[o]),i+=":",i+=N(t[e[o]]);return i+="}"},R=function(t,e){var n=t.length;if(n<=e)return[t];for(var i=[],o=0;o<n;o+=e)o+e>n?i.push(t.substring(o,n)):i.push(t.substring(o,o+e));return i},D=function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;++n)e(n,t[n]);else a.forEach(t,function(t,n){return e(n,t)})},M=function(t){a.assert(!k(t),"Invalid JSON number");var e,n,i,o,r,s,l;for(0===t?(n=0,i=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(o=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,i=Math.round(t*Math.pow(2,52-o)-Math.pow(2,52))):(n=0,i=Math.round(t/Math.pow(2,-1074)))),s=[],r=52;r;r-=1)s.push(i%2?1:0),i=Math.floor(i/2);for(r=11;r;r-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(e?1:0),s.reverse(),l=s.join("");var u="";for(r=0;r<64;r+=8){var c=parseInt(l.substr(r,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()},F=new RegExp("^-?\\d{1,10}$"),j=function(t){if(F.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},B=function(t){try{t()}catch(t){setTimeout(function(){var e=t.stack||"";throw T("Exception was thrown by user callback.",e),t},Math.floor(0))}},z=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},U=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},W=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[n]=this.pieces_[i],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!0,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],i=this.pieceNum_;i<this.pieces_.length;i++)n.push(this.pieces_[i]);if(e instanceof t)for(i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{var o=e.split("/");for(i=0;i<o.length;i++)o[i].length>0&&n.push(o[i])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var i=e.getFront(),o=n.getFront();if(null===i)return n;if(i===o)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),i=e.slice(),o=0;o<n.length&&o<i.length;o++){var r=L(n[o],i[o]);if(0!==r)return r}return n.length===i.length?0:n.length<i.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),V=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=a.stringLength(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=a.stringLength(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=a.stringLength(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0==this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),H="long_polling",q=function(){function t(t,e,n,i,o){void 0===o&&(o=""),this.secure=e,this.namespace=n,this.webSocketOnly=i,this.persistenceKey=o,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=f.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&f.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(a.assert("string"==typeof t,"typeof type must == string"),a.assert("object"==typeof e,"typeof params must == object"),"websocket"===t)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==H)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var i=[];return a.forEach(e,function(t,e){i.push(t+"="+e)}),n+i.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}();var Z,K,G,Q,Y,X=function(t){var e=J(t),n=e.subdomain;"firebase"===e.domain&&x(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!=n||"localhost"===e.domain||x("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&T("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===e.scheme||"wss"===e.scheme;return{repoInfo:new q(e.host,e.secure,n,i),path:new W(e.pathString)}},J=function(t){var e="",n="",i="",o="",r=!0,a="https",s=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));var u=t.indexOf("/");-1===u&&(u=t.length);var c=t.indexOf("?");-1===c&&(c=t.length),e=t.substring(0,Math.min(u,c)),u<c&&(o=function(t){for(var e="",n=t.split("/"),i=0;i<n.length;i++)if(n[i].length>0){var o=n[i];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch(t){}e+="/"+o}return e}(t.substring(u,c)));var h=function(t){var e={};"?"===t.charAt(0)&&(t=t.substring(1));for(var n=0,i=t.split("&");n<i.length;n++){var o=i[n];if(0!==o.length){var r=o.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):T("Invalid query segment '"+o+"' in query '"+t+"'")}}return e}(t.substring(Math.min(t.length,c)));(l=e.indexOf(":"))>=0?(r="https"===a||"wss"===a,s=parseInt(e.substring(l+1),10)):l=t.length;var d=e.split(".");3===d.length?(n=d[1],i=d[0].toLowerCase()):2===d.length?n=d[0]:"localhost"===d[0].slice(0,l).toLowerCase()&&(n="localhost"),""===i&&"ns"in h&&(i=h.ns)}return{host:e,port:s,domain:n,subdomain:i,secure:r,scheme:a,pathString:o}},$=/[\[\].#$\/\u0000-\u001F\u007F]/,tt=/[\[\].#$\u0000-\u001F\u007F]/,et=function(t){return"string"==typeof t&&0!==t.length&&!$.test(t)},nt=function(t){return"string"==typeof t&&0!==t.length&&!tt.test(t)},it=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!k(t)||t&&"object"==typeof t&&a.contains(t,".sv")},ot=function(t,e,n,i,o){o&&void 0===n||rt(a.errorPrefix(t,e,o),n,i)},rt=function(t,e,n){var i=n instanceof W?new V(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+i.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+i.toErrorString()+" with contents = "+e.toString());if(k(e))throw new Error(t+"contains "+e.toString()+" "+i.toErrorString());if("string"==typeof e&&e.length>10485760/3&&a.stringLength(e)>10485760)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+i.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var o=!1,r=!1;if(a.forEach(e,function(e,n){if(".value"===e)o=!0;else if(".priority"!==e&&".sv"!==e&&(r=!0,!et(e)))throw new Error(t+" contains an invalid key ("+e+") "+i.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');i.push(e),rt(t,n,i),i.pop()}),o&&r)throw new Error(t+' contains ".value" child '+i.toErrorString()+" in addition to actual children.")}},at=function(t,e,n,i,o){if(!o||void 0!==n){var r=a.errorPrefix(t,e,o);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(r+" must be an object containing the children to replace.");var s=[];a.forEach(n,function(t,e){var n=new W(t);if(rt(r,e,i.child(n)),".priority"===n.getBack()&&!it(e))throw new Error(r+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)}),function(t,e){var n,i;for(n=0;n<e.length;n++)for(var o=(i=e[n]).slice(),r=0;r<o.length;r++)if(".priority"===o[r]&&r===o.length-1);else if(!et(o[r]))throw new Error(t+"contains an invalid key ("+o[r]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(W.comparePaths);var a=null;for(n=0;n<e.length;n++){if(i=e[n],null!==a&&a.contains(i))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+i.toString());a=i}}(r,s)}},st=function(t,e,n,i){if(!i||void 0!==n){if(k(n))throw new Error(a.errorPrefix(t,e,i)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!it(n))throw new Error(a.errorPrefix(t,e,i)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},lt=function(t,e,n,i){if(!i||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(a.errorPrefix(t,e,i)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},ut=function(t,e,n,i){if(!(i&&void 0===n||et(n)))throw new Error(a.errorPrefix(t,e,i)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ct=function(t,e,n,i){if(!(i&&void 0===n||nt(n)))throw new Error(a.errorPrefix(t,e,i)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ht=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},dt=function(t,e,n){var i=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!et(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==i.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),nt(t)}(i))throw new Error(a.errorPrefix(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},ft=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){a.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),a.validateCallback("OnDisconnect.cancel",1,t,!0);var e=new a.Deferred;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){a.validateArgCount("OnDisconnect.remove",0,1,arguments.length),ht("OnDisconnect.remove",this.path_),a.validateCallback("OnDisconnect.remove",1,t,!0);var e=new a.Deferred;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){a.validateArgCount("OnDisconnect.set",1,2,arguments.length),ht("OnDisconnect.set",this.path_),ot("OnDisconnect.set",1,t,this.path_,!1),a.validateCallback("OnDisconnect.set",2,e,!0);var n=new a.Deferred;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){a.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),ht("OnDisconnect.setWithPriority",this.path_),ot("OnDisconnect.setWithPriority",1,t,this.path_,!1),st("OnDisconnect.setWithPriority",2,e,!1),a.validateCallback("OnDisconnect.setWithPriority",3,n,!0);var i=new a.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,i.wrapCallback(n)),i.promise},t.prototype.update=function(t,e){if(a.validateArgCount("OnDisconnect.update",1,2,arguments.length),ht("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},i=0;i<t.length;++i)n[""+i]=t[i];t=n,T("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}at("OnDisconnect.update",1,t,this.path_,!1),a.validateCallback("OnDisconnect.update",2,e,!0);var o=new a.Deferred;return this.repo_.onDisconnectUpdate(this.path_,t,o.wrapCallback(e)),o.promise},t}(),pt=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return a.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),mt=(Z="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",K=0,G=[],function(t){var e,n=t===K;K=t;var i=new Array(8);for(e=7;e>=0;e--)i[e]=Z.charAt(t%64),t=Math.floor(t/64);a.assert(0===t,"Cannot push at time == 0");var o=i.join("");if(n){for(e=11;e>=0&&63===G[e];e--)G[e]=0;G[e]++}else for(e=0;e<12;e++)G[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)o+=Z.charAt(G[e]);return a.assert(20===o.length,"nextPushId: Length should be 20."),o}),vt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),gt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new vt(I,t),i=new vt(I,e);return 0!==this.compare(n,i)},t.prototype.minPost=function(){return vt.MIN},t}(),_t=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l.__extends(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return Q},set:function(t){Q=t},enumerable:!0,configurable:!0}),e.prototype.compare=function(t,e){return L(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw a.assertionError("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return vt.MIN},e.prototype.maxPost=function(){return new vt(P,Q)},e.prototype.makePost=function(t,e){return a.assert("string"==typeof t,"KeyIndex indexValue must always be a string."),new vt(t,Q)},e.prototype.toString=function(){return".key"},e}(gt),yt=new _t;var bt,wt,Et,St=function(t){return"number"==typeof t?"number:"+M(t):"string:"+t},Ct=function(t){if(t.isLeafNode()){var e=t.val();a.assert("string"==typeof e||"number"==typeof e||"object"==typeof e&&a.contains(e,".sv"),"Priority must be a string or number.")}else a.assert(t===Y||t.isEmpty(),"priority of unexpected type.");a.assert(t===Y||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},xt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,a.assert(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Ct(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return bt},set:function(t){bt=t},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var i=e.getFront();return null===i?n:n.isEmpty()&&".priority"!==i?this:(a.assert(".priority"!==i||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+St(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?M(this.value_):this.value_,this.lazyHash_=g(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(a.assert(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,i=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(n),r=t.VALUE_TYPE_ORDER.indexOf(i);return a.assert(o>=0,"Unknown leaf type: "+n),a.assert(r>=0,"Unknown leaf type: "+i),o===r?"object"===i?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:r-o},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}();var Tt,kt,It=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),i=e.node.getPriority(),o=n.compareTo(i);return 0===o?L(t.name,e.name):o},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return vt.MIN},e.prototype.maxPost=function(){return new vt(P,new xt("[PRIORITY-POST]",Et))},e.prototype.makePost=function(t,e){var n=wt(t);return new vt(e,new xt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(gt)),Pt=function(){function t(t,e,n,i,o){void 0===o&&(o=null),this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];for(var r=1;!t.isEmpty();)if(t=t,r=e?n(t.key,e):1,i&&(r*=-1),r<0)t=this.isReverse_?t.left:t.right;else{if(0===r){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Lt=function(){function t(e,n,i,o,r){this.key=e,this.value=n,this.color=null!=i?i:t.RED,this.left=null!=o?o:Ot.EMPTY_NODE,this.right=null!=r?r:Ot.EMPTY_NODE}return t.prototype.copy=function(e,n,i,o,r){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=i?i:this.color,null!=o?o:this.left,null!=r?r:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var i,o;return(o=(i=n(t,(o=this).key))<0?o.copy(null,null,null,o.left.insert(t,e,n),null):0===i?o.copy(null,e,null,null,null):o.copy(null,null,null,null,o.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Ot.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,i;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Ot.EMPTY_NODE;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){var t;if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");if((t=this.left.check_())!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),At=function(){function t(){}return t.prototype.copy=function(t,e,n,i,o){return this},t.prototype.insert=function(t,e,n){return new Lt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Ot=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Lt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Lt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,i=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return i?i.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(i=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Pt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Pt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Pt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Pt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new At,t}(),Nt=Math.log(2),Rt=function(){function t(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Nt,10)),this.current_=this.count-1;var n,i=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&i}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Dt=function(t,e,n,i){t.sort(e);var o=function(e,i){var r,a,s=i-e;if(0==s)return null;if(1==s)return r=t[e],a=n?n(r):r,new Lt(a,r.node,Lt.BLACK,null,null);var l=parseInt(s/2,10)+e,u=o(e,l),c=o(l+1,i);return r=t[l],a=n?n(r):r,new Lt(a,r.node,Lt.BLACK,u,c)},r=function(e){for(var i=null,r=null,a=t.length,s=function(e,i){var r=a-e,s=a;a-=e;var u=o(r+1,s),c=t[r],h=n?n(c):c;l(new Lt(h,c.node,i,null,u))},l=function(t){i?(i.left=t,i=t):(r=t,i=t)},u=0;u<e.count;++u){var c=e.nextBitIsOne(),h=Math.pow(2,e.count-(u+1));c?s(h,Lt.BLACK):(s(h,Lt.BLACK),s(h,Lt.RED))}return r}(new Rt(t.length));return new Ot(i||e,r)},Mt={},Ft=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return a.assert(Mt&&It,"ChildrenNode.ts has not been loaded"),Tt=Tt||new t({".priority":Mt},{".priority":It})},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var e=a.safeGet(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e===Mt?null:e},t.prototype.hasIndex=function(t){return a.contains(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){a.assert(e!==yt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var i,o=[],r=!1,s=n.getIterator(vt.Wrap),l=s.getNext();l;)r=r||e.isDefinedOn(l.node),o.push(l),l=s.getNext();i=r?Dt(o,e.getCompare()):Mt;var u=e.toString(),c=a.clone(this.indexSet_);c[u]=e;var h=a.clone(this.indexes_);return h[u]=i,new t(h,c)},t.prototype.addToIndexes=function(e,n){var i=this;return new t(a.map(this.indexes_,function(t,o){var r=a.safeGet(i.indexSet_,o);if(a.assert(r,"Missing index implementation for "+o),t===Mt){if(r.isDefinedOn(e.node)){for(var s=[],l=n.getIterator(vt.Wrap),u=l.getNext();u;)u.name!=e.name&&s.push(u),u=l.getNext();return s.push(e),Dt(s,r.getCompare())}return Mt}var c=n.get(e.name),h=t;return c&&(h=h.remove(new vt(e.name,c))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(a.map(this.indexes_,function(t){if(t===Mt)return t;var i=n.get(e.name);return i?t.remove(new vt(e.name,i)):t}),this.indexSet_)},t}();function jt(t,e){return L(t.name,e.name)}function Bt(t,e){return L(t,e)}var zt=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Ct(this.priorityNode_),this.children_.isEmpty()&&a.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return kt||(kt=new t(new Ot(Bt),null,Ft.Default))},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||kt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?kt:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(a.assert(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var i,o=new vt(e,n),r=void 0,s=void 0;return n.isEmpty()?(r=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(o,this.children_)):(r=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(o,this.children_)),i=r.isEmpty()?kt:this.priorityNode_,new t(r,i,s)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;a.assert(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var i=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,i)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},i=0,o=0,r=!0;if(this.forEachChild(It,function(a,s){n[a]=s.val(e),i++,r&&t.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):r=!1}),!e&&r&&o<2*i){var a=[];for(var s in n)a[s]=n[s];return a}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+St(this.getPriority().val())+":"),this.forEachChild(It,function(e,n){var i=n.hash();""!==i&&(t+=":"+e+":"+i)}),this.lazyHash_=""===t?"":g(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var i=this.resolveIndex_(n);if(i){var o=i.getPredecessorKey(new vt(t,e));return o?o.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new vt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new vt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var i=this.children_.getIteratorFrom(t.name,vt.Wrap),o=i.peek();null!=o&&e.compare(o,t)<0;)i.getNext(),o=i.peek();return i},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var i=this.children_.getReverseIteratorFrom(t.name,vt.Wrap),o=i.peek();null!=o&&e.compare(o,t)>0;)i.getNext(),o=i.peek();return i},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Ut?-1:0},t.prototype.withIndex=function(e){if(e===yt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===yt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(It),i=e.getIterator(It),o=n.getNext(),r=i.getNext();o&&r;){if(o.name!==r.name||!o.node.equals(r.node))return!1;o=n.getNext(),r=i.getNext()}return null===o&&null===r}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===yt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Ut=new(function(t){function e(){return t.call(this,new Ot(Bt),zt.EMPTY_NODE,Ft.Default)||this}return l.__extends(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return zt.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(zt));Object.defineProperties(vt,{MIN:{value:new vt(I,zt.EMPTY_NODE)},MAX:{value:new vt(P,Ut)}}),_t.__EMPTY_NODE=zt.EMPTY_NODE,xt.__childrenNodeConstructor=zt,Y=Ut,function(t){Et=t}(Ut);var Wt=!0;function Vt(t,e){if(void 0===e&&(e=null),null===t)return zt.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),a.assert(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new xt(t,Vt(e));if(t instanceof Array||!Wt){var n=zt.EMPTY_NODE,i=t;return a.forEach(i,function(t,e){if(a.contains(i,t)&&"."!==t.substring(0,1)){var o=Vt(e);!o.isLeafNode()&&o.isEmpty()||(n=n.updateImmediateChild(t,o))}}),n.updatePriority(Vt(e))}var o=[],r=!1,s=t;if(a.forEach(s,function(t,e){if("string"!=typeof t||"."!==t.substring(0,1)){var n=Vt(s[t]);n.isEmpty()||(r=r||!n.getPriority().isEmpty(),o.push(new vt(t,n)))}}),0==o.length)return zt.EMPTY_NODE;var l=Dt(o,jt,function(t){return t.name},Bt);if(r){var u=Dt(o,It.getCompare());return new zt(l,Vt(e),new Ft({".priority":u},{".priority":It}))}return new zt(l,Vt(e),Ft.Default)}!function(t){wt=t}(Vt);var Ht,qt,Zt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?L(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return vt.MIN},e.prototype.maxPost=function(){return vt.MAX},e.prototype.makePost=function(t,e){var n=Vt(t);return new vt(e,n)},e.prototype.toString=function(){return".value"},e}(gt)),Kt=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,a.assert(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return l.__extends(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),i=this.extractChild(e.node),o=n.compareTo(i);return 0===o?L(t.name,e.name):o},e.prototype.makePost=function(t,e){var n=Vt(t),i=zt.EMPTY_NODE.updateChild(this.indexPath_,n);return new vt(e,i)},e.prototype.maxPost=function(){var t=zt.EMPTY_NODE.updateChild(this.indexPath_,Ut);return new vt(P,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(gt),Gt=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return a.validateArgCount("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return a.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return a.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return a.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){a.validateArgCount("DataSnapshot.child",0,1,arguments.length),e=String(e),ct("DataSnapshot.child",1,e,!1);var n=new W(e),i=this.ref_.child(n);return new t(this.node_.getChild(n),i,It)},t.prototype.hasChild=function(t){a.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),ct("DataSnapshot.hasChild",1,t,!1);var e=new W(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return a.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;return a.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),a.validateCallback("DataSnapshot.forEach",1,e,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(i,o){return e(new t(o,n.ref_.child(i),It))})},t.prototype.hasChildren=function(){return a.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),t.prototype.numChildren=function(){return a.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return a.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}(),Qt=function(){function t(t,e,n,i){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=i}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+a.stringify(this.snapshot.exportVal())},t}(),Yt=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Xt=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Qt("value",this,new Gt(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){a.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var i=this.callback_;return function(){i.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Yt(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),Jt=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,a.contains(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Yt(this,t,e):null},t.prototype.createEvent=function(t,e){a.assert(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),i=e.getQueryParams().getIndex();return new Qt(t.type,this,new Gt(t.snapshotNode,n,i),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){a.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var i=this.callbacks_[t.eventType];return function(){i.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var n=a.getCount(e.callbacks_);if(n===a.getCount(this.callbacks_)){if(1===n){var i=a.getAnyKey(e.callbacks_),o=a.getAnyKey(this.callbacks_);return!(o!==i||e.callbacks_[i]&&this.callbacks_[o]&&e.callbacks_[i]!==this.callbacks_[o])}return a.every(this.callbacks_,function(t,n){return e.callbacks_[t]===n})}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),$t=function(){function t(t,e,n,i){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=i}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return a.assert(Ht,"Reference.ts has not been loaded"),Ht},set:function(t){Ht=t},enumerable:!0,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===yt){var i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!=I)throw new Error(i);if("string"!=typeof e)throw new Error(o)}if(t.hasEnd()){if(t.getIndexEndName()!=P)throw new Error(i);if("string"!=typeof n)throw new Error(o)}}else if(t.getIndex()===It){if(null!=e&&!it(e)||null!=n&&!it(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(a.assert(t.getIndex()instanceof Kt||t.getIndex()===Zt,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return a.validateArgCount("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,i,o){a.validateArgCount("Query.on",2,4,arguments.length),lt("Query.on",1,e,!1),a.validateCallback("Query.on",2,n,!1);var r=t.getCancelAndContextArgs_("Query.on",i,o);if("value"===e)this.onValueEvent(n,r.cancel,r.context);else{var s={};s[e]=n,this.onChildEvent(s,r.cancel,r.context)}return n},t.prototype.onValueEvent=function(t,e,n){var i=new Xt(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,i)},t.prototype.onChildEvent=function(t,e,n){var i=new Jt(t,e,n);this.repo.addEventCallbackForQuery(this,i)},t.prototype.off=function(t,e,n){a.validateArgCount("Query.off",0,3,arguments.length),lt("Query.off",1,t,!0),a.validateCallback("Query.off",2,e,!0),a.validateContextObject("Query.off",3,n,!0);var i=null,o=null;"value"===t?i=new Xt(e||null,null,n||null):t&&(e&&((o={})[t]=e),i=new Jt(o,null,n||null));this.repo.removeEventCallbackForQuery(this,i)},t.prototype.once=function(e,n,i,o){var r=this;a.validateArgCount("Query.once",1,4,arguments.length),lt("Query.once",1,e,!1),a.validateCallback("Query.once",2,n,!0);var s=t.getCancelAndContextArgs_("Query.once",i,o),l=!0,u=new a.Deferred;u.promise.catch(function(){});var c=function(t){l&&(l=!1,r.off(e,c),n&&n.bind(s.context)(t),u.resolve(t))};return this.on(e,c,function(t){r.off(e,c),s.cancel&&s.cancel.bind(s.context)(t),u.reject(t)}),u.promise},t.prototype.limitToFirst=function(e){if(a.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(a.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(a.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');ct("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new W(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var i=new Kt(n),o=this.queryParams_.orderBy(i);return t.validateQueryEndpoints_(o),new t(this.repo,this.path,o,!0)},t.prototype.orderByKey=function(){a.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(yt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){a.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(It);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){a.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(Zt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),a.validateArgCount("Query.startAt",0,2,arguments.length),ot("Query.startAt",1,e,this.path,!0),ut("Query.startAt",2,n,!0);var i=this.queryParams_.startAt(e,n);if(t.validateLimit_(i),t.validateQueryEndpoints_(i),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,i,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),a.validateArgCount("Query.endAt",0,2,arguments.length),ot("Query.endAt",1,e,this.path,!0),ut("Query.endAt",2,n,!0);var i=this.queryParams_.endAt(e,n);if(t.validateLimit_(i),t.validateQueryEndpoints_(i),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,i,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(a.validateArgCount("Query.equalTo",1,2,arguments.length),ot("Query.equalTo",1,t,this.path,!1),ut("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return a.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return a.validateArgCount("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=N(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(a.validateArgCount("Query.isEqual",1,1,arguments.length),!(e instanceof t)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}var n=this.repo===e.repo,i=this.path.equals(e.path),o=this.queryIdentifier()===e.queryIdentifier();return n&&i&&o},t.getCancelAndContextArgs_=function(t,e,n){var i={cancel:null,context:null};if(e&&n)i.cancel=e,a.validateCallback(t,3,i.cancel,!0),i.context=n,a.validateContextObject(t,4,i.context,!0);else if(e)if("object"==typeof e&&null!==e)i.context=e;else{if("function"!=typeof e)throw new Error(a.errorPrefix(t,3,!0)+" must either be a cancel callback or a context object.");i.cancel=e}return i},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}(),te=function(){function t(){this.set={}}return t.prototype.add=function(t,e){this.set[t]=null===e||e},t.prototype.contains=function(t){return a.contains(this.set,t)},t.prototype.get=function(t){return this.contains(t)?this.set[t]:void 0},t.prototype.remove=function(t){delete this.set[t]},t.prototype.clear=function(){this.set={}},t.prototype.isEmpty=function(){return a.isEmpty(this.set)},t.prototype.count=function(){return a.getCount(this.set)},t.prototype.each=function(t){a.forEach(this.set,function(e,n){return t(e,n)})},t.prototype.keys=function(){var t=[];return a.forEach(this.set,function(e){t.push(e)}),t},t}(),ee=function(){function t(){this.value_=null,this.children_=null}return t.prototype.find=function(t){if(null!=this.value_)return this.value_.getChild(t);if(t.isEmpty()||null==this.children_)return null;var e=t.getFront();return t=t.popFront(),this.children_.contains(e)?this.children_.get(e).find(t):null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value_=n,this.children_=null;else if(null!==this.value_)this.value_=this.value_.updateChild(e,n);else{null==this.children_&&(this.children_=new te);var i=e.getFront();this.children_.contains(i)||this.children_.add(i,new t);var o=this.children_.get(i);e=e.popFront(),o.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value_=null,this.children_=null,!0;if(null!==this.value_){if(this.value_.isLeafNode())return!1;var e=this.value_;this.value_=null;var n=this;return e.forEachChild(It,function(t,e){n.remember(new W(t),e)}),this.forget(t)}if(null!==this.children_){var i=t.getFront();if(t=t.popFront(),this.children_.contains(i))this.children_.get(i).forget(t)&&this.children_.remove(i);return!!this.children_.isEmpty()&&(this.children_=null,!0)}return!0},t.prototype.forEachTree=function(t,e){null!==this.value_?e(t,this.value_):this.forEachChild(function(n,i){var o=new W(t.toString()+"/"+n);i.forEachTree(o,e)})},t.prototype.forEachChild=function(t){null!==this.children_&&this.children_.each(function(e,n){t(e,n)})},t}(),ne=function(t,e){return t&&"object"==typeof t?(a.assert(".sv"in t,"Unexpected leaf node or priority contents"),e[t[".sv"]]):t},ie=function(t,e){var n,i=t.getPriority().val(),o=ne(i,e);if(t.isLeafNode()){var r=t,a=ne(r.getValue(),e);return a!==r.getValue()||o!==r.getPriority().val()?new xt(a,Vt(o)):t}var s=t;return n=s,o!==s.getPriority().val()&&(n=n.updatePriority(new xt(o))),s.forEachChild(It,function(t,i){var o=ie(i,e);o!==i&&(n=n.updateImmediateChild(t,o))}),n};!function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(qt||(qt={}));var oe,re,ae=function(){function t(t,e,n,i){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=i,a.assert(!i||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),se=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=qt.ACK_USER_WRITE,this.source=ae.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return a.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new W(e));return new t(W.Empty,n,this.revert)}return a.assert(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),le=function(){return oe||(oe=new Ot(A)),oe},ue=function(){function t(t,e){void 0===e&&(e=le()),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return a.forEach(e,function(t,e){n=n.set(new W(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:W.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),i=this.children.get(n);if(null!==i){var o=i.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=o?{path:new W(n).child(o.path),value:o.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),i=this.children.get(n);return null!==i?i.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var i=e.getFront(),o=(this.children.get(i)||t.Empty).set(e.popFront(),n),r=this.children.insert(i,o);return new t(this.value,r)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),i=this.children.get(n);if(i){var o=i.remove(e.popFront()),r=void 0;return r=o.isEmpty()?this.children.remove(n):this.children.insert(n,o),null===this.value&&r.isEmpty()?t.Empty:new t(this.value,r)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var i=e.getFront(),o=(this.children.get(i)||t.Empty).setTree(e.popFront(),n),r=void 0;return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(W.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(i,o){n[i]=o.fold_(t.child(i),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,W.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var i=!!this.value&&n(e,this.value);if(i)return i;if(t.isEmpty())return null;var o=t.getFront(),r=this.children.get(o);return r?r.findOnPath_(t.popFront(),e.child(o),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,W.Empty,e)},t.prototype.foreachOnPath_=function(e,n,i){if(e.isEmpty())return this;this.value&&i(n,this.value);var o=e.getFront(),r=this.children.get(o);return r?r.foreachOnPath_(e.popFront(),n.child(o),i):t.Empty},t.prototype.foreach=function(t){this.foreach_(W.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,i){i.foreach_(t.child(n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t.Empty=new t(null),t}(),ce=function(){function t(t,e){this.source=t,this.path=e,this.type=qt.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,W.Empty):new t(this.source,this.path.popFront())},t}(),he=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=qt.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,W.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),de=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=qt.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new W(e));return n.isEmpty()?null:n.value?new he(this.source,W.Empty,n.value):new t(this.source,W.Empty,n)}return a.assert(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),fe=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),pe=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,i){return new t(new fe(e,n,i),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,i){return new t(this.eventCache_,new fe(e,n,i))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new fe(zt.EMPTY_NODE,!1,!1),new fe(zt.EMPTY_NODE,!1,!1)),t}(),me=function(){function t(t,e,n,i,o){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=i,this.prevName=o}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,i){return new t(t.CHILD_CHANGED,n,e,i)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),ve=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,i,o,r){a.assert(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(i).equals(n.getChild(i))&&s.isEmpty()==n.isEmpty()?t:(null!=r&&(n.isEmpty()?t.hasChild(e)?r.trackChildChange(me.childRemovedChange(e,s)):a.assert(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?r.trackChildChange(me.childAddedChange(e,n)):r.trackChildChange(me.childChangedChange(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(It,function(t,i){e.hasChild(t)||n.trackChildChange(me.childRemovedChange(t,i))}),e.isLeafNode()||e.forEachChild(It,function(e,i){if(t.hasChild(e)){var o=t.getImmediateChild(e);o.equals(i)||n.trackChildChange(me.childChangedChange(e,i,o))}else n.trackChildChange(me.childAddedChange(e,i))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?zt.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),ge=function(){function t(){this.changeMap_={}}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;a.assert(e==me.CHILD_ADDED||e==me.CHILD_CHANGED||e==me.CHILD_REMOVED,"Only child changes supported for tracking"),a.assert(".priority"!==n,"Only non-priority child changes can be tracked.");var i=a.safeGet(this.changeMap_,n);if(i){var o=i.type;if(e==me.CHILD_ADDED&&o==me.CHILD_REMOVED)this.changeMap_[n]=me.childChangedChange(n,t.snapshotNode,i.snapshotNode);else if(e==me.CHILD_REMOVED&&o==me.CHILD_ADDED)delete this.changeMap_[n];else if(e==me.CHILD_REMOVED&&o==me.CHILD_CHANGED)this.changeMap_[n]=me.childRemovedChange(n,i.oldSnap);else if(e==me.CHILD_CHANGED&&o==me.CHILD_ADDED)this.changeMap_[n]=me.childAddedChange(n,t.snapshotNode);else{if(e!=me.CHILD_CHANGED||o!=me.CHILD_CHANGED)throw a.assertionError("Illegal combination of changes: "+t+" occurred after "+i);this.changeMap_[n]=me.childChangedChange(n,t.snapshotNode,i.oldSnap)}}else this.changeMap_[n]=t},t.prototype.getChanges=function(){return a.getValues(this.changeMap_)},t}(),_e=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),ye=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new fe(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),o=this.writes_.calcIndexedSlice(i,e,1,n,t);return 0===o.length?null:o[0]},t}(),be=function(){return function(t,e){this.viewCache=t,this.changes=e}}(),we=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){a.assert(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),a.assert(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,i,o){var r,s,l=new ge;if(n.type===qt.OVERWRITE){var u=n;u.source.fromUser?r=this.applyUserOverwrite_(e,u.path,u.snap,i,o,l):(a.assert(u.source.fromServer,"Unknown source."),s=u.source.tagged||e.getServerCache().isFiltered()&&!u.path.isEmpty(),r=this.applyServerOverwrite_(e,u.path,u.snap,i,o,s,l))}else if(n.type===qt.MERGE){var c=n;c.source.fromUser?r=this.applyUserMerge_(e,c.path,c.children,i,o,l):(a.assert(c.source.fromServer,"Unknown source."),s=c.source.tagged||e.getServerCache().isFiltered(),r=this.applyServerMerge_(e,c.path,c.children,i,o,s,l))}else if(n.type===qt.ACK_USER_WRITE){var h=n;r=h.revert?this.revertUserWrite_(e,h.path,i,o,l):this.ackUserWrite_(e,h.path,h.affectedTree,i,o,l)}else{if(n.type!==qt.LISTEN_COMPLETE)throw a.assertionError("Unknown operation type: "+n.type);r=this.listenComplete_(e,n.path,i,l)}var d=l.getChanges();return t.maybeAddValueEvent_(e,r,d),new be(r,d)},t.maybeAddValueEvent_=function(t,e,n){var i=e.getEventCache();if(i.isFullyInitialized()){var o=i.getNode().isLeafNode()||i.getNode().isEmpty(),r=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||o&&!i.getNode().equals(r)||!i.getNode().getPriority().equals(r.getPriority()))&&n.push(me.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,i,o){var r=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s=void 0,l=void 0;if(e.isEmpty())if(a.assert(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var u=t.getCompleteServerSnap(),c=u instanceof zt?u:zt.EMPTY_NODE,h=n.calcCompleteEventChildren(c);s=this.filter_.updateFullNode(t.getEventCache().getNode(),h,o)}else{var d=n.calcCompleteEventCache(t.getCompleteServerSnap());s=this.filter_.updateFullNode(t.getEventCache().getNode(),d,o)}else{var f=e.getFront();if(".priority"==f){a.assert(1==e.getLength(),"Can't have a priority with additional path components");var p=r.getNode();l=t.getServerCache().getNode();var m=n.calcEventCacheAfterServerOverwrite(e,p,l);s=null!=m?this.filter_.updatePriority(p,m):r.getNode()}else{var v=e.popFront(),g=void 0;if(r.isCompleteForChild(f)){l=t.getServerCache().getNode();var _=n.calcEventCacheAfterServerOverwrite(e,r.getNode(),l);g=null!=_?r.getNode().getImmediateChild(f).updateChild(v,_):r.getNode().getImmediateChild(f)}else g=n.calcCompleteChild(f,t.getServerCache());s=null!=g?this.filter_.updateChild(r.getNode(),f,g,v,i,o):r.getNode()}}return t.updateEventSnap(s,r.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,i,o,r,a){var s,l=t.getServerCache(),u=r?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())s=u.updateFullNode(l.getNode(),n,null);else if(u.filtersNodes()&&!l.isFiltered()){var c=l.getNode().updateChild(e,n);s=u.updateFullNode(l.getNode(),c,null)}else{var h=e.getFront();if(!l.isCompleteForPath(e)&&e.getLength()>1)return t;var d=e.popFront(),f=l.getNode().getImmediateChild(h).updateChild(d,n);s=".priority"==h?u.updatePriority(l.getNode(),f):u.updateChild(l.getNode(),h,f,d,_e,null)}var p=t.updateServerSnap(s,l.isFullyInitialized()||e.isEmpty(),u.filtersNodes()),m=new ye(i,p,o);return this.generateEventCacheAfterServerEvent_(p,e,i,m,a)},t.prototype.applyUserOverwrite_=function(t,e,n,i,o,r){var a,s,l=t.getEventCache(),u=new ye(i,t,o);if(e.isEmpty())s=this.filter_.updateFullNode(t.getEventCache().getNode(),n,r),a=t.updateEventSnap(s,!0,this.filter_.filtersNodes());else{var c=e.getFront();if(".priority"===c)s=this.filter_.updatePriority(t.getEventCache().getNode(),n),a=t.updateEventSnap(s,l.isFullyInitialized(),l.isFiltered());else{var h=e.popFront(),d=l.getNode().getImmediateChild(c),f=void 0;if(h.isEmpty())f=n;else{var p=u.getCompleteChild(c);f=null!=p?".priority"===h.getBack()&&p.getChild(h.parent()).isEmpty()?p:p.updateChild(h,n):zt.EMPTY_NODE}if(d.equals(f))a=t;else{var m=this.filter_.updateChild(l.getNode(),c,f,h,u,r);a=t.updateEventSnap(m,l.isFullyInitialized(),this.filter_.filtersNodes())}}}return a},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,i,o,r,a){var s=this,l=e;return i.foreach(function(i,u){var c=n.child(i);t.cacheHasChild_(e,c.getFront())&&(l=s.applyUserOverwrite_(l,c,u,o,r,a))}),i.foreach(function(i,u){var c=n.child(i);t.cacheHasChild_(e,c.getFront())||(l=s.applyUserOverwrite_(l,c,u,o,r,a))}),l},t.prototype.applyMerge_=function(t,e){return e.foreach(function(e,n){t=t.updateChild(e,n)}),t},t.prototype.applyServerMerge_=function(t,e,n,i,o,r,a){var s=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var l,u=t;l=e.isEmpty()?n:ue.Empty.setTree(e,n);var c=t.getServerCache().getNode();return l.children.inorderTraversal(function(e,n){if(c.hasChild(e)){var l=t.getServerCache().getNode().getImmediateChild(e),h=s.applyMerge_(l,n);u=s.applyServerOverwrite_(u,new W(e),h,i,o,r,a)}}),l.children.inorderTraversal(function(e,n){var l=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!c.hasChild(e)&&!l){var h=t.getServerCache().getNode().getImmediateChild(e),d=s.applyMerge_(h,n);u=s.applyServerOverwrite_(u,new W(e),d,i,o,r,a)}}),u},t.prototype.ackUserWrite_=function(t,e,n,i,o,r){if(null!=i.shadowingWrite(e))return t;var a=t.getServerCache().isFiltered(),s=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,s.getNode().getChild(e),i,o,a,r);if(e.isEmpty()){var l=ue.Empty;return s.getNode().forEachChild(yt,function(t,e){l=l.set(new W(t),e)}),this.applyServerMerge_(t,e,l,i,o,a,r)}return t}var u=ue.Empty;return n.foreach(function(t,n){var i=e.child(t);s.isCompleteForPath(i)&&(u=u.set(t,s.getNode().getChild(i)))}),this.applyServerMerge_(t,e,u,i,o,a,r)},t.prototype.listenComplete_=function(t,e,n,i){var o=t.getServerCache(),r=t.updateServerSnap(o.getNode(),o.isFullyInitialized()||e.isEmpty(),o.isFiltered());return this.generateEventCacheAfterServerEvent_(r,e,n,_e,i)},t.prototype.revertUserWrite_=function(t,e,n,i,o){var r;if(null!=n.shadowingWrite(e))return t;var s=new ye(n,t,i),l=t.getEventCache().getNode(),u=void 0;if(e.isEmpty()||".priority"===e.getFront()){var c=void 0;if(t.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();a.assert(h instanceof zt,"serverChildren would be complete if leaf node"),c=n.calcCompleteEventChildren(h)}c=c,u=this.filter_.updateFullNode(l,c,o)}else{var d=e.getFront(),f=n.calcCompleteChild(d,t.getServerCache());null==f&&t.getServerCache().isCompleteForChild(d)&&(f=l.getImmediateChild(d)),(u=null!=f?this.filter_.updateChild(l,d,f,e.popFront(),s,o):t.getEventCache().getNode().hasChild(d)?this.filter_.updateChild(l,d,zt.EMPTY_NODE,e.popFront(),s,o):l).isEmpty()&&t.getServerCache().isFullyInitialized()&&(r=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(u=this.filter_.updateFullNode(u,r,o))}return r=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(W.Empty),t.updateEventSnap(u,r,this.filter_.filtersNodes())},t}(),Ee=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var i=this,o=[],r=[];return t.forEach(function(t){t.type===me.CHILD_CHANGED&&i.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&r.push(me.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(o,me.CHILD_REMOVED,t,n,e),this.generateEventsForType_(o,me.CHILD_ADDED,t,n,e),this.generateEventsForType_(o,me.CHILD_MOVED,r,n,e),this.generateEventsForType_(o,me.CHILD_CHANGED,t,n,e),this.generateEventsForType_(o,me.VALUE,t,n,e),o},t.prototype.generateEventsForType_=function(t,e,n,i,o){var r=this,a=n.filter(function(t){return t.type===e});a.sort(this.compareChanges_.bind(this)),a.forEach(function(e){var n=r.materializeSingleChange_(e,o);i.forEach(function(i){i.respondsTo(e.type)&&t.push(i.createEvent(n,r.query_))})})},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type?t:(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_),t)},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw a.assertionError("Should only compare child_ events.");var n=new vt(t.childName,t.snapshotNode),i=new vt(e.childName,e.snapshotNode);return this.index_.compare(n,i)},t}(),Se=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),i=new ve(n.getIndex()),o=n.getNodeFilter();this.processor_=new we(o);var r=e.getServerCache(),a=e.getEventCache(),s=i.updateFullNode(zt.EMPTY_NODE,r.getNode(),null),l=o.updateFullNode(zt.EMPTY_NODE,a.getNode(),null),u=new fe(s,r.isFullyInitialized(),i.filtersNodes()),c=new fe(l,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=new pe(c,u),this.eventGenerator_=new Ee(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){a.assert(null==t,"A cancel should cancel all event registrations.");var i=this.query_.path;this.eventRegistrations_.forEach(function(t){e=e;var o=t.createCancelEvent(e,i);o&&n.push(o)})}if(t){for(var o=[],r=0;r<this.eventRegistrations_.length;++r){var s=this.eventRegistrations_[r];if(s.matches(t)){if(t.hasAnyCallback()){o=o.concat(this.eventRegistrations_.slice(r+1));break}}else o.push(s)}this.eventRegistrations_=o}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===qt.MERGE&&null!==t.source.queryId&&(a.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),a.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var i=this.viewCache_,o=this.processor_.applyOperation(i,t,e,n);return this.processor_.assertIndexed(o.viewCache),a.assert(o.viewCache.getServerCache().isFullyInitialized()||!i.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=o.viewCache,this.generateEventsForChanges_(o.changes,o.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];e.getNode().isLeafNode()||e.getNode().forEachChild(It,function(t,e){n.push(me.childAddedChange(t,e))});return e.isFullyInitialized()&&n.push(me.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){var i=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,i)},t}(),Ce=function(){function t(){this.views_={}}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return a.assert(re,"Reference.ts has not been loaded"),re},set:function(t){a.assert(!re,"__referenceConstructor has already been defined"),re=t},enumerable:!0,configurable:!0}),t.prototype.isEmpty=function(){return a.isEmpty(this.views_)},t.prototype.applyOperation=function(t,e,n){var i=t.source.queryId;if(null!==i){var o=a.safeGet(this.views_,i);return a.assert(null!=o,"SyncTree gave us an op for an invalid query."),o.applyOperation(t,e,n)}var r=[];return a.forEach(this.views_,function(i,o){r=r.concat(o.applyOperation(t,e,n))}),r},t.prototype.addEventRegistration=function(t,e,n,i,o){var r=t.queryIdentifier(),s=a.safeGet(this.views_,r);if(!s){var l=n.calcCompleteEventCache(o?i:null),u=!1;l?u=!0:i instanceof zt?(l=n.calcCompleteEventChildren(i),u=!1):(l=zt.EMPTY_NODE,u=!1);var c=new pe(new fe(l,u,!1),new fe(i,o,!1));s=new Se(t,c),this.views_[r]=s}return s.addEventRegistration(e),s.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,i){var o=e.queryIdentifier(),r=[],s=[],l=this.hasCompleteView();if("default"===o){var u=this;a.forEach(this.views_,function(t,e){s=s.concat(e.removeEventRegistration(n,i)),e.isEmpty()&&(delete u.views_[t],e.getQuery().getQueryParams().loadsAllData()||r.push(e.getQuery()))})}else{var c=a.safeGet(this.views_,o);c&&(s=s.concat(c.removeEventRegistration(n,i)),c.isEmpty()&&(delete this.views_[o],c.getQuery().getQueryParams().loadsAllData()||r.push(c.getQuery())))}return l&&!this.hasCompleteView()&&r.push(new t.__referenceConstructor(e.repo,e.path)),{removed:r,events:s}},t.prototype.getQueryViews=function(){var t=this;return Object.keys(this.views_).map(function(e){return t.views_[e]}).filter(function(t){return!t.getQuery().getQueryParams().loadsAllData()})},t.prototype.getCompleteServerCache=function(t){var e=null;return a.forEach(this.views_,function(n,i){e=e||i.getCompleteServerCache(t)}),e},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return a.safeGet(this.views_,e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){return a.findValue(this.views_,function(t){return t.getQuery().getQueryParams().loadsAllData()})||null},t}(),xe=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new ue(n));var i=this.writeTree_.findRootMostValueAndPath(e);if(null!=i){var o=i.path,r=i.value,a=W.relativePath(o,e);return r=r.updateChild(a,n),new t(this.writeTree_.set(o,r))}var s=new ue(n);return new t(this.writeTree_.setTree(e,s))},t.prototype.addWrites=function(t,e){var n=this;return a.forEach(e,function(e,i){n=n.addWrite(t.child(e),i)}),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,ue.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(W.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(It,function(e,n){t.push(new vt(e,n))}):this.writeTree_.children.inorderTraversal(function(e,n){null!=n.value&&t.push(new vt(e,n.value))}),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new ue(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(e){return t.applySubtreeWrite_(W.Empty,this.writeTree_,e)},t.Empty=new t(new ue(null)),t.applySubtreeWrite_=function(e,n,i){if(null!=n.value)return i.updateChild(e,n.value);var o=null;return n.children.inorderTraversal(function(n,r){".priority"===n?(a.assert(null!==r.value,"Priority writes must always be leaf nodes"),o=r.value):i=t.applySubtreeWrite_(e.child(n),r,i)}),i.getChild(e).isEmpty()||null===o||(i=i.updateChild(e.child(".priority"),o)),i},t}(),Te=function(){function t(){this.visibleWrites_=xe.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new ke(t,this)},t.prototype.addOverwrite=function(t,e,n,i){a.assert(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:i}),i&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){a.assert(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex(function(e){return e.writeId===t});a.assert(n>=0,"removeWrite called with nonexistent writeId.");var i=this.allWrites_[n];this.allWrites_.splice(n,1);for(var o=i.visible,r=!1,s=this.allWrites_.length-1;o&&s>=0;){var l=this.allWrites_[s];l.visible&&(s>=n&&this.recordContainsPath_(l,i.path)?o=!1:i.path.contains(l.path)&&(r=!0)),s--}if(o){if(r)return this.resetTree_(),!0;if(i.snap)this.visibleWrites_=this.visibleWrites_.removeWrite(i.path);else{var u=i.children;a.forEach(u,function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(i.path.child(t))})}return!0}return!1},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,i,o){if(i||o){var r=this.visibleWrites_.childCompoundWrite(e);if(!o&&r.isEmpty())return n;if(o||null!=n||r.hasCompleteWrite(W.Empty)){var a=t.layerTree_(this.allWrites_,function(t){return(t.visible||o)&&(!i||!~i.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e);u=n||zt.EMPTY_NODE;return a.apply(u)}return null}var s=this.visibleWrites_.getCompleteNode(e);if(null!=s)return s;var l=this.visibleWrites_.childCompoundWrite(e);if(l.isEmpty())return n;if(null!=n||l.hasCompleteWrite(W.Empty)){var u=n||zt.EMPTY_NODE;return l.apply(u)}return null},t.prototype.calcCompleteEventChildren=function(t,e){var n=zt.EMPTY_NODE,i=this.visibleWrites_.getCompleteNode(t);if(i)return i.isLeafNode()||i.forEachChild(It,function(t,e){n=n.updateImmediateChild(t,e)}),n;if(e){var o=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(It,function(t,e){var i=o.childCompoundWrite(new W(t)).apply(e);n=n.updateImmediateChild(t,i)}),o.getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,i){a.assert(n||i,"Either existingEventSnap or existingServerSnap must exist");var o=t.child(e);if(this.visibleWrites_.hasCompleteWrite(o))return null;var r=this.visibleWrites_.childCompoundWrite(o);return r.isEmpty()?i.getChild(e):r.apply(i.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var i=t.child(e),o=this.visibleWrites_.getCompleteNode(i);return null!=o?o:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(i).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,i,o,r){var a,s=this.visibleWrites_.childCompoundWrite(t),l=s.getCompleteNode(W.Empty);if(null!=l)a=l;else{if(null==e)return[];a=s.apply(e)}if((a=a.withIndex(r)).isEmpty()||a.isLeafNode())return[];for(var u=[],c=r.getCompare(),h=o?a.getReverseIteratorFrom(n,r):a.getIteratorFrom(n,r),d=h.getNext();d&&u.length<i;)0!==c(d,n)&&u.push(d),d=h.getNext();return u},t.prototype.recordContainsPath_=function(t,e){return t.snap?t.path.contains(e):!!a.findKey(t.children,function(n,i){return t.path.child(i).contains(e)})},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,W.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var i=xe.Empty,o=0;o<t.length;++o){var r=t[o];if(e(r)){var s=r.path,l=void 0;if(r.snap)n.contains(s)?(l=W.relativePath(n,s),i=i.addWrite(l,r.snap)):s.contains(n)&&(l=W.relativePath(s,n),i=i.addWrite(W.Empty,r.snap.getChild(l)));else{if(!r.children)throw a.assertionError("WriteRecord should have .snap or .children");if(n.contains(s))l=W.relativePath(n,s),i=i.addWrites(l,r.children);else if(s.contains(n))if((l=W.relativePath(s,n)).isEmpty())i=i.addWrites(W.Empty,r.children);else{var u=a.safeGet(r.children,l.getFront());if(u){var c=u.getChild(l.popFront());i=i.addWrite(W.Empty,c)}}}}}return i},t}(),ke=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,i,o){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,i,o)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),Ie=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=ue.Empty,this.pendingWriteTree_=new Te,this.tagToQueryMap_={},this.queryToTagMap_={}}return t.prototype.applyUserOverwrite=function(t,e,n,i){return this.pendingWriteTree_.addOverwrite(t,e,n,i),i?this.applyOperationToSyncPoints_(new he(ae.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var i=ue.fromObject(e);return this.applyOperationToSyncPoints_(new de(ae.User,t,i))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var i=ue.Empty;return null!=n.snap?i=i.set(W.Empty,!0):a.forEach(n.children,function(t,e){i=i.set(new W(t),e)}),this.applyOperationToSyncPoints_(new se(n.path,i,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new he(ae.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=ue.fromObject(e);return this.applyOperationToSyncPoints_(new de(ae.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new ce(ae.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,i){var o=this.queryKeyForTag_(i);if(null!=o){var r=t.parseQueryKey_(o),a=r.path,s=r.queryId,l=W.relativePath(a,e),u=new he(ae.forServerTaggedQuery(s),l,n);return this.applyTaggedOperation_(a,u)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,i){var o=this.queryKeyForTag_(i);if(o){var r=t.parseQueryKey_(o),a=r.path,s=r.queryId,l=W.relativePath(a,e),u=ue.fromObject(n),c=new de(ae.forServerTaggedQuery(s),l,u);return this.applyTaggedOperation_(a,c)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var i=this.queryKeyForTag_(n);if(i){var o=t.parseQueryKey_(i),r=o.path,a=o.queryId,s=W.relativePath(r,e),l=new ce(ae.forServerTaggedQuery(a),s);return this.applyTaggedOperation_(r,l)}return[]},t.prototype.addEventRegistration=function(e,n){var i=e.path,o=null,r=!1;this.syncPointTree_.foreachOnPath(i,function(t,e){var n=W.relativePath(t,i);o=o||e.getCompleteServerCache(n),r=r||e.hasCompleteView()});var s,l=this.syncPointTree_.get(i);(l?(r=r||l.hasCompleteView(),o=o||l.getCompleteServerCache(W.Empty)):(l=new Ce,this.syncPointTree_=this.syncPointTree_.set(i,l)),null!=o)?s=!0:(s=!1,o=zt.EMPTY_NODE,this.syncPointTree_.subtree(i).foreachChild(function(t,e){var n=e.getCompleteServerCache(W.Empty);n&&(o=o.updateImmediateChild(t,n))}));var u=l.viewExistsForQuery(e);if(!u&&!e.getQueryParams().loadsAllData()){var c=t.makeQueryKey_(e);a.assert(!(c in this.queryToTagMap_),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap_[c]=h,this.tagToQueryMap_["_"+h]=c}var d=this.pendingWriteTree_.childWrites(i),f=l.addEventRegistration(e,n,d,o,s);if(!u&&!r){var p=l.viewForQuery(e);f=f.concat(this.setupListener_(e,p))}return f},t.prototype.removeEventRegistration=function(e,n,i){var o=this,r=e.path,a=this.syncPointTree_.get(r),s=[];if(a&&("default"===e.queryIdentifier()||a.viewExistsForQuery(e))){var l=a.removeEventRegistration(e,n,i);a.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(r));var u=l.removed;s=l.events;var c=-1!==u.findIndex(function(t){return t.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(r,function(t,e){return e.hasCompleteView()});if(c&&!h){var d=this.syncPointTree_.subtree(r);if(!d.isEmpty())for(var f=this.collectDistinctViewsForSubTree_(d),p=0;p<f.length;++p){var m=f[p],v=m.getQuery(),g=this.createListenerForView_(m);this.listenProvider_.startListening(t.queryForListening_(v),this.tagForQuery_(v),g.hashFn,g.onComplete)}}if(!h&&u.length>0&&!i)if(c){this.listenProvider_.stopListening(t.queryForListening_(e),null)}else u.forEach(function(e){var n=o.queryToTagMap_[t.makeQueryKey_(e)];o.listenProvider_.stopListening(t.queryForListening_(e),n)});this.removeTags_(u)}return s},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,i=this.syncPointTree_.findOnPath(t,function(e,n){var i=W.relativePath(e,t),o=n.getCompleteServerCache(i);if(o)return o});return n.calcCompleteEventCache(t,i,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var i=[];return e&&(i=e.getQueryViews()),a.forEach(n,function(t,e){i=i.concat(e)}),i})},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var i=e[n];if(!i.getQueryParams().loadsAllData()){var o=t.makeQueryKey_(i),r=this.queryToTagMap_[o];delete this.queryToTagMap_[o],delete this.tagToQueryMap_["_"+r]}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var i=e.path,o=this.tagForQuery_(e),r=this.createListenerForView_(n),s=this.listenProvider_.startListening(t.queryForListening_(e),o,r.hashFn,r.onComplete),l=this.syncPointTree_.subtree(i);if(o)a.assert(!l.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var u=l.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var i=[];return e&&(i=i.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),a.forEach(n,function(t,e){i=i.concat(e)}),i}),c=0;c<u.length;++c){var h=u[c];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return s},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),i=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||zt.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return i?e.applyTaggedListenComplete(n.path,i):e.applyListenComplete(n.path);var o=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==t?n="Client doesn't have permission to access the desired data.":"unavailable"==t&&(n="The service is unavailable");var i=new Error(t+" at "+e.path.toString()+": "+n);return i.code=t.toUpperCase(),i}(t,n);return e.removeEventRegistration(n,null,o)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return a.assert(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new W(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap_["_"+t]},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return a.safeGet(this.queryToTagMap_,n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);a.assert(n,"Missing sync point for query tag that we're tracking");var i=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,i,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(W.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,i){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,i);var o=e.get(W.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(W.Empty));var r=[],a=t.path.getFront(),s=t.operationForChild(a),l=e.children.get(a);if(l&&s){var u=n?n.getImmediateChild(a):null,c=i.child(a);r=r.concat(this.applyOperationHelper_(s,l,u,c))}return o&&(r=r.concat(o.applyOperation(t,i,n))),r},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,i){var o=this,r=e.get(W.Empty);null==n&&null!=r&&(n=r.getCompleteServerCache(W.Empty));var a=[];return e.children.inorderTraversal(function(e,r){var s=n?n.getImmediateChild(e):null,l=i.child(e),u=t.operationForChild(e);u&&(a=a.concat(o.applyOperationDescendantsHelper_(u,r,s,l)))}),r&&(a=a.concat(r.applyOperation(t,i,n))),a},t.nextQueryTag_=1,t}(),Pe=function(){function t(){this.rootNode_=zt.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),Le=function(){function t(t){this.app_=t}return t.prototype.getToken=function(t){return this.app_.INTERNAL.getToken(t).then(null,function(t){return t&&"auth/token-not-initialized"===t.code?(E("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})},t.prototype.addTokenChangeListener=function(t){this.app_.INTERNAL.addAuthTokenListener(t)},t.prototype.removeTokenChangeListener=function(t){this.app_.INTERNAL.removeAuthTokenListener(t)},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',T(t)},t}(),Ae=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),a.contains(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return a.deepCopy(this.counters_)},t}(),Oe=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Ae),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),Ne=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=a.clone(t);return this.last_&&a.forEach(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),Re=1e4,De=3e4,Me=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Ne(t);var n=Re+(De-Re)*Math.random();U(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},i=!1;a.forEach(e,function(e,o){o>0&&a.contains(t.statsToReport_,e)&&(n[e]=o,i=!0)}),i&&this.server_.reportStats(n),U(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Fe=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var i=t[n],o=i.getPath();null===e||o.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new je(o)),e.add(i)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.equals(t)})},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.contains(t)||t.contains(e)})},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var i=this.eventLists_[n];if(i)t(i.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),je=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();y&&E("event: "+e.toString()),B(n)}}},t.prototype.getPath=function(){return this.path_},t}(),Be=function(){function t(t){this.allowedEvents_=t,this.listeners_={},a.assert(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var i=this.listeners_[t].slice(),o=0;o<i.length;o++)i[o].callback.apply(i[o].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var i=this.getInitialEvent(t);i&&e.apply(n,i)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var i=this.listeners_[t]||[],o=0;o<i.length;o++)if(i[o].callback===e&&(!n||n===i[o].context))return void i.splice(o,1)},t.prototype.validateEventType_=function(t){a.assert(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),ze=function(t){function e(){var e,n,i=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),i.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==i.visible_&&(i.visible_=t,i.trigger("visible",t))},!1),i}return l.__extends(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return a.assert("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(Be),Ue=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||a.isMobileCordova()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return l.__extends(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return a.assert("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(Be),We=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var i=function(){var t=o.pendingResponses[o.currentResponseNum];delete o.pendingResponses[o.currentResponseNum];for(var e=function(e){t[e]&&B(function(){n.onMessage_(t[e])})},i=0;i<t.length;++i)e(i);if(o.currentResponseNum===o.closeAfterResponse)return o.onClose&&(o.onClose(),o.onClose=null),"break";o.currentResponseNum++},o=this;this.pendingResponses[this.currentResponseNum];){if("break"===i())break}},t}(),Ve="pLPCommand",He="pRTLPCB",qe=function(){function t(t,e,n,i){this.connId=t,this.repoInfo=e,this.transportSessionId=n,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=S(t),this.stats_=Oe.getCollection(e),this.urlFn=function(t){return e.connectionURL(H,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new We(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(a.isNodeSdk()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new Ze(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[0],o=t[1],r=t[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"==i)n.id=o,n.password=r;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[0],o=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),!a.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return t.forceAllow_||!t.forceDisallow_&&"undefined"!=typeof document&&null!=document.createElement&&!("object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"==typeof Windows&&"object"==typeof Windows.UI)&&!a.isNodeSdk()},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=a.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=a.base64Encode(e),i=R(n,1840),o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!a.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=a.stringify(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Ze=function(){function t(e,n,i,o){if(this.onDisconnect=i,this.urlFn=o,this.outstandingRequests=new te,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,a.isNodeSdk())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=v(),window[Ve+this.uniqueCallbackIdentifier]=e,window[He+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var r="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))r='<script>document.domain="'+document.domain+'";<\/script>';var s="<html><body>"+r+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(t){E("frame writing exception"),t.stack&&E(t.stack),E(t)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||E("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var e=this;if(this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)},Math.floor(0))),a.isNodeSdk()&&this.myID){var n={disconn:"t"};n.id=this.myID,n.pw=this.myPW;var i=this.urlFn(n);t.nodeRestRequest(i)}var o=this.onDisconnect;o&&(this.onDisconnect=null,o())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.count()<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",i=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var o=this.pendingSegs.shift();n=n+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e,1);var i=function(){n.outstandingRequests.remove(e),n.newRequest_()},o=setTimeout(i,Math.floor(25e3));this.addTag(t,function(){clearTimeout(o),i()})},t.prototype.addTag=function(t,e){var n=this;a.isNodeSdk()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var i=n.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){var t=i.readyState;t&&"loaded"!==t&&"complete"!==t||(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=function(){E("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(i)}catch(t){}},Math.floor(1))},t}(),Ke=null;"undefined"!=typeof MozWebSocket?Ke=MozWebSocket:"undefined"!=typeof WebSocket&&(Ke=WebSocket);var Ge=function(){function t(e,n,i,o){this.connId=e,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=S(this.connId),this.stats_=Oe.getCollection(n),this.connURL=t.connectionURL_(n,i,o)}return t.connectionURL_=function(t,e,n){var i={v:"5"};return!a.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(i.r="f"),e&&(i.s=e),n&&(i.ls=n),t.connectionURL("websocket",i)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,f.set("previous_websocket_failure",!0);try{if(a.isNodeSdk()){var o=a.CONSTANTS.NODE_ADMIN?"AdminNode":"Node",r={headers:{"User-Agent":"Firebase/5/"+u.SDK_VERSION+"/"+i.platform+"/"+o}},s=i.env,l=0==this.connURL.indexOf("wss://")?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;l&&(r.proxy={origin:l}),this.mySock=new Ke(this.connURL,[],r)}else this.mySock=new Ke(this.connURL)}catch(t){this.log_("Error instantiating WebSocket.");var c=t.message||t.data;return c&&this.log_(c),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Ke&&!t.forceDisallow_},t.previouslyFailed=function(){return f.isInMemoryStorage||!0===f.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){f.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length==this.totalFrames){var e=this.frames.join("");this.frames=null;var n=a.jsonEval(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(a.assert(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=a.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=R(e,16384);n.length>1&&this.sendString_(String(n.length));for(var i=0;i<n.length;i++)this.sendString_(n[i])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Qe=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[qe,Ge]},enumerable:!0,configurable:!0}),t.prototype.initTransports_=function(e){var n=Ge&&Ge.isAvailable(),i=n&&!Ge.previouslyFailed();if(e.webSocketOnly&&(n||T("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ge];else{var o=this.transports_=[];D(t.ALL_TRANSPORTS,function(t,e){e&&e.isAvailable()&&o.push(e)})}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),Ye=function(){function t(t,e,n,i,o,r,a){this.id=t,this.repoInfo_=e,this.onMessage_=n,this.onReady_=i,this.onDisconnect_=o,this.onKill_=r,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=S("c:"+this.id+":"),this.transportManager_=new Qe(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,i)},Math.floor(0));var o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=U(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(o)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!=e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=O("t",t),n=O("d",t);if("c"==e)this.onSecondaryControl_(n);else{if("d"!=e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=O("t",t),n=O("d",t);"c"==e?this.onControl_(n):"d"==e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=O("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?C("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):C("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(i),0==this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&T("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),U(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):U(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(f.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),Xe=function(){function t(){}return t.prototype.put=function(t,e,n,i){},t.prototype.merge=function(t,e,n,i){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),Je=1e3,$e=3e5,tn=function(t){function e(n,i,o,r,s,l){var u=t.call(this)||this;if(u.repoInfo_=n,u.onDataUpdate_=i,u.onConnectStatus_=o,u.onServerInfoUpdate_=r,u.authTokenProvider_=s,u.authOverride_=l,u.id=e.nextPersistentConnectionId_++,u.log_=S("p:"+u.id+":"),u.interruptReasons_={},u.listens_={},u.outstandingPuts_=[],u.outstandingPutCount_=0,u.onDisconnectRequestQueue_=[],u.connected_=!1,u.reconnectDelay_=Je,u.maxReconnectDelay_=$e,u.securityDebugCallback_=null,u.lastSessionId=null,u.establishConnectionTimer_=null,u.visible_=!1,u.requestCBHash_={},u.requestNumber_=0,u.realtime_=null,u.authToken_=null,u.forceTokenRefresh_=!1,u.invalidAuthTokenCount_=0,u.firstConnection_=!0,u.lastConnectionAttemptTime_=null,u.lastConnectionEstablishedTime_=null,l&&!a.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return u.scheduleConnect_(0),ze.getInstance().on("visible",u.onVisible_,u),-1===n.host.indexOf("fblocal")&&Ue.getInstance().on("online",u.onOnline_,u),u}return l.__extends(e,t),e.prototype.sendRequest=function(t,e,n){var i=++this.requestNumber_,o={r:i,a:t,b:e};this.log_(a.stringify(o)),a.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),n&&(this.requestCBHash_[i]=n)},e.prototype.listen=function(t,e,n,i){var o=t.queryIdentifier(),r=t.path.toString();this.log_("Listen called for "+r+" "+o),this.listens_[r]=this.listens_[r]||{},a.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),a.assert(!this.listens_[r][o],"listen() called twice for same path/queryId.");var s={onComplete:i,hashFn:e,query:t,tag:n};this.listens_[r][o]=s,this.connected_&&this.sendListen_(s)},e.prototype.sendListen_=function(t){var n=this,i=t.query,o=i.path.toString(),r=i.queryIdentifier();this.log_("Listen on "+o+" for "+r);var a={p:o};t.tag&&(a.q=i.queryObject(),a.t=t.tag),a.h=t.hashFn(),this.sendRequest("q",a,function(a){var s=a.d,l=a.s;e.warnOnListenWarnings_(s,i),(n.listens_[o]&&n.listens_[o][r])===t&&(n.log_("listen response",a),"ok"!==l&&n.removeListen_(o,r),t.onComplete&&t.onComplete(l,s))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&a.contains(t,"w")){var n=a.safeGet(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var i='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',o=e.path.toString();T("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+i+" at "+o+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||a.isAdmin(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=a.isValidFormat(e)?"auth":"gauth",i={cred:e};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(n,i,function(n){var i=n.s,o=n.d||"error";t.authToken_===e&&("ok"===i?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(i,o))})}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),i=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+i),a.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,i)&&this.connected_&&this.sendUnlisten_(n,i,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,i){this.log_("Unlisten on "+t+" for "+e);var o={p:t};i&&(o.q=n,o.t=i),this.sendRequest("n",o)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,i){var o={p:e,d:n};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,function(t){i&&setTimeout(function(){i(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,i){this.putInternal("p",t,e,n,i)},e.prototype.merge=function(t,e,n,i){this.putInternal("m",t,e,n,i)},e.prototype.putInternal=function(t,e,n,i,o){var r={p:e,d:n};void 0!==o&&(r.h=o),this.outstandingPuts_.push({action:t,request:r,onComplete:i}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,i,function(i){e.log_(n+" response",i),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),o&&o(i.s,i.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){if("ok"!==t.s){var n=t.d;e.log_("reportStats","Error sending stats: "+n)}})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+a.stringify(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):C("Unrecognized action received from server: "+a.stringify(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;a.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Je,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Je,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Je),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,r=this,s=this.lastSessionId,l=!1,u=null,c=function(){u?u.close():(l=!0,i())};this.realtime_={close:c,sendRequest:function(t){a.assert(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)}};var h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(h).then(function(e){l?E("getToken() completed but was canceled"):(E("getToken() completed. Creating connection."),r.authToken_=e&&e.accessToken,u=new Ye(o,r.repoInfo_,t,n,i,function(t){T(t+" ("+r.repoInfo_.toString()+")"),r.interrupt("server_kill")},s))}).then(null,function(t){r.log_("Failed to get token: "+t),l||(a.CONSTANTS.NODE_ADMIN&&T(t),c())})}},e.prototype.interrupt=function(t){E("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){E("Resuming connection for reason: "+t),delete this.interruptReasons_[t],a.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=Je,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return N(t)}).join("$"):"default";var i=this.removeListen_(t,n);i&&i.onComplete&&i.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,i=new W(t).toString();return void 0!==this.listens_[i]?(n=this.listens_[i][e],delete this.listens_[i][e],0===a.getCount(this.listens_[i])&&delete this.listens_[i]):n=void 0,n},e.prototype.onAuthRevoked_=function(t,e){E("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t=this;this.tryAuth(),a.forEach(this.listens_,function(e,n){a.forEach(n,function(e,n){t.sendListen_(n)})});for(var e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){var n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}},e.prototype.sendConnectStats_=function(){var t={},e="js";a.CONSTANTS.NODE_ADMIN?e="admin_node":a.CONSTANTS.NODE_CLIENT&&(e="node"),t["sdk."+e+"."+u.SDK_VERSION.replace(/\./g,"-")]=1,a.isMobileCordova()?t["framework.cordova"]=1:a.isReactNative()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=Ue.getInstance().currentlyOnline();return a.isEmpty(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(Xe),en=function(t){function e(e,n,i){var o=t.call(this)||this;return o.repoInfo_=e,o.onDataUpdate_=n,o.authTokenProvider_=i,o.log_=S("p:rest:"),o.listens_={},o}return l.__extends(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(a.assert(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,i,o){var r=this,s=t.path.toString();this.log_("Listen called for "+s+" "+t.queryIdentifier());var l=e.getListenId_(t,i),u={};this.listens_[l]=u;var c=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(s+".json",c,function(t,e){var n=e;(404===t&&(n=null,t=null),null===t&&r.onDataUpdate_(s,n,!1,i),a.safeGet(r.listens_,l)===u)&&o(t?401==t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var i=e.getListenId_(t,n);delete this.listens_[i]},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var i=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(o){var r=o&&o.accessToken;r&&(e.auth=r);var s=(i.repoInfo_.secure?"https://":"http://")+i.repoInfo_.host+t+"?"+a.querystring(e);i.log_("Sending REST request for "+s);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(n&&4===l.readyState){i.log_("REST Response for "+s+" received. status:",l.status,"response:",l.responseText);var t=null;if(l.status>=200&&l.status<300){try{t=a.jsonEval(l.responseText)}catch(t){T("Failed to parse JSON response for "+s+": "+l.responseText)}n(null,t)}else 401!==l.status&&404!==l.status&&T("Got unsuccessful REST response for "+s+" Status: "+l.status),n(l.status);n=null}},l.open("GET",s,!0),l.send()})},e}(Xe),nn=function(){function t(t,e,n){var i=this;this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Fe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new ee,this.persistentConnection_=null;var o=new Le(n);if(this.stats_=Oe.getCollection(t),e||z())this.server_=new en(this.repoInfo_,this.onDataUpdate_.bind(this),o),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var r=n.options.databaseAuthVariableOverride;if(null!=r){if("object"!=typeof r)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{a.stringify(r)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new tn(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),o,r),this.server_=this.persistentConnection_}o.addTokenChangeListener(function(t){i.server_.refreshAuthToken(t)}),this.statsReporter_=Oe.getOrCreateReporter(t,function(){return new Me(i.stats_,i.server_)}),this.transactions_init_(),this.infoData_=new Pe,this.infoSyncTree_=new Ie({startListening:function(t,e,n,o){var r=[],a=i.infoData_.getNode(t.path);return a.isEmpty()||(r=i.infoSyncTree_.applyServerOverwrite(t.path,a),setTimeout(function(){o("ok")},0)),r},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Ie({startListening:function(t,e,n,o){return i.server_.listen(t,n,e,function(e,n){var r=o(e,n);i.eventQueue_.raiseEventsForChangedPath(t.path,r)}),[]},stopListening:function(t,e){i.server_.unlisten(t,e)}})}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new W(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,i){this.dataUpdateCount++;var o=new W(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var r=[];if(i)if(n){var s=a.map(e,function(t){return Vt(t)});r=this.serverSyncTree_.applyTaggedQueryMerge(o,s,i)}else{var l=Vt(e);r=this.serverSyncTree_.applyTaggedQueryOverwrite(o,l,i)}else if(n){var u=a.map(e,function(t){return Vt(t)});r=this.serverSyncTree_.applyServerMerge(o,u)}else{var c=Vt(e);r=this.serverSyncTree_.applyServerOverwrite(o,c)}var h=o;r.length>0&&(h=this.rerunTransactions_(o)),this.eventQueue_.raiseEventsForChangedPath(h,r)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;D(t,function(t,n){e.updateInfo_(n,t)})},t.prototype.updateInfo_=function(t,e){var n=new W("/.info/"+t),i=Vt(e);this.infoData_.updateSnapshot(n,i);var o=this.infoSyncTree_.applyServerOverwrite(n,i);this.eventQueue_.raiseEventsForChangedPath(n,o)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.setWithPriority=function(t,e,n,i){var o=this;this.log_("set",{path:t.toString(),value:e,priority:n});var r=this.generateServerValues(),a=Vt(e,n),s=ie(a,r),l=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserOverwrite(t,s,l,!0);this.eventQueue_.queueEvents(u),this.server_.put(t.toString(),a.val(!0),function(e,n){var r="ok"===e;r||T("set at "+t+" failed: "+e);var a=o.serverSyncTree_.ackUserWrite(l,!r);o.eventQueue_.raiseEventsForChangedPath(t,a),o.callOnCompleteCallback(i,e,n)});var c=this.abortTransactions_(t);this.rerunTransactions_(c),this.eventQueue_.raiseEventsForChangedPath(c,[])},t.prototype.update=function(t,e,n){var i=this;this.log_("update",{path:t.toString(),value:e});var o=!0,r=this.generateServerValues(),s={};if(a.forEach(e,function(t,e){o=!1;var n=Vt(e);s[t]=ie(n,r)}),o)E("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var l=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,s,l);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,function(e,o){var r="ok"===e;r||T("update at "+t+" failed: "+e);var a=i.serverSyncTree_.ackUserWrite(l,!r),s=a.length>0?i.rerunTransactions_(t):t;i.eventQueue_.raiseEventsForChangedPath(s,a),i.callOnCompleteCallback(n,e,o)}),a.forEach(e,function(e){var n=i.abortTransactions_(t.child(e));i.rerunTransactions_(n)}),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=function(t,e){var n=new ee;return t.forEachTree(new W(""),function(t,i){n.remember(t,ie(i,e))}),n}(this.onDisconnect_,e),i=[];n.forEachTree(W.Empty,function(e,n){i=i.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var o=t.abortTransactions_(e);t.rerunTransactions_(o)}),this.onDisconnect_=new ee,this.eventQueue_.raiseEventsForChangedPath(W.Empty,i)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),function(i,o){"ok"===i&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,i,o)})},t.prototype.onDisconnectSet=function(t,e,n){var i=this,o=Vt(e);this.server_.onDisconnectPut(t.toString(),o.val(!0),function(e,r){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(n,e,r)})},t.prototype.onDisconnectSetWithPriority=function(t,e,n,i){var o=this,r=Vt(e,n);this.server_.onDisconnectPut(t.toString(),r.val(!0),function(e,n){"ok"===e&&o.onDisconnect_.remember(t,r),o.callOnCompleteCallback(i,e,n)})},t.prototype.onDisconnectUpdate=function(t,e,n){var i=this;if(a.isEmpty(e))return E("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,function(o,r){"ok"===o&&a.forEach(e,function(e,n){var o=Vt(n);i.onDisconnect_.remember(t.child(e),o)}),i.callOnCompleteCallback(n,o,r)})},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new Ne(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0);a.forEach(e,function(t,e){for(var i=t.length;i<n+2;i++)t+=" ";console.log(t+e)})}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),E.apply(void 0,[n].concat(t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&B(function(){if("ok"==e)t(null);else{var i=(e||"error").toUpperCase(),o=i;n&&(o+=": "+n);var r=new Error(o);r.code=i,t(r)}})},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new fn(this))},enumerable:!0,configurable:!0}),t}(),on=function(){function t(e){this.indexedFilter_=new ve(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,i,o,r){return this.matches(new vt(e,n))||(n=zt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,i,o,r)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=zt.EMPTY_NODE);var i=e.withIndex(this.index_);i=i.updatePriority(zt.EMPTY_NODE);var o=this;return e.forEachChild(It,function(t,e){o.matches(new vt(t,e))||(i=i.updateImmediateChild(t,zt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),rn=function(){function t(t){this.rangedFilter_=new on(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,i,o,r){return this.rangedFilter_.matches(new vt(e,n))||(n=zt.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,i,o,r):this.fullLimitUpdateChild_(t,e,n,o,r)},t.prototype.updateFullNode=function(t,e,n){var i;if(e.isLeafNode()||e.isEmpty())i=zt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){i=zt.EMPTY_NODE.withIndex(this.index_);var o=void 0;o=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var r=0;o.hasNext()&&r<this.limit_;){var a=o.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;i=i.updateImmediateChild(a.name,a.node),r++}}else{i=(i=e.withIndex(this.index_)).updatePriority(zt.EMPTY_NODE);var s=void 0,l=void 0,u=void 0;o=void 0;if(this.reverse_){o=i.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();var c=this.index_.getCompare();u=function(t,e){return c(e,t)}}else o=i.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),u=this.index_.getCompare();r=0;for(var h=!1;o.hasNext();){a=o.getNext();!h&&u(s,a)<=0&&(h=!0),h&&r<this.limit_&&u(a,l)<=0?r++:i=i.updateImmediateChild(a.name,zt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,i,o){var r;if(this.reverse_){var s=this.index_.getCompare();r=function(t,e){return s(e,t)}}else r=this.index_.getCompare();var l=t;a.assert(l.numChildren()==this.limit_,"");var u=new vt(e,n),c=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(l.hasChild(e)){for(var d=l.getImmediateChild(e),f=i.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name==e||l.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:r(f,u);if(h&&!n.isEmpty()&&p>=0)return null!=o&&o.trackChildChange(me.childChangedChange(e,n,d)),l.updateImmediateChild(e,n);null!=o&&o.trackChildChange(me.childRemovedChange(e,d));var m=l.updateImmediateChild(e,zt.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=o&&o.trackChildChange(me.childAddedChange(f.name,f.node)),m.updateImmediateChild(f.name,f.node)):m}return n.isEmpty()?t:h&&r(c,u)>=0?(null!=o&&(o.trackChildChange(me.childRemovedChange(c.name,c.node)),o.trackChildChange(me.childAddedChange(e,n))),l.updateImmediateChild(e,n).updateImmediateChild(c.name,zt.EMPTY_NODE)):t},t}(),an=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=It}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return a.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return a.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:I},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return a.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return a.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:P},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return a.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var i=this.viewFrom_;""===i&&(i=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=i}return this.index_!==It&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_==It},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new ve(this.getIndex()):this.hasLimit()?new rn(this):new on(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,i={};return this.isDefault()?i:(this.index_===It?e=n.PRIORITY_INDEX:this.index_===Zt?e=n.VALUE_INDEX:this.index_===yt?e=n.KEY_INDEX:(a.assert(this.index_ instanceof Kt,"Unrecognized index type!"),e=this.index_.toString()),i[n.ORDER_BY]=a.stringify(e),this.startSet_&&(i[n.START_AT]=a.stringify(this.indexStartValue_),this.startNameSet_&&(i[n.START_AT]+=","+a.stringify(this.indexStartName_))),this.endSet_&&(i[n.END_AT]=a.stringify(this.indexEndValue_),this.endNameSet_&&(i[n.END_AT]+=","+a.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?i[n.LIMIT_TO_FIRST]=this.limit_:i[n.LIMIT_TO_LAST]=this.limit_),i)},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),sn=function(t){function e(e,n){if(!(e instanceof nn))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,an.DEFAULT,!1)||this}return l.__extends(e,t),e.prototype.getKey=function(){return a.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return a.validateArgCount("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof W||(null===this.path.getFront()?function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ct(t,e,n,i)}("Reference.child",1,t,!1):ct("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){a.validateArgCount("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){a.validateArgCount("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){a.validateArgCount("Reference.set",1,2,arguments.length),ht("Reference.set",this.path),ot("Reference.set",1,t,this.path,!1),a.validateCallback("Reference.set",2,e,!0);var n=new a.Deferred;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(a.validateArgCount("Reference.update",1,2,arguments.length),ht("Reference.update",this.path),Array.isArray(t)){for(var n={},i=0;i<t.length;++i)n[""+i]=t[i];t=n,T("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}at("Reference.update",1,t,this.path,!1),a.validateCallback("Reference.update",2,e,!0);var o=new a.Deferred;return this.repo.update(this.path,t,o.wrapCallback(e)),o.promise},e.prototype.setWithPriority=function(t,e,n){if(a.validateArgCount("Reference.setWithPriority",2,3,arguments.length),ht("Reference.setWithPriority",this.path),ot("Reference.setWithPriority",1,t,this.path,!1),st("Reference.setWithPriority",2,e,!1),a.validateCallback("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var i=new a.Deferred;return this.repo.setWithPriority(this.path,t,e,i.wrapCallback(n)),i.promise},e.prototype.remove=function(t){return a.validateArgCount("Reference.remove",0,1,arguments.length),ht("Reference.remove",this.path),a.validateCallback("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(a.validateArgCount("Reference.transaction",1,3,arguments.length),ht("Reference.transaction",this.path),a.validateCallback("Reference.transaction",1,t,!1),a.validateCallback("Reference.transaction",2,e,!0),function(t,e,n,i){if((!i||void 0!==n)&&"boolean"!=typeof n)throw new Error(a.errorPrefix(t,e,i)+"must be a boolean.")}("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var i=new a.Deferred;"function"==typeof e&&i.promise.catch(function(){});return this.repo.startTransaction(this.path,t,function(t,n,o){t?i.reject(t):i.resolve(new pt(n,o)),"function"==typeof e&&e(t,n,o)},n),i.promise},e.prototype.setPriority=function(t,e){a.validateArgCount("Reference.setPriority",1,2,arguments.length),ht("Reference.setPriority",this.path),st("Reference.setPriority",1,t,!1),a.validateCallback("Reference.setPriority",2,e,!0);var n=new a.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){a.validateArgCount("Reference.push",0,2,arguments.length),ht("Reference.push",this.path),ot("Reference.push",1,t,this.path,!0),a.validateCallback("Reference.push",2,e,!0);var n,i=this.repo.serverTime(),o=mt(i),r=this.child(o),s=this.child(o);return n=null!=t?r.set(t,e).then(function(){return s}):Promise.resolve(s),r.then=n.then.bind(n),r.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),r},e.prototype.onDisconnect=function(){return ht("Reference.onDisconnect",this.path),new ft(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),e}($t);$t.__referenceConstructor=sn,Ce.__referenceConstructor=sn;var ln,un=function(){return function(){this.children={},this.childCount=0,this.value=null}}(),cn=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new un),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n,i=e instanceof W?e:new W(e),o=this;null!==(n=i.getFront());){o=new t(n,o,a.safeGet(o.node_.children,n)||new un),i=i.popFront()}return o},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){a.assert(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;a.forEach(this.node_.children,function(i,o){e(new t(i,n,o))})},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild(function(e){e.forEachDescendant(t,!0,n)}),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild(function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)})},t.prototype.path=function(){return new W(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),i=a.contains(this.node_.children,t);n&&i?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||i||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}();!function(t){t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT"}(ln||(ln={})),nn.MAX_TRANSACTION_RETRIES_=25,nn.prototype.transactions_init_=function(){this.transactionQueueTree_=new cn},nn.prototype.startTransaction=function(t,e,n,i){this.log_("transaction on "+t);var o=function(){},r=new sn(this,t);r.on("value",o);var s={path:t,update:e,onComplete:n,status:null,order:v(),applyLocally:i,retryCount:0,unwatcher:function(){r.off("value",o)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=this.getLatestState_(t);s.currentInputSnapshot=l;var u=s.update(l.val());if(void 0===u){if(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete){var c=new Gt(s.currentInputSnapshot,new sn(this,s.path),It);s.onComplete(null,!1,c)}}else{rt("transaction failed: Data returned ",u,s.path),s.status=ln.RUN;var h=this.transactionQueueTree_.subTree(t),d=h.getValue()||[];d.push(s),h.setValue(d);var f=void 0;if("object"==typeof u&&null!==u&&a.contains(u,".priority"))f=a.safeGet(u,".priority"),a.assert(it(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else f=(this.serverSyncTree_.calcCompleteEventCache(t)||zt.EMPTY_NODE).getPriority().val();f=f;var p=this.generateServerValues(),m=Vt(u,f),g=ie(m,p);s.currentOutputSnapshotRaw=m,s.currentOutputSnapshotResolved=g,s.currentWriteId=this.getNextWriteId_();var _=this.serverSyncTree_.applyUserOverwrite(t,g,s.currentWriteId,s.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,_),this.sendReadyTransactions_()}},nn.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||zt.EMPTY_NODE},nn.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);a.assert(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return t.status===ln.RUN})&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(t){e.sendReadyTransactions_(t)})},nn.prototype.sendTransactionQueue_=function(t,e){for(var n=this,i=e.map(function(t){return t.currentWriteId}),o=this.getLatestState_(t,i),r=o,s=o.hash(),l=0;l<e.length;l++){var u=e[l];a.assert(u.status===ln.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=ln.SENT,u.retryCount++;var c=W.relativePath(t,u.path);r=r.updateChild(c,u.currentOutputSnapshotRaw)}var h=r.val(!0),d=t;this.server_.put(d.toString(),h,function(i){n.log_("transaction put response",{path:d.toString(),status:i});var o=[];if("ok"===i){for(var r=[],a=0;a<e.length;a++){if(e[a].status=ln.COMPLETED,o=o.concat(n.serverSyncTree_.ackUserWrite(e[a].currentWriteId)),e[a].onComplete){var s=e[a].currentOutputSnapshotResolved,l=new sn(n,e[a].path),u=new Gt(s,l,It);r.push(e[a].onComplete.bind(null,null,!0,u))}e[a].unwatcher()}n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,o);for(a=0;a<r.length;a++)B(r[a])}else{if("datastale"===i)for(a=0;a<e.length;a++)e[a].status===ln.SENT_NEEDS_ABORT?e[a].status=ln.NEEDS_ABORT:e[a].status=ln.RUN;else{T("transaction at "+d.toString()+" failed: "+i);for(a=0;a<e.length;a++)e[a].status=ln.NEEDS_ABORT,e[a].abortReason=i}n.rerunTransactions_(t)}},s)},nn.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),i=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(i,n),n},nn.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n,i=[],o=[],r=t.filter(function(t){return t.status===ln.RUN}).map(function(t){return t.currentWriteId}),s=0;s<t.length;s++){var l=t[s],u=W.relativePath(e,l.path),c=!1,h=void 0;if(a.assert(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===ln.NEEDS_ABORT)c=!0,h=l.abortReason,o=o.concat(this.serverSyncTree_.ackUserWrite(l.currentWriteId,!0));else if(l.status===ln.RUN)if(l.retryCount>=nn.MAX_TRANSACTION_RETRIES_)c=!0,h="maxretry",o=o.concat(this.serverSyncTree_.ackUserWrite(l.currentWriteId,!0));else{var d=this.getLatestState_(l.path,r);l.currentInputSnapshot=d;var f=t[s].update(d.val());if(void 0!==f){rt("transaction failed: Data returned ",f,l.path);var p=Vt(f);"object"==typeof f&&null!=f&&a.contains(f,".priority")||(p=p.updatePriority(d.getPriority()));var m=l.currentWriteId,v=this.generateServerValues(),g=ie(p,v);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=g,l.currentWriteId=this.getNextWriteId_(),r.splice(r.indexOf(m),1),o=(o=o.concat(this.serverSyncTree_.applyUserOverwrite(l.path,g,l.currentWriteId,l.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(m,!0))}else c=!0,h="nodata",o=o.concat(this.serverSyncTree_.ackUserWrite(l.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,o),o=[],c&&(t[s].status=ln.COMPLETED,n=t[s].unwatcher,setTimeout(n,Math.floor(0)),t[s].onComplete))if("nodata"===h){var _=new sn(this,t[s].path),y=t[s].currentInputSnapshot,b=new Gt(y,_,It);i.push(t[s].onComplete.bind(null,null,!1,b))}else i.push(t[s].onComplete.bind(null,new Error(h),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(s=0;s<i.length;s++)B(i[s]);this.sendReadyTransactions_()}},nn.prototype.getAncestorTransactionNode_=function(t){for(var e,n=this.transactionQueueTree_;null!==(e=t.getFront())&&null===n.getValue();)n=n.subTree(e),t=t.popFront();return n},nn.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},nn.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,i=t.getValue();if(null!==i)for(var o=0;o<i.length;o++)e.push(i[o]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},nn.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var i=0,o=0;o<n.length;o++)n[o].status!==ln.COMPLETED&&(n[i]=n[o],i++);n.length=i,t.setValue(n.length>0?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},nn.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),i=this.transactionQueueTree_.subTree(t);return i.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(i),i.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},nn.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],i=[],o=-1,r=0;r<e.length;r++)if(e[r].status===ln.SENT_NEEDS_ABORT);else if(e[r].status===ln.SENT)a.assert(o===r-1,"All SENT items should be at beginning of queue."),o=r,e[r].status=ln.SENT_NEEDS_ABORT,e[r].abortReason="set";else if(a.assert(e[r].status===ln.RUN,"Unexpected transaction status in abort"),e[r].unwatcher(),i=i.concat(this.serverSyncTree_.ackUserWrite(e[r].currentWriteId,!0)),e[r].onComplete){n.push(e[r].onComplete.bind(null,new Error("set"),!1,null))}-1===o?t.setValue(null):e.length=o+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),i);for(r=0;r<n.length;r++)B(n[r])}};var hn,dn=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return hn||(hn=new t),hn},t.prototype.interrupt=function(){for(var t in this.repos_)for(var e in this.repos_[t])this.repos_[t][e].interrupt()},t.prototype.resume=function(){for(var t in this.repos_)for(var e in this.repos_[t])this.repos_[t][e].resume()},t.prototype.databaseFromApp=function(t,e){var n=e||t.options.databaseURL;void 0===n&&x("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.initializeApp().");var i=X(n),o=i.repoInfo;return dt("Invalid Firebase Database URL",1,i),i.path.isEmpty()||x("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(o,t).database},t.prototype.deleteRepo=function(t){var e=a.safeGet(this.repos_,t.app.name);e&&a.safeGet(e,t.repoInfo_.toURLString())===t||x("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},t.prototype.createRepo=function(t,e){var n=a.safeGet(this.repos_,e.name);n||(n={},this.repos_[e.name]=n);var i=a.safeGet(n,t.toURLString());return i&&x("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new nn(t,this.useRestClient_,e),n[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),fn=function(){function t(t){this.repo_=t,t instanceof nn||x("Don't call new Database() directly - please use firebase.database()."),this.root_=new sn(t,W.Empty),this.INTERNAL=new pn(this)}return Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),t.prototype.ref=function(t){return this.checkDeleted_("ref"),a.validateArgCount("database.ref",0,1,arguments.length),t instanceof sn?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),a.validateArgCount(e,1,1,arguments.length);var n=X(t);dt(e,1,n);var i=n.repoInfo;return i.host!==this.repo_.repoInfo_.host&&x(e+": Host name does not match the current database: (found "+i.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repo_&&x("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){a.validateArgCount("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){a.validateArgCount("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"}},t}(),pn=function(){function t(t){this.database=t}return t.prototype.delete=function(){return l.__awaiter(this,void 0,void 0,function(){return l.__generator(this,function(t){return this.database.checkDeleted_("delete"),dn.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},t}(),mn=Object.freeze({forceLongPolling:function(){Ge.forceDisallow(),qe.forceAllow()},forceWebSockets:function(){qe.forceDisallow()},isWebSocketsAvailable:function(){return Ge.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)}}),vn=tn;tn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},tn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var gn=Ye,_n=q,yn=Object.freeze({DataConnection:vn,RealTimeConnection:gn,hijackHash:function(t){var e=tn.prototype.put;return tn.prototype.put=function(n,i,o,r){void 0!==r&&(r=t()),e.call(this,n,i,o,r)},function(){tn.prototype.put=e}},ConnectionTarget:_n,queryIdentifier:function(t){return t.queryIdentifier()},listens:function(t){return t.repo.persistentConnection_.listens_},forceRestClient:function(t){dn.getInstance().forceRestClient(t)}}),bn=fn.ServerValue;function wn(e){var n=e.INTERNAL.registerService("database",function(t,e,n){return dn.getInstance().databaseFromApp(t,n)},{Reference:sn,Query:$t,Database:fn,enableLogging:w,INTERNAL:mn,ServerValue:bn,TEST_ACCESS:yn},null,!0);a.isNodeSdk()&&(t.exports=n)}wn(u),e.registerDatabase=wn,e.Database=fn,e.Query=$t,e.Reference=sn,e.enableLogging=w,e.ServerValue=bn,e.DataSnapshot=Gt,e.OnDisconnect=ft}).call(this,n(5))},function(t,e,n){"use strict";n.r(e),n.d(e,"setLogLevel",function(){return l}),n.d(e,"Logger",function(){return s}),n.d(e,"LogLevel",function(){return i});var i,o=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(i||(i={}));var r=i.INFO,a=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(!(e<t.logLevel)){var r=(new Date).toISOString();switch(e){case i.DEBUG:case i.VERBOSE:console.log.apply(console,["["+r+"]  "+t.name+":"].concat(n));break;case i.INFO:console.info.apply(console,["["+r+"]  "+t.name+":"].concat(n));break;case i.WARN:console.warn.apply(console,["["+r+"]  "+t.name+":"].concat(n));break;case i.ERROR:console.error.apply(console,["["+r+"]  "+t.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}},s=function(){function t(t){this.name=t,this._logLevel=r,this._logHandler=a,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in i))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.DEBUG].concat(t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.VERBOSE].concat(t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.INFO].concat(t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.WARN].concat(t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.ERROR].concat(t))},t}();function l(t){o.forEach(function(e){e.logLevel=t})}},function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",function(){return o}),n.d(e,"__assign",function(){return r}),n.d(e,"__rest",function(){return a}),n.d(e,"__decorate",function(){return s}),n.d(e,"__param",function(){return l}),n.d(e,"__metadata",function(){return u}),n.d(e,"__awaiter",function(){return c}),n.d(e,"__generator",function(){return h}),n.d(e,"__exportStar",function(){return d}),n.d(e,"__values",function(){return f}),n.d(e,"__read",function(){return p}),n.d(e,"__spread",function(){return m}),n.d(e,"__await",function(){return v}),n.d(e,"__asyncGenerator",function(){return g}),n.d(e,"__asyncDelegator",function(){return _}),n.d(e,"__asyncValues",function(){return y}),n.d(e,"__makeTemplateObject",function(){return b}),n.d(e,"__importStar",function(){return w}),n.d(e,"__importDefault",function(){return E});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function o(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var r=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};function a(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&(n[i[o]]=t[i[o]])}return n}function s(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a}function l(t,e){return function(n,i){e(n,i,t)}}function u(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t,e,n,i){return new(n||(n=Promise))(function(o,r){function a(t){try{l(i.next(t))}catch(t){r(t)}}function s(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}l((i=i.apply(t,e||[])).next())})}function h(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}function d(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function f(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function p(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(t){o={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function m(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}function v(t){return this instanceof v?(this.v=t,this):new v(t)}function g(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,o=n.apply(t,e||[]),r=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(t){o[t]&&(i[t]=function(e){return new Promise(function(n,i){r.push([t,e,n,i])>1||s(t,e)})})}function s(t,e){try{(n=o[t](e)).value instanceof v?Promise.resolve(n.value.v).then(l,u):c(r[0][2],n)}catch(t){c(r[0][3],t)}var n}function l(t){s("next",t)}function u(t){s("throw",t)}function c(t,e){t(e),r.shift(),r.length&&s(r[0][0],r[0][1])}}function _(t){var e,n;return e={},i("next"),i("throw",function(t){throw t}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(i,o){t[i]&&(e[i]=function(e){return(n=!n)?{value:v(t[i](e)),done:"return"===i}:o?o(e):e})}}function y(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator];return e?e.call(t):f(t)}function b(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function w(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function E(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";n.r(e);var i=n(1),o=n.n(i),r=n(2),a=(n(12),n(26),n(29),n(30),n(35),n(4)),s=n.n(a),l={getItem:function(t){return s.a.getItem(t)},saveTiles:function(t){var e=this;this._hideControls();for(var n=[],i=0;i<t.length;i++){!function(t,i){n[t]=new Promise(function(t,n){var o=new XMLHttpRequest;o.open("GET",i.url,!0),o.responseType="blob",o.onreadystatechange=function(){o.readyState===XMLHttpRequest.DONE&&(200===o.status?t(e._saveTile(i.key,o.response)):n({status:o.status,statusText:o.statusText}))},o.send()})}(i,t[i])}return Promise.all(n)},clear:function(){return this._hideControls(),s.a.clear()},_saveTile:function(t,e){return this._removeItem(t).then(function(){return s.a.setItem(t,e)})},_removeItem:function(t){return s.a.removeItem(t)},_hideControls:function(){document.querySelectorAll(".leaflet-control-offline").forEach(function(t){t.style.display="none"})}},u=(n(38),n(39),function(){var t=document.getElementById("emailInput"),e=document.getElementById("passwordInput"),n=document.getElementById("Login-status-message"),i=document.getElementById("login-btn"),o=document.getElementById("logout-btn"),a=document.getElementById("login-form"),s=r.auth;function l(){n.innerHTML="you are now signed in!",e.innerHTML=null,i.style.display="none",o.style.display="block",a.style.display="none"}function u(){n.innerHTML="Bye  - you have now signed out",i.style.display="block",o.style.display="none",a.style.display="block"}return{btnLogin:function(){s().signInWithEmailAndPassword(t.value,e.value).then(function(t){console.log(t,"signed in!"),l()}).catch(function(t){console.log("sorry couldn't sign in -  Error: "+t),alert("sorry couldn't sign in -  Error: "+t)})},btnLogout:function(){r.auth().signOut().then(function(){console.log("successfully signed out"),u()},function(t){console.log("problem signing out - error: ",t)})},testFunc:function(){return console.log("testing only!"),"hello"},initLoginForm:function(){console.log("initLoginForm"),r.auth().currentUser?(l(),console.log("user is logged in")):(console.log("user is logged out"),u())}}});function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.d(e,"App",function(){return d}),n(36),n(37);var h={setupBaseLayer:function(){this.greyscaleLayer=o.a.tileLayer.offline(d.State.settings.mbUrl,l,{id:"mapbox.light",attribution:d.State.settings.mbAttr,maxZoom:26,maxNativeZoom:18}),this.streetsLayer=o.a.tileLayer.offline(d.State.settings.mbUrl,l,{id:"mapbox.streets",attribution:d.State.settings.mbAttr,maxZoom:26,maxNativeZoom:18}),this.streetsLayer.on("offline:save-end",function(){alert("All the tiles were saved.")}),this.satLayer=o.a.tileLayer.offline(d.State.settings.mbUrl,l,{id:"mapbox.satellite",attribution:d.State.settings.mbAttr,maxZoom:26,minZoom:14}),this.myLayerGroup=o.a.layerGroup();var t=o.a.map("map",{center:d.State.settings.map.defaultCenter,zoom:d.State.settings.map.defaultZoom,maxZoom:d.State.settings.map.maxZoom,minZoom:d.State.settings.map.minZoom,zoomDelta:d.State.settings.map.zoomDelta,layers:[this.streetsLayer,this.myLayerGroup]}),e={Greyscale:this.greyscaleLayer,Streets:this.streetsLayer,Satellite:this.satLayer};return this.overlayMaps={myLayers:this.myLayerGroup},this.LayersControl=o.a.control.layers(e).addTo(t),t}},d={State:{version:{number:"0.9.118",date:"10 May 2019"},settings:{map:{defaultCenter:[51.4384332,-.3147865],defaultZoom:18,maxZoom:26,minZoom:12,zoomDelta:2},symbology:{taskCompleteStyle:{fillColor:"grey",color:"black",weight:1},pointTaskNotCompleteStyle:{fillColor:"yellow",color:"red"},lineTaskNotCompleteStyle:{fillColor:"yellow",color:"red",weight:12},polyTaskNotCompleteStyle:{fillColor:"yellow",color:"red",weight:1}},mbAttr:'<a href="http://openstreetmap.org">OSMap</a> <a href="http://mapbox.com">Mapbox</a>',mbUrl:"https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiZGFuc2ltbW9ucyIsImEiOiJjamRsc2NieTEwYmxnMnhsN3J5a3FoZ3F1In0.m0ct-AGSmSX2zaCMbXl0-w",uploadjsonURL:"https://geo.danieljsimmons.uk/dan1/upload/uploadjson.php",editform:{assetConditionOptions:[6,5,4,3,2,1,"n/a"]}},projectsOb:{},projectConfig:{projectHash:"",mapHash:null,projectName:"",projectDescription:"",completedResetDate:null},relatedData:{},relatedDataMapHash:null,Markers:{},featureIdLookup:{},latestLocation:null,currentLineAddPointLat:null,currentLineAddPointLng:null,relDataSyncStatus:{},symbology:{uncompletedColor:"red",uncompletedfillColor:"red",uncompletedLineWeight:8,completedLineWeight:4,uncompletedRadius:8,completedColor:"grey",completedFillColor:"grey",completedRadius:2},visableFeatures:[],formFields:{condition:{null:"",c1:"(1 - hazard)",c2:"2 - (unfit for purpose)",c3:"3",c4:"4",c5:"5",c6:"6 - (as new)",rm:"removed / not found",nv:"not visable",pv:"partially visable"}},AddPointButtonsPoints:[{label:"Hazard",id:"hazard"},{label:"Unmapped asset",id:"unmappedAsset"},{label:"general comment",id:"comment"}],AddPointButtonsLines:[{label:"Hazard",id:"hazard"},{label:"Unmapped asset",id:"unmappedAsset"},{label:"General comment",id:"comment"},{label:"Breach in barrier",id:"breach"}]},populateInputOptions:function(t,e){Object.keys(e).forEach(function(n){var i=document.createElement("option");i.value=n,i.text=e[n],t.add(i)})},initInfoWindowButton:function(){o.a.Control.infoWindowButton=o.a.Control.extend({onAdd:function(t){var e=o.a.DomUtil.create("button","info-window-button btn-primary");return e.innerHTML="<b><i>i</i></b>",e.onclick=function(){d.openInfoPanel()},e}}),o.a.control.infoWindowButton=function(t){return new o.a.Control.infoWindowButton(t)},o.a.control.infoWindowButton({position:"bottomright"}).addTo(g)},openInfoPanel:function(){var t="<h3>Project info </h3> <p>\n    Name: ".concat(d.State.projectConfig.projectName,"<br>\n    Description: ").concat(d.State.projectConfig.projectDescription,"<br>\n    ResetDate: ").concat(d.State.projectConfig.completedResetDate,"<p>\n    "),e=" <h3> Map info </h3><p>\n    map name: ".concat(d.State.projectConfig.mapName,"\n    </p>\n    "),n="<h3>App info</h3>\n    <p>\n    Software version number: ".concat(d.State.version.number," <br>\n    Software version date: ").concat(d.State.version.date,"\n    </p>\n    ");d.sidebar.setContent("".concat(e,"<hr>").concat(t,"<hr>").concat(n)),d.sidebar.show()},updateRelDataSyncMsg:function(t,e){if(null!=e){var n="";null==t?n="":1==t?n="successful sync":0==t&&(n="Data not yet synced - please connect to network before closing this App"),e.innerHTML=n,e.style="color:'CornflowerBlue' "}},whenGeoFeatureClicked:function(){var t=d.featureToKey(d.selectedFeature);var e=d.selectedFeature.properties;d.sidebar.setContent(document.getElementById("form-template").innerHTML),document.getElementById("relatedform-title").innerHTML="Asset: ".concat(e.Asset),this.generateFeatureEditFormElements(e,document.getElementById("fields-section")),e.photo&&this.getPhoto(e.photo),d.updateRelDataSyncMsg(d.State.relDataSyncStatus[t],document.getElementById("rel-data-sync-message")),d.updateSidebarRelatedFromState(t,document.getElementById("latest-related"),d.State.relatedData),d.populateInputOptions(document.getElementById("related-data-condition"),d.State.formFields.condition),d.sidebar.show()},generateFeatureEditFormElements:function(t,e){e.innerHTML=null;var n=function(t,e,n,i,o){var r,a=(r=document.createElement("tr"),t.appendChild(r),r);!function(t){var e=document.createElement("td");e.innerHTML=i,t.appendChild(e)}(a),function(t){var e=document.createElement("td");e.innerHTML=o,t.appendChild(e),"Checkbox"===n&&(e.checked=o),t.appendChild(e)}(a)};Object.keys(t).forEach(function(i){var o=c(t[i]);"string"===o||"number"===o?n(e,0,"text",i,t[i]):"boolean"===o&&n(e,0,"Checkbox",i,t[i])})},resetMap:function(){localStorage.removeItem("geoJSON"),d.geoLayer={}},getPhoto:function(t){fetch(t).then(function(t){return t.blob()}).then(function(t){var e=URL.createObjectURL(t),n=new Image(350);n.src=e,n.css="width:500px",document.getElementById("photo-div").appendChild(n)})},initSettingsControl:function(){o.a.Control.myControl=o.a.Control.extend({onAdd:function(t){var e=o.a.DomUtil.create("button","main-button-control btn btn-lg btn-danger icon-cog");return e.innerHTML="",e.title="Settings",e.onclick=function(){d.sidebar.setContent(document.getElementById("settings-template").innerHTML),u().initLoginForm(),d.geoLayer&&d.populateMapMeta(),document.getElementById("open-new-project-button").addEventListener("click",function(){p("dummy")}),d.sidebar.show()},e}}),o.a.control.myControl=function(t){return new o.a.Control.myControl(t)},o.a.control.myControl({position:"bottomleft"}).addTo(g)},populateMapMeta:function(){var t=document.getElementById("map-info-section"),e="";for(var n in d.mapMeta)n&&(e+="".concat(n,": ").concat(d.mapMeta[n],"<br>"));t.innerHTML=e},busyWorkingIndicator:function(t){var e=document.getElementsByClassName("icon-cog")[0];t?e.classList.add("icon-cog-spin"):e.classList.remove("icon-cog-spin")},addMarkerToMarkersLayer:function(t,e,n){o.a.marker([t,e]).bindPopup(n).addTo(d.MarkersLayer)},generatePopupPropSet:function(t){return Object.keys(t.properties).map(function(e){return"".concat(e,": ").concat(t.properties[e])}).join("<br>")},setupMarkersLayer:function(){d.MarkersLayer=new o.a.layerGroup,d.MarkersLayer.addTo(g)},removeMarkersLayerMarkers:function(){d.MarkersLayer&&d.MarkersLayer.clearLayers()},retrieveMapFromFireBase:function(t,e){var n="/App/Maps/".concat(d.State.relatedDataMapHash,"/Related/");_.ref(n).off();var i="/App/Maps/".concat(d.State.relatedDataMapHash,"/Markers/");_.ref(i).off();var o="/App/Maps/".concat(t);d.State.projectConfig.projectName=d.State.projectsOb[e].name,d.State.projectConfig.projectDescription=d.State.projectsOb[e].description,d.State.projectConfig.completedResetDate=d.State.projectsOb[e].completedResetDate,d.State.projectConfig.projectHash=e,d.State.projectConfig.mapName=d.State.projectsOb[e].mapSet[t],d.markersLayer=null,d.sidebar.hide(),d.busyWorkingIndicator(!0),_.ref(o).once("value").then(function(e){var n=e.val();d.clearLocalStorageMaps();try{d.State.relatedDataMapHash=n.config.relDataMapHash}catch(t){d.State.relatedDataMapHash=null}d.setupGeoLayer(t,n),d.removeMarkersLayerMarkers(),document.getElementById("opennewproject").style.display="none",d.busyWorkingIndicator(!1);try{d.setupAddRelatedRecordEventListener(n.config.relDataMapHash)}catch(t){console.log("set relatedData callbacks failed")}try{d.setupFbAddMarkerNodeEventCallback(n.config.relDataMapHash),console.log("setUpMarkersCallback - from retrieve from Firebase")}catch(t){console.log("failed to set Markers listeners")}}).catch(function(t){console.log("Error! cannot retrieve mapdata from firebase:",t),d.busyWorkingIndicator(!1)})},saveMapToLocalStorage:function(t,e){try{localStorage.setItem("mapData."+t,JSON.stringify(e))}catch(t){alert("couldnt save map to localStorage - maybe too big ")}try{localStorage.setItem("projectConfig",JSON.stringify(d.State.projectConfig))}catch(t){alert("couldnt save project config to localStorage")}},clearLocalStorageMaps:function(){d.getLocalStorageMapDataKey().map(function(t){localStorage.removeItem(t)})},clearLocalStorageLatestRelDataBackup:function(){localStorage.removeItem("latestRelDataBackup")},propsTotabularContent:function(t){return contentStr},pushNewPointToFirebase:function(t){var e=t.mapID,n=t.json,i="App/Maps/".concat(e,"/Markers/");_.ref(i).push(n).then(function(t){console.log("pushed new marker!")}).catch(function(t){alert("Sorry - something went wrong - have you logged in etc?")}),d.sidebar.hide()},generateNewPointGeoJson:function(t){var e=t.type,n=t.lat,i=t.lng,o=t.user,r=t.timeStamp,a=t.photo,s=t.comment,l={};l.user=o,l.timeStamp=r,l.comment=s,l.photo=a,l.type=e;var u={};u.coordinates=[i,n],u.type="Point";var c={type:"Feature"};return c.geometry=u,c.properties=l,c},populateRelated:function(t){if(t){var e={},n={};return d.State.relatedData=Object.keys(t).map(function(i,o){var r,a,s={},l=(r=t[i],a=Object.keys(r).sort(),r[a[a.length-1]]);return s[i]=l,e[i]=l,n[i]=!0,s}),d.getRelDataFromLocalStorage(d.State.projectConfig.mapHash),{relDataObject:e,relDataSyncObject:n}}},getRelDataFromLocalStorage:function(t){console.log("fetching related from local storage");var e="backup.relatedData."+t+".",n=Object.keys(localStorage).filter(function(t){return t.match(e)});0!=n.length&&n.map(function(n){var i=JSON.parse(localStorage.getItem(n)),o=n.split(e)[1],r="App/Maps/"+t+"/Related/"+o,a=new Date(i.timestamp),s=new Date(d.State.relatedData[o].timestamp);a.getTime()>s.getTime()&&(d.updateFeatureRelatedState(o,i),d.State.relDataSyncStatus[n]=!1,f.pushRelatedDataRecord(r,o,i))})},updateFeatureRelatedState:function(t,e){d.State.relatedData[t]=e},setCompletedStyle:function(t){var e=t.feature,n=t.layer,i=(t.isCompleted,t.completedResetDate),o=void 0===i?new Date(d.State.projectConfig.completedResetDate):i,r=d.State.symbology,a=d.State.relatedData,s=d.featureToKey(e);if(void 0!==a[s]){var l=new Date(Date.parse(a[s].timestamp));o.getTime(),l.getTime();l>o&&n.setStyle({color:r.completedColor,fillColor:r.completedFillColor,weight:r.completedLineWeight,radius:1})}},updateSidebarRelatedFromState:function(t,e,n){e.innerHTML="";var i=n[t];i?(e.innerHTML="<h6>Latest related data</h6>",Object.keys(i).map(function(t){e.innerHTML+="".concat(t,": ").concat(i[t],"<br>")})):e.innerHTML="no related data found"},setupGeoLayer:function(t,e){d.mapMeta=e.meta,d.State.projectConfig.mapHash=t,h.myLayerGroup.clearLayers(d.geoLayer),d.State.featureIdLookup={};var n=e.Meta?e.Meta.LabelProperty:"Asset";d.geoLayer=o.a.geoJson(e.Geo,{onEachFeature:function(t,e){var i=t.properties[n];d.setCompletedStyle({feature:t,layer:e,isCompleted:!0});var o,r="";(o='<div class="btn btn-primary large icon-pencil" onClick="App.whenGeoFeatureClicked();"><br>\n          '.concat(i," </div>"),"LineString"==t.geometry.type)&&(r=d.createPopupContentButtonSet({buttonSet:d.State.AddPointButtonsLines}).popupContent);e.bindPopup(o+r),e.on("click",function(n){d.selectedLayer!==e&&(d.selectedLayer&&d.unsetSelectedStyle(),d.State.symbology.beforeSelectedColor=e.options.color,d.State.symbology.beforeSelectedFillColor=e.options.fillColor,d.State.symbology.beforeSelectedLineWeight=e.options.weight,d.State.currentLineAddPointLat=n.latlng.lat,d.State.currentLineAddPointLng=n.latlng.lng),d.selectedFeature=t,d.selectedLayer=e,d.selectedLayer.setStyle({color:"blue",fillColor:"blue",weight:2})})},style:function(t){return{fillOpacity:.4,color:d.State.symbology.uncompletedColor,fillColor:d.State.symbology.uncompletedFillColor,weight:d.State.symbology.uncompletedLineWeight}},pointToLayer:function(t,e){return o.a.circleMarker(e,{radius:d.State.symbology.uncompletedRadius,stroke:!0,weight:3,opacity:1,fillOpacity:1})},interactive:!0}),h.myLayerGroup.addLayer(d.geoLayer),Object.keys(d.geoLayer._layers).map(function(t){var e=d.geoLayer._layers[t],n=d.featureToKey(e.feature);d.State.featureIdLookup[n]=t}),g.fitBounds(d.geoLayer.getBounds()),d.movePolygonsToBack(),d.saveMapToLocalStorage(t,e)},fetchAndPopulateRelatedData:function(t){_.ref("/App/Maps/".concat(t.config.relDataMapHash,"/Related/")).once("value").then(function(t){return t.val()}).then(function(t){var e=d.populateRelated(t);e?(d.State.relatedData=e.relDataObject,d.State.relDataSyncStatus=e.relDataSyncObject):(d.State.relatedData={},d.State.relDataSyncStatus={})})},unsetSelectedStyle:function(){d.selectedLayer&&d.selectedLayer.setStyle({color:d.State.symbology.beforeSelectedColor,fillColor:d.State.symbology.beforeSelectedFillColor,weight:d.State.symbology.beforeSelectedLineWeight})},movePolygonsToBack:function(){d.geoLayer.eachLayer(function(t){"Polygon"==t.feature.geometry.type&&t.bringToBack()})},getLocalStorageMapDataKey:function(){return Object.keys(localStorage).filter(function(t){return new RegExp("^mapData.*").test(t)})},loadMapDataFromLocalStorage:function(){var t=d.getLocalStorageMapDataKey();if(0!=t.length){var e=JSON.parse(localStorage.getItem(t));try{d.State.projectConfig=JSON.parse(localStorage.getItem("projectConfig"))}catch(t){console.log("couldn't retrieve projectConfig from localStorage")}try{d.State.relatedDataMapHash=e.config.relDataMapHash}catch(t){d.State.relatedDataMapHash=null}var n=t[0].split("mapData.")[1];d.setupGeoLayer(n,e);try{d.setupAddRelatedRecordEventListener(e.config.relDataMapHash)}catch(t){console.log("failed to set RelData listeners")}try{d.setupFbAddMarkerNodeEventCallback(e.config.relDataMapHash)}catch(t){console.log("failed to set Markers listeners")}}},addPointForm:function(t){var e="\n    <h3>Add point  - ".concat(t,'</h3>\n    type: <input type="hidden" id="addpoint-type" readonly value = "').concat(t,'">\n\n    <p>  <textarea class="form-control" rows="2" id="addpoint-comment" placeholder = "optional comment here ..."></textarea></p>\n    <p><button class="btn btn-primary" id="addpoint-photo">Add photo</button></p><hr>\n    <p><button class="btn btn-primary" onclick="App.submitAddButtonForm()">\n    Submit </button> </p>');d.sidebar.setContent(e),d.sidebar.show()},submitAddButtonForm:function(){var t=document.getElementById("addpoint-type"),e=document.getElementById("addpoint-comment"),n=document.getElementById("addpoint-photo"),i=(new Date).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),o=d.generateNewPointGeoJson({type:t.value,lat:d.State.currentLineAddPointLat,lng:d.State.currentLineAddPointLng,user:r.auth().currentUser.displayName,comment:e.value,photo:n.value,timeStamp:i});d.pushNewPointToFirebase({mapID:d.State.relatedDataMapHash,json:o})},createPopupContentButtonSet:function(t){var e=t.buttonSet,n="<div class='dropdown'>\n    <button class='btn btn-primary left-spacing'>Add point ...\n    </button> <div class='dropdown-content'>0.";e.map(function(t){n+="<button onclick=\"App.addPointForm('".concat(t.id,'\')"\n       class="btn btn-primary dropdown-button" >').concat(t.label,"</button>")});return{popupContent:n+="</div></div>"}},featureLabels:function(){var t=g.getBounds();if(null!==d.State.visableFeatures&&(d.State.visableFeatures.map(function(t){t.unbindTooltip()}),d.State.visableFeatures=[]),!(g.getZoom()<20)){d.geoLayer.eachLayer(function(e){var n,i="";try{i=d.featureToKey(e.feature),n=d.State.relatedData[i]}catch(t){i=void 0,n=!1}e.getLatLng&&!n?t.contains(e.getLatLng())&&d.State.visableFeatures.push(e):e.getBounds&&!n&&(t.intersects(e.getBounds())||t.contains(e.getBounds()))&&d.State.visableFeatures.push(e)}),d.State.visableFeatures.map(function(t){t.bindTooltip(t.feature.properties.Asset,{permanent:!0,interactive:!0})})}},setupFbAddMarkerNodeEventCallback:function(t){_.ref("/App/Maps/".concat(t,"/Markers/")).on("child_added",function(t,e){var n=t.val();d.addMarkerToMarkersLayer(n.geometry.coordinates[1],n.geometry.coordinates[0],d.generatePopupPropSet(t.val()))})},setFeatureSymbologyToCompleted:function(t){var e=d.geoLayer.getLayer(d.State.featureIdLookup[t]);try{d.setCompletedStyle({layer:e,feature:e.feature,isCompleted:!0})}catch(t){}},setupAddRelatedRecordEventListener:function(t){var e=_.ref("/App/Maps/".concat(t,"/Related/")),n=function(t){var e=t.val(),n=e[Object.keys(e).sort().reverse()[0]];d.updateFeatureRelatedState(t.key,n),d.setFeatureSymbologyToCompleted(t.key)};_.ref(e).on("child_added",function(t,e){n(t)}),_.ref(e).on("child_changed",function(t){n(t)})},featureToKey:function(t){return"".concat(t.properties.OBJECTID).concat(t.geometry.type)}};window.App=d;var f={saveRelDataRecordToLocalStorage:function(t,e,n){localStorage.setItem("backup.relatedData."+t+"."+e,JSON.stringify(n))},pushRelatedDataRecord:function(t,e,n){_.ref(t).push(n).then(function(t){var n=t.parent.key;d.State.relDataSyncStatus[n]=!0,d.sidebar.hide();var i="backup.relatedData."+d.State.projectConfig.mapHash+"."+e;localStorage.removeItem(i)}).catch(function(t){alert("Sorry - something went wrong - have you logged in etc?")})},submit:function(){f.featureKey=d.featureToKey(d.selectedFeature),f.nodePath="App/Maps/".concat(d.State.relatedDataMapHash,"/Related/").concat(f.featureKey,"/");var t={},e=(new Date).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"});t.timestamp=e,t.user=r.auth().currentUser.displayName,t.condition=document.getElementById("related-data-condition").value,document.getElementById("related-data-comments").value&&(t.comments=document.getElementById("related-data-comments").value),document.getElementById("related-data-photo").value&&(t.photo=document.getElementById("related-data-photo").value);var n=f.featureKey;d.State.relDataSyncStatus[n]=!1,d.updateRelDataSyncMsg(d.State.relDataSyncStatus[n],document.getElementById("rel-data-sync-message")),d.updateFeatureRelatedState(n,t),d.updateSidebarRelatedFromState(n,document.getElementById("latest-related"),d.State.relatedData),f.saveRelDataRecordToLocalStorage(d.State.projectConfig.mapHash,n,t),f.pushRelatedDataRecord(f.nodePath,n,t),d.State.symbology.beforeSelectedColor=d.State.symbology.completedColor,d.State.symbology.beforeSelectedFillColor=d.State.symbology.completedFillColor},backupUpRelStateToLocalStorage:function(){localStorage.setItem("latestRelDataBackup",JSON.stringify(d.State.relatedData))},restoreRelStateFromLocalStorage:function(){null!==localStorage.getItem("latestRelDataBackup")?d.State.relatedData=JSON.parse(localStorage.getItem("latestRelDataBackup")):d.State.relatedData={}},addPhoto:function(){var t=document.getElementById("photo-capture");document.getElementById("related-data-photo").value=t.files[0].name}};window.RelatedData=f,window.User=u;var p=function(t){document.getElementById("open-new-project-button").style.display="none",function(){console.log("loadProject ...");var t=function(t){document.getElementById("opennewproject");document.getElementById("message-area").innerHTML="Select a project",Object.entries(t).map(function(t){var e=document.createElement("button");e.setAttribute("value",t[0]),e.setAttribute("title",t[1].description),e.className="btn btn-primary open-project-button",e.addEventListener("click",function(t){m(t.target.value)}),e.innerHTML=t[1].name,maplist.appendChild(e)})};document.getElementById("message-area").innerHTML="<p>waiting for network connection ...</p>",_.ref("/App/Projects").once("value").then(function(e){document.getElementById("message-area").innerHTML=null,document.getElementById("opennewproject"),d.State.projectsOb=e.val(),t(e.val())}).catch(function(t){document.getElementById("message-area").innerHTML="Sorry - "+t.message})}()},m=function(t){console.log("projectHash:",t),document.getElementById("message-area").innerHTML="Now select a map",document.querySelector("#maplist").innerHTML="";var e=d.State.projectsOb[t].mapSet;Object.entries(e).map(function(e){var n=document.createElement("button");n.setAttribute("value",e[0]),n.setAttribute("title",e[1]),n.className="btn btn-primary open-project-button",n.addEventListener("click",function(e){d.retrieveMapFromFireBase(e.target.value,t)}),n.innerHTML=e[1],maplist.appendChild(n)})};o.a.Control.OfflineBaselayersControl=o.a.Control.extend({onAdd:function(t){var e=o.a.DomUtil.create("button","btn btn-sm icon-download btn-info");return e.innerHTML="Tiles",e.title="Save Background layers (tiles) for Offline use",e.onclick=function(){var t=document.querySelectorAll(".leaflet-control-offline");"none"==t[0].style.display?t.forEach(function(t){return t.style.display="block"}):t.forEach(function(t){return t.style.display="none"})},e}}),o.a.control.OfflineBaselayersControl=function(t){return new o.a.Control.OfflineBaselayersControl(t)};var v={apiKey:"AIzaSyB977vJdWTGA-JJ03xotQkeu8X4_Ds_BLQ",authDomain:"fir-realtime-db-24299.firebaseapp.com",databaseURL:"https://fir-realtime-db-24299.firebaseio.com",projectId:"fir-realtime-db-24299",storageBucket:"fir-realtime-db-24299.appspot.com",messagingSenderId:"546067641349"},g={},_={};d.State.relatedData={},d.State.visableFeatures=[],d.State.featureIdLookup={},d.State.symbology.beforeSelectedColor={},d.State.symbology.beforeSelectedFillColor={},r.initializeApp(v),_=r.database(),g=h.setupBaseLayer(),o.a.Control.watermark=o.a.Control.extend({onAdd:function(t){var e=o.a.DomUtil.create("IMG","watermark");return e.src="ORCL-logo-cropped.png",e.style.opacity=.3,e}}),o.a.control.watermark=function(t){return new o.a.Control.watermark(t)},o.a.control.watermark({position:"bottomright"}).addTo(g),o.a.control.scale({position:"bottomleft"}).addTo(g),d.initInfoWindowButton(),d.initSettingsControl(),d.sidebar=window.L.control.sidebar("sidebar",{position:"left",closeButton:"true",autoPan:!1}),g.addControl(d.sidebar),d.lc=o.a.control.locate({position:"topright",keepCurrentZoomLevel:!0,strings:{title:"My location (will use GPS if available)"},cacheLocation:!1,locateOptions:{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e3},icon:"icon-direction"}).addTo(g),g.doubleClickZoom.disable(),o.a.control.OfflineBaselayersControl({position:"topright"}).addTo(g),[{object:h.streetsLayer,label:"colour streets",class:"streets-offline-control"},{object:h.greyscaleLayer,label:"Greyscale",class:"greyscale-offline-control"},{object:h.satLayer,label:"Satellite",class:"satellite-offline-control"}].map(function(t){return o.a.control.offline(t.object,l,{saveButtonHtml:'<i id="'.concat(t.object,'" title="Save ').concat(t.label,' layer to use offline" class="').concat(t.class,' layer icon-download">').concat(t.label," </i>"),removeButtonHtml:'<i class="icon-trash " aria-hidden="true">Delete</i>',confirmSavingCallback:function(t,e){window.confirm("Save "+t+" background tiles?")&&e()},confirmRemovalCallback:function(t){window.confirm("Delete All offline tiles?")&&t()},minZoom:14,maxZoom:18,position:"topright"})}).map(function(t){t.addTo(g)}),document.querySelectorAll(".leaflet-control-offline").forEach(function(t){t.style.display="none"}),d.setupMarkersLayer(),d.loadMapDataFromLocalStorage(),"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("sw.js").then(function(t){}).catch(function(t){console.log("SW registration failed: ",t)})}),g.on("locationfound",function(t){d.State.latestLocation=t.latlng}),g.on("click",function(t){d.unsetSelectedStyle(),d.selectedLayer=null,d.selectedFeature=null}),g.on("dblclick",function(t){!function(t){var e=d.createPopupContentButtonSet({buttonSet:d.State.AddPointButtonsPoints});o.a.popup().setLatLng(t.latlng).setContent(e.popupContent).openOn(g)}(t),d.State.currentLineAddPointLat=t.latlng.lat,d.State.currentLineAddPointLng=t.latlng.lng,d.State}),g.on("moveend",function(){d.featureLabels()})}]);
//# sourceMappingURL=bundle.js.map